00.md :::
|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 1/20|

# – GVK_UC_H00  HUBA keretrendszer RÉSZLETES RENDSZERTERV
## 2024. november 28.
### V1.0


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 2/20|

#### **Dokumentum történet **

Kidolgozó változtatások követése

|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.11.28|Létrehozás|Vörös Gábor|Ellenőrizhető|
|1.0|2025.04.08|#102231 - HUBA sidenav X gombok működésének javítása|Vörös Gábor|Ellenőrizhető|
||||||
||||||



MÁV SZK Ellenőrzések követése

|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0||Ellenőrzés|||
||||||
||||||
||||||



MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
|||MÁV igényeknek megfelel|Herczog Ákos||
||||||
||||||
||||||


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 3/20|

#### **1. Általános ismertetés **
##### **1.1. A használati eset modulkapcsolatai **

**Szolgáltatások leírásának elérhetősége:**

[GVK_webalkalmazás_szolgáltatások.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1301)


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 4/20|

##### **1.2. A használati eset célja, feladatai **

A használati eset alapvető célja, hogy a HUBA alapvető működési feltételeit biztosítsa.

Ennek keretében az alábbiak érintettek:

    - Ablakhasználati statisztika

Kizárólag szolgáltatást érint, ezért a [GVK_wabalkalmazás_szolgáltatások.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1301)
dokumentum **S_27 – Felhasználói aktivitás naplózása** eljárása tartalmazza a
teljes megvalósítást.

    - Konkurenskezelés

Közös rendszerszolgáltatásként lett aposztrofálva, ezért a [GVK_K_15](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1309)       - HUBA       [UC_H00_01 Konkurenskezelés.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1309) dokumentum tartalmazza a teljes leírását.

    - Navigációs keretrendszer (sidenav)

Jelen dokumentumban kerül kifejtésre.


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 5/20|

#### **2. A használati eset ablakai **
##### **2.1. Ablakok közötti kapcsolat, navigálás **


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 6/20|

##### **2.2. Navigációs sáv **

**2.2.1.** **Ablak/lap feladatai**

A multipage működésének szimulálása single page környezetben, azaz több képernyő megnyitási lehetőségének
biztosítása további böngésző ablakok megnyitása nélkül.

Navigációs keretrendszer kialakítása az alábbi funkciókkal

- Képernyő megnyitása új fülön

Ha a HUBA alkalmazás egy új képernyőt nyit meg, az nem egy új böngészőablakban nyílik meg, hanem a

navigációs keretrendszer létrehoz számára egy új elemet, amelybe a képernyő tartalma betöltődik, a

továbbiakban az új elemre kattintva érhető el a képernyő.

További háttérfeladat az ablakhasználati statisztika és a konkurenskezelés képernyő megnyitás

eseményének vezérlése, amennyiben az szükséges.

- Képernyő bezárásának menedzselése

Ha a HUBA alkalmazás egy képernyője bezárul (Mentés/Mégsem/Bezárás funkciókkal), abban az esetben a

navigációs keretrendszer képernyőhöz tartozó eleme eltűnik a navigációs listából.

További háttérfeladat az ablakhasználati statisztika és a konkurenskezelés képernyő bezárás eseményének

vezérlése, amennyiben az szükséges.

- Több képernyő esetén váltási lehetőség biztosítása a képernyők között

A HUBA alkalmazásban megnyitott képernyők között a felhasználó az egyes elemekre kattintva válthat.

- Visszajelzés az egyes képernyőkön futó háttérfolyamatokról
Ütemezett frissítés visszaszámláló jelzése a navigációs sávban, továbbá verzióváltozások visszajelzése, ahol

releváns.

- Navigációs sáv ikon állapotúra kicsinyítésének lehetősége

A felhasználónak lehetősége van a navigációs sávot ikon állapotúra kicsinyíteni egy erre a célra szolgáló

állapotváltó ikon segítségével. Az ikon állapot és a teljes szélesség közötti váltás tetszőlegesen módosítható

a rendszer működése közben.


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 7/20|


**2.2.2.** **Ablak/lap megjelenése**

A keretrendszer lesz az egyetlen új ablak, ami megnyílik a HUBA ikonra kattintva, és az alábbiak szerint, bal

oldalon jelenik meg a navigációs sáv (sidenav).

  - Az ablak kitölti a teljes képernyőt.

  - Fejléc

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet használatakor a fejléc háttérszíne
középszürke (7F7F7F).

Üzemi (PROD)

Felhasználói teszt (QA)

Képernyőfotó a megvalósítás után.

Belső teszt (TEST)

Képernyőfotó a megvalósítás után.

Fejlesztői (DEV)

Képernyőfotó a megvalósítás után.

`o` Középen az modul megnevezését: „ **HUBA** ”

`o` Jobb szélen:

              - Rendszer neve és logója, valamint a rendszer neve alatt a frontend
verziószáma jelenik meg.

              - A logó előtt a GVK környezet neve:

                  - üzemi (PROD): Nem jelenik meg a kliensen.

                  - felhasználói teszt (QA): „ **QA** ”

                  - teszt (TEST): „ **TEST** ”

                  - fejlesztői (DEV): „ **DEV** ”

              - GVK profil név:
A GVK-ba történt bejelentkezéskor érvényes GVK profil név megjelenítésére
szolgál.


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 8/20|



  - Navigációs sáv

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet használatakor a navigációs sáv
háttérszíne középszürke (7F7F7F).

A sidenav minden egyes eleme esetén tartalmaz egy ikon-t, és a képernyő megnevezését, valamint egy X

nyomógombot az alábbiak szerint:

#102231 kezdete

A sidenav főképernyőjének listaeleme nem kap X nyomógombot, azt a böngészőfülön található X nyomógomb

kezelésével lehet bezárni.

A többi képernyő esetében az X nyomógomb minden esetben (ahol ez lehetséges) az adott képernyő Mégsem

funkciójának megfelelően kell, hogy működjön. Ha felhasználói interakció szükséges a képernyő bezárásához, azt

is ugyanúgy meg kell jeleníteni, mintha a felhasználó megnyomta volna a Mégsem gombot a képernyőn.

Olyan esetekben ahol ez nem lehetséges, kérdezés nélkül bezáródik az adott képernyő.

#102231 vége


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 9/20|


A sidenav tetején látható állapotválasztó gomb ( / ) segítségével a navigációs sáv ikon állapotúra

kicsinyíthető, illetve ismételt megnyomásával teljes méretűre nagyítható az alábbiak szerint:

A képernyők működése nem fog eltérni a jelenleg külön böngészőablakokat használó megoldáshoz képest.

A sidenav kivitelezéséhez az Angular Tabs kontrolja lesz felhasználva, módosított megjenéssel.


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 10/20|


A HUBA képernyő felépítés az alábbi vázlat alapján:

FEJLÉC



NAVIGÁCIÓS

SÁV


TARTALMI RÉSZ

(IFRAME)


A bal oldalon megjelenő navigációs sáv mindig és minden körülmények között látszódik a
HUBA képernyőn, minden jelenleg külön böngészőfülön megnyíló képernyő a továbbiakban a
navigációs keretrendszer alá töltődik be.

A navigációs sáv mindig bal oldalon jelenik meg, nem helyezhető át máshova, viszont két
megjelenítési módja van, melyek az alábbiak:

  - Teljes méret – alapértelmezetten így indul a HUBA képernyő, ilyenkor az ikonok és a

képernyő neve is látszik a navigációs elemen.

  - Ikon méret – ilyenkor a képernyőhöz tartozó ikon látszódik

A megjelenés módja a működést nem befolyásolja, mindkét esetben lehet váltani a képernyők
között a navigációs elemekre kattintva.

A jelenleg a képernyőkön futó háttérfolyamatok továbbra is az egyes képernyőkön fognak
futni (a háttérben is), a navigációs sáv indikátorként fog működni az egyes háttérfolyamatok
visszajelzéseivel kapcsolatosan, melyek az alábbiak:

  - Ütemezett frissítések (jelenleg: H01_01 és H02_01) visszajelzése a navigációs elemen

  - Verzióváltozások visszajelzése (jelenleg: H01_01 és H02_01)


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 11/20|


**Az ablak működési leírása (lapfül esetén külön almenüben)**

Az **A01 - GVK – Térkép** képernyőn a HUBA ikonra kattinva megnyílik a **HUBA** (H00?) képernyő,
és automatikusan betölti a **H01_01 – Bejegyzés lista** képernyőt. A felhasználó a **H01_01 –**
**Bejegyzés lista** képernyőn az ott leírt módon megkezdheti a munkát a HUBA-ban.

Minden további megnyitott képernyő a böngészőablakon belül nyílik meg, a navigációs sávban
egy új listaelem létrehozása mellett.

A felhasználó a listaelemekre kattinva válthat az egyes képernyők között.

A továbbiakban a többi HUBA-hoz kapcsolódó használati esetet úgy kell értelmezni, hogy egy
új képernyő megnyitása egy új ablakban esemény helyett egy új képernyő megnyitása egy új
listaelemen lesz. A függőségi kapcsolatok továbbra is ugyanúgy kell működjenek, mint a
korábbi (multipage) megoldásnál, azaz ha egy „szülő” képernyőt bezár a felhasználó, a hozzá
kapcsolódó „gyerek” képernyők is bezárulnak automatikusan. Ennek biztosítása az Angular
keretein belül megvalósított moduláris felépítéssel lesz megoldva.

  - ha egy „gyerek” képernyő bezárul, a „szülő” képernyőt automatikusan frissíteni kell

függetlenül attól, hogy hol tart az ütemezett frissítés

  - az időzített frissítések visszajelzése a keretrendszerben lesz, a háttérfolyamatot

továbbra is maga a képernyő kezeli minden esetben

A keretrendszernek képesnek kell lennie legalább 10 képernyő egyidejű kezelésére a fent

felsorolt feladatok ellátásával.

A továbbiakban az alábbi funkciók megvalósításának részletes ismertetése következik:

  - Képernyő megnyitása

`o` HUBA képernyő inicializálása

`o` Új képernyő megnyitása

  - Képernyő bezárása

`o` „Gyerek” képernyő bezárása

`o` „Szülő” képernyő bezárása

`o` HUBA képernyő bezárása

  - Háttérfolyamatok

`o` Ütemezett frissítés visszajelzése

`o` Verzióváltozás visszajelzése



-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 12/20|


**2.2.3.1.** **Képernyő megnyitása**

A képernyő megnyitásokkal kapcsolatos folyamatok kerülnek tisztázásra az alábbiakban.

**FONTOS!!! A lent leírt folyamatok a meghatározott sorrendben kerüljenek végrehajtásra, az**
**előző lépés(ek) befejezésének megvárásával!!!**

HUBA képernyő inicializálása

A HUBA képernyő inicializálása az alábbi folyamat mentén történik onnan, hogy a felhasználó
az **A01 - GVK – Térkép** képernyőn a HUBA ikonra kattint:

1. Új böngésző fül megnyitása (Title: HUBA)

Ha a felhasználó az **A01 – GVK – Térkép** képernyőn a HUBA ikonra kattint, a kliens
megnyit egy új göngészőablakot.

2. Keretrendszer betöltése (fejléc és navigációs sáv)

Az előző lépésben megnyitott böngészőablakba betöltődik a keretrendszer, azaz a
fejléc és a navigációs sáv.

Továbbá a keretrendszer meghívja **S_79 – Elérhető képernyők lekérdezése**
**(HUBA.Get_Huba_Screens)** eljárást, amely visszaadja az elérhető képernyők listáját és
azok működtetéséhez szükséges paramétereket (ikon, ütemezett frissítés,
konkurenskezelés, stb.)

3. **H01_01 – Bejegyzés lista** képernyő megnyitása

A keretrendszer betöltődése után a kliens megnyitja a keretrendszer egyetlen
alapértelmezett képernyőjét, a **H01_01 – Bejegyzés lista** -t. A képernyő megnyitása a
következő fejezetben (Új képernyő megnyitása) leírt módon történik.

A továbbiakban ez a képernyő lesz a moduláris felépítés legfelső szintjén, és minden
további képernyő ez alá a képernyő alá kerül besorolásra az alábbiak szerint:

     - **H01_01 – Bejegyzés lista**

A HUBA rendszer fő képernyője, minden esetben ez a képernyő nyílik meg

először.

`o` **H02_01 – Bejegyzés kezelése**

Egy adott HUBA bejegyzéshez kapcsolódó információkat összefoglaló
dashboard képernyő, **H01_01 – Bejegyzés lista** képernyőről nyitható.

            - **H03_01 – Bejelentő**

Egy HUBA bejegyzés bejelentőjének adatit kezelő képernyő,
**H02_01 – Bejegyzés kezelése** képernyőről nyitható.

            - **H04_01 – Kód és hely**

Egy HUBA bejegyzés érintett objektumait és főkódját kezelő
képernyő, **H02_01 – Bejegyzés kezelése** (szerkesztés) és **H01_01**
**– Bejegyzés lista** (új felvitel) képernyőkről nyitható, utóbbi
esetben a **H02_01 – Bejegyzés kezelése** képernyő megnyitása
nélkül (viszont vizsgálni kell, hogy nyitva van-e, ha igen, nem


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 13/20|


nyitható meg a H04_01), majd a bezárást követően a **H02_01 –**
**Bejegyzés kezelése** képernyő megnyitásával.

            - **H05_01 – Korlátozás**

Egy HUBA bejegyzés által generált korlátozások kezelésére
szolgáló képernyő, **H02_01 – Bejegyzés kezelése** képernyőről
nyitható.

            - **H06_06 – Értesítések kezelése**

Egy HUBA bejegyzéshez kapcsolódó értesítések rögzítésére
szolgáló képernyő, **H02_01 – Bejegyzés kezelése** és **H01_01 –**
**Bejegyzés lista** képernyőkről nyitható, utóbbi esetben a **H02_01**
**– Bejegyzés kezelése** képernyő kihagyásával (viszont vizsgálni
kell, hogy nyitva van-e, ha igen, nem nyitható meg a H06_06),
majd bezárást követően a **H01_01 – Bejegyzés lista** képernyőre

való visszatéréssel.

            - **H08_01 – Bejegyzés részletek**

Egy HUBA bejegyzés részletes adatainak kezelésére szolgáló
képernyő, **H02_01 – Bejegyzés kezelése** képernyőről nyitható.

            - **H09_01 – Kifogáskezelés**

Egy HUBA bejegyzéssel kapcsolato kifogások kezelésére szolgáló
képernyő, **H02_01 – Bejegyzés kezelése** képernyőről nyitható.

`o` **H06_01 – Értesítési beállítások**

Értesítésekkel kapcsolatos rendszer szintű beállítások kezelésére
szolgáló képernyő,, **H01_01 – Bejegyzés lista** képernyőről nyitható.

A további képernyők, amelyek felugró vagy beúszó ablakok, nem szerepelnek ebben a
listában, azok minden esetben ahhoz a képernyőhöz tartoznak, ahol megnyíltak, és ott is kell

kezelni őket.

Új képernyő megnyitása

Ha a felhasználó a HUBA-n belül egy új képernyőt nyit meg, az az alábbiak szerint történik:

1. Megnyitás előtti ellenőrzések lefuttatása

Van-e már nyitva a megnyitni kívánt képernyőből?

a. Amennyiben nem szerepel a listaelemben a megnyitni kívánt képernyő, abban

az esetben folytatódik a megnyitási folyamat a következő lépéssel.

b. Amennyiben szerepel a listaelemek között a megnyitni kívánt képernyő, az

alábbiak szerint kell eljárni

i. **H02_01 – Bejegyzés kezelése** esetében

A keretrendszer megvizsgálja, hogy a megnyitni kívánt bejegyzés
megegyezik-e azzal, ami már meg van nyitva.

Ha igen, akkor kiválasztásra kerül a **H02_01 – Bejegyzés kezelése**
képernyő a navigációs sávon.


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 14/20|


Amennyiben nem, üzenetet küld a felhasználónak, hogy a **H02_01 –**
**Bejegyzés kezelése** képernyő annak „gyerek”-ei be fognak záródni, és
az esetleges nem mentett tartalmak elvesznek.

Ha a felhasználó a **Folytatás** ra kattint, megtörténik a képernyők

bezárása további üzenet küldése nélkül.

Ha a felhasználó a **Mégsem** re kattint, nem záródnak be a képernyők, és
nem is nyílik meg a **H02_01 – Bejegyzés kezelése** .

ii. **H04_01 – Kód és hely** esetében

A keretrendszer megvizsgálja, hogy a megnyitni kívánt bejegyzés
megegyezik-e azzal, ami már meg van nyitva ( **H04_01 – Kód és hely,**
**H02_01 – Bejegyzés kezelése** képernyőket is vizsgálni kell), vagy a
felhasználó új bejegyzést szeretne-e létrehozni.

Ha megegyezik, akkor kiválasztásra kerül a **H04_01 – Kód és hely**
képernyő a navigációs sávon.

Amennyiben nem, üzenetet küld a felhasználónak, hogy a **H02_01 –**
**Bejegyzés kezelése** képernyő annak „gyerek”-ei be fognak záródni, és
az esetleges nem mentett tartalmak elvesznek.

Ha a felhasználó a **Folytatás** ra kattint, megtörténik a képernyők

bezárása további üzenet küldése nélkül.

Ha a felhasználó a **Mégsem** re kattint, nem záródnak be a képernyők, és
nem is nyílik meg a **H04_01 – Kód és hely** .

iii. Többi képernyő esetében

Kiválasztásra kerül az adott képernyő a navigációs sávon, és
amennyiben nincs nem mentett módosítás a képernyőn, frissül a

tartalma.

2. Új listaelem létrehozása a navigációs sávon

A lista végén (üres lista esetén az első elemeként) egy új listaelem megjelenítése a
megnyitott képernyő adataival, melyet az **S_79 – Elérhető képernyők lekérdezése**
**(HUBA.Get_Huba_Screens)** eljárás visszaadott a keretrendszer inicializálásakor.

3. Megnyitott képernyő tartalmának betöltése a képernyő tartalmi részébe

A megnyitott képernyő tartalma megjelenik a keretrendszer tartalmi részében
(iframe).

4. Háttérfolyamatok visszajelzése, amennyiben szükséges

Bizonyos képernyők esetében a háttérben futó szolgáltatásokról visszajelzés
szükséges. Ezek az alábbiak:

a. Ütemezett frissítés visszajelzése bezárásig


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 15/20|


Ha a felhasználó a **H01_01 – Bejegyzés lista** vagy a **H02_01 – Bejegyzés**
**kezelése** képernyők valamelyikét nyitja meg, akkor az ütemezett frissítés
következő frissítésig hátrelevő idő viszajelzése a navigációs sávban történik.

A visszajelzés a képernyő ikonja körül megjelenő kör alakú progress sáv
megvalósításával történik.

b. Verzióváltozás megjelenítése

Ha a felhasználónál a **H01_01 – Bejegyzés lista** vagy a **H02_01 – Bejegyzés**
**kezelése** képernyők valamelyikén változás történik, és nem az az aktív
képernyő, akkor a navigációs sávban jelezni kell a verzióváltozást.

A verzióváltozás visszajelzése az ikon hátterének sárgára változtatásával
(#D7D700) történik. A listaelemre kattintva megszűnik a jelzés, és az ikon
háttere visszaváltozik sötétkékre (DEV, TEST és QA rendszerek esetén
szürkére).

**2.2.3.2.** **Képernyő bezárása**

A képernyő bezárással kapcsolatos folyamatok kerülnek tisztázásra az alábbiakban.

#102231 kezdete

Képernyő bezárása az alábbi módokon lehetséges:

  - Képernyőn elhelyezett Mentés/Mégsem gombok kezelésével

  - Navigációs sávon a képernyő listaelemén található X nyomógomb kezelésével

#102231 vége

**FONTOS!!! A lent leírt folyamatok a meghatározott sorrendben kerüljenek végrehajtásra, az**
**előző lépés(ek) befejezésének megvárásával!!!**

„Gyerek” képernyő bezárása

Abban az esetben, ha a bezárandó képernyő ún. „gyerek” képernyő, azaz nem került
megnyitásra az adott képernyőről egy vagy több további képernyő (azaz a képernyő kódja nem
szerepel az ablak hierarchiában szülő képernyőként sehol), az alábbi folyamat fut le:

1. Nulladik lépésben feltételezzük, hogy a képernyő elvégezte a szükséges

adminisztrációit a bezáráshoz, pl mentés esetén meghívta az ablakhasználati
statisztikát, és logolta a mentés tényét, valamint az mentés maga is megtörtént,
továbbá logolta a képernyő bezárást, illetve szükség esetén a konkurenskezelést is

menedzselte.

2. Képernyő tartalmának és navigációs sáv listaelemének megszüntetése

A keretrendszer bezárja a képernyőt, és törli a képernyőhöz tartozó listaelemet.

„Szülő” képernyő bezárása

Abban az esetben, ha a bezárandó képernyő ún. „szülő” képernyő, azaz megnyitásra került az
adott képernyőről egy vagy több további képernyő, az alábbi folyamat fut le:

1. „Gyerek” képernyők bezárása egyesével az előző fejezetben taglalt módon


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 16/20|


Amennyiben a bezárandó képernyő „gyerek” képernyőjének további „gyerek”
képernyői vannak, először a legalsó szinten kell bezárni a képernyőket, és úgy lépkedni
tovább, minden kapcsolódó képernyő bezárásával.

Ennek biztosítása az Angular modulári felépítésével lesz megvalósítva.

2. „Szülő” képernyő bezárása immár „gyerekként”, az előző fejezet szerinti módon

HUBA képernyő bezárása

Amennyiben a HUBA képernyő kerül bezárásra, a keretrendszernek nincs más teendője, mint
a **H01_01 – Bejegyzés lista** képernyőt „szülő”-ként kezelve bezárni az összes „gyerek”
képernyőjét, majd bezárni magát a **H01_01 – Bejegyzés lista** képernyőt is, amivel együtt a

keretrendszer is záródik.

**2.2.3.3.** **Háttérfolyamatok**

A háttérfolyamatokkal visszajelzésével kapcsolatos folyamatok kerülnek tisztázásra az

alábbiakban.

**FONTOS!!! A lent leírt folyamatok a meghatározott sorrendben kerüljenek végrehajtásra, az**
**előző lépés(ek) befejezésének megvárásával!!!**

Ütemezett frissítés visszajelzése

Ha a felhasználó a **H01_01 – Bejegyzés lista** vagy a **H02_01 – Bejegyzés kezelése** képernyők
valamelyikét nyitja meg, akkor az ütemezett frissítést a keretrendszernek vissza kell jeleznie a
navigációs sávban, a képernyő ikonja körül megjelenített kör alakú progress bar
megjelenítésével, amely a képernyőnél beállított (másodpercben megadott)
rendszerparaméter alapján számol vissza másodpercben. A számot nem kell megjeleníteni,
viszont a progress bar-nak úgy kell működnie, hogy 0-ról indulva az ütemezés végére éri el a
100%-ot, majd ezután végrehajtódik a képernyő frissítése.

A visszajelzés módja az alábbiakban látható:

Verzióváltozás visszajelzése

Amennyiben egy ilyen képernyőn változás történik, és az nem aktív a navigációs sávon, annak
jelzése szükséges. Ebben az esetben az ikon hátterének színe sötétkékről sárgára (#D7D700)
változik, és mindaddig megőrzi színét, amíg a felhasználó a listaelemre nem kattint. A

listaelemre kattintva visszaáll a háttérszín sötétkékre.


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 17/20|


Ez nem befolyásolja az egyes képernyőkön megjelenő verziófrissítés jelzéseket, azoknak
ugyanúgy meg kell jelenniük az egyes képernyőknél jelzett módok szerint.


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 18/20|

### **2.2.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **




|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Fejléc||||||||
|||||||||
|Abc||||||||
|||||||||
|||||||||


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 19/20|


**Nyomógombok**




|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
|---|---|---|---|---|
|Mentés|Mentés||||
|Mégsem|Mégsem||||
||||||


-----

|GVK_UC_H00 – HUBA keretrendszer|Col2|Azonosító: RRT_GVK_UC_H00|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 20/20|


**2.2.6.** **Hívott szolgáltatások**


|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|||
||||
||||
||||


**2.2.7.** **Rendszerüzenetek**

Nincs. vagy



|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
||||
||||
||||
||||
||||


**2.2.8.** **Kódtáblák, választási listák**

Nincs.

**2.2.9.** **Rendszerparaméterek**

Nincs. vagy

Helye: /src/BackEnd/GvkBackend/WebApi/appsettings.json

|Rendszerparaméter neve|Rendszerparaméter jelentése|Default érték|Beállított érték|
|---|---|---|---|
|||||
|||||
|||||


-----



01.md :::
|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 1/48|

# – GVK_UC_H01  HUBA bejegyzések RÉSZLETES RENDSZERTERV
## 2025. április 2.
### V1.22


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 2/48|

#### **Dokumentum történet **

Kidolgozó változtatások követése













|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.05.17.|Létrehozás #89125 - H01_01 - Bejegyzések ablak és grid kialakítása|Hutter Julianna|Ellenőrizhető|
|1.1|2024.06.05 2024.06.25|#89126 - H01_01 - Új bejegyzés nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.2|2024.06.05|#89142 - H01_03 - Bejegyzések oszlopmegjelenítési beállítása ablak kialakítása|Hutter Julianna|Ellenőrizhető|
|1.3|2024.06.07|#89145 - H01_01 - Értesítési beállítások nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.4|2024.06.13|#89136 - H01_01 - Bejegyzés befejezése nyomógomb kezelése|Hutter Julianna|Törlésre került|
|1.5|2024.06.18|#89139 - H01_02 - Bejegyzésekben keresés ablak kialakítása|Hutter Julianna|Ellenőrizhető|
|1.6|2024.06.26|#89132 - H01_01 - Bejegyzés megnyitása nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.7|2024.08.06|#92557 - H01_01 - Kezdési idővel nem rendelkező bejegyzések megjelenítése|Hutter Julianna|Ellenőrizhető|
|1.8|2024.08.07|#92722 - H01_03 - Bejegyzések oszlopmegjelenítése ablakstatisztika módosítása|Hutter Julianna|Ellenőrizhető|
|1.9|2024.08.14|#92180 - H01_01 - Kártyás nézet DHTMLx DataView nézet használata|Hutter Julianna Vörös Gábor|Ellenőrizhető|
|1.10|2024.09.12|#93041 - H01_01 - Értesítések nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.11|2024.09.18|#89383 - HUBA betűkód kivezetése|Berkesi Ádám|Ellenőrizhető|
|1.12|2024.10.16|#91585 - H01_01, H01_02 - Bejegyzések mezőtartalom véglegesítése|Hutter Julianna|Ellenőrizhető|
|1.13|2024.11.08|#95847 - H01_01 - Nyomógombok kezelésére megnyitható ablakok vizsgálata|Hutter Julianna|Törölve|
|1.14|2024.11.28|#96921 - HUBA - H01_01 ablakban grid sorában dupla kattintásra nyiló ablak|Hutter Julianna|Ellenőrizhető|
|1.15|2024.11.29|#96127 - HUBA - H09 - Kifogáskezelés|Kovács Eszter|Ellenőrizhető|
|1.16|2024.12.03|#97253 - H01_02 keresés véglegesítése 2.|Hutter Julianna|Ellenőrizhető|
|1.17|2025.01.02|#97263 - H01_01 - Kapcsolók feltételeinek módosítása|Hutter Julianna|Ellenőrizhető|
|1.18|2025.01.28|#98306 - H01_01 - getHubaLista, getBejegyzesReszletek javítás|Hutter Julianna|Ellenőrizhető|
|1.19|2025.02.11|#99401 - GVK - HUBA H01_01 szűrő kapcsolok Tooltip beállítása|Hutter Julianna|Ellenőrizhető|
|1.20|2025.03.20|#101217 - GVK - H01_02 - HÜSZ-vonal kereső paraméter használata|Hutter Julianna|Ellenőrizhető|
|1.21|2025.03.24|#101355 - H01_01 - Kifogásolt bejegyzés láthatóság|Kovács Eszter|Folyamatban|
|1.22|2025.04.02|#101217 - GVK - H01_02 - HÜSZ-vonal kereső paraméter használata (GVK QA)|Hutter Julianna|Ellenőrizhető|


MÁV SZK Ellenőrzések követése



-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 3/48|


|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.|Ellenőrzés|||
||||||
||||||
||||||


MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
||2024.|MÁV igényeknek megfelel|Herczog Ákos||
||||||
||||||
||||||


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 4/48|

#### **1. Általános ismertetés ** **1.1. A használati eset modulkapcsolatai **
##### **Szolgáltatások leírásának elérhetősége:** GVK_webalkalmazás_szolgáltatáso k . do c x


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 5/48|

##### **1.2. A használati eset célja, feladatai **

A használati eset célja a GVK alkalmazásban valamely elemhez rögzített bejegyzés(ek)

kezelése.

Feladata, hogy lehetőséget biztosítson

    - a létrehozott bejegyzések lekérdezésére és exportálására,

    - a bejegyzések listájához kapcsolódó felhasználói beállítások elmentésére,

    - új bejegyzés létrehozásához, valamint létező bejegyzés megtekintéséhez,

szerkesztéséhez kapcsolódó funkciók kezelésére és

    - az állandó, valamint feliratkozott értesítési felhasználók alapadatainak

kezelésének elindítására.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 6/48|

#### **2. A használati eset ablakai ** **2.1. Ablakok közötti kapcsolat, navigálás **


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 7/48|

##### 2.2. H01_01 – HUBA – Bejegyzések [ #89125]

**2.2.1.** **Ablak/lap feladatai**

A MÁV Zrt. vasúti pályahálózatán keletkezett üzemzavarok és nem tervezett
korlátozások adatait tartalmazó bejegyzésekkel kapcsolatban az alábbi funkciók

biztosítása:

     - létező bejegyzések lekérdezése grid- (keresés, oszlopmegjelenítés beállítása,

oszlopsorrend mentése, grid manuális és ütemezett frissítése, lekérdezés
eredményének Excel-be exportálása) [#92180] és kártyanézetben,

     - új bejegyzés rögzítésének, valamint létező bejegyzés szerkesztési, ill.

megtekintési lehetőségének indítása,

     - értesítési beállítások megnyitása.
**2.2.2.** **Ablak/lap megjelenése**

Grid-es nézet: [#96127]

#92180, #96127 Kártyanézet:


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 8/48|


**2.2.3.** **Ablak/lap működése**

Az ablak az „ **A01 - GVK - Térkép** ” felületen található (HUBA bejegyzések)
nyomógomb kezelését követően nyílik meg új böngésző lapon, [#92180] alapértelmezetten
grid nézetben [#92180 vége] . Az ablak azon GVK profil azonosítójú felhasználó számára nyílik
meg, akihez az **OP_H01_01_Bejegyzesek** operandus hozzá van rendelve.

A rendszer a **H01_01** ablakot maximum egyszer nyitja meg új böngésző lapon.
Amennyiben az „ **A01 - GVK - Térkép** ” ablakról többször próbálja meg a GVK profil
azonosítójú felhasználó megnyitni, a korábban megnyitott **H01_01** ablak frissül az
alapértelmezett módon.

Az „ **A01 - GVK - Térkép** ” ablak bezárása esetén automatikusan bezáródik a H01_01

ablak is.

**Az ablak felépítése**

    - Az ablak kitölti a teljes képernyőt.

    - *Fejléc:*

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet használatakor
a fejléc háttérszíne középszürke (7F7F7F).

Üzemi (PROD)

Felhasználói teszt (QA)

Belső teszt (TEST)


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 9/48|


Fejlesztői (DEV)

`o` Középen az ablak azonosítóját és megnevezését: „ **H01_01 - HUBA -**

**Bejegyzések** ”

`o` Jobbszélen:

          - Rendszer neve és logója, valamint a rendszer neve alatt a

frontend verziószáma jelenik meg.

          - A logó előtt a GVK környezet neve:

              - üzemi (PROD): Nem jelenik meg a kliensen.

              - felhasználói teszt (QA): „ **QA** ”

              - teszt (TEST): „ **TEST** ”

              - fejlesztői (DEV): „ **DEV** ”

          - GVK profil név:

A GVK logó és környezet neve előtt GVK-ba történt
bejelentkezéskor érvényes GVK profil név megjelenítésére
szolgál.

          - Adatfrissítő:

A GVK profil név előtt a következő ütemezett adatlekérésig
hátralévő időtartamot jelző folyamatjelző, mely a hátralévő időt
másodpercekben mutatja.

  - *Felső eszközsor (Toolbar):*

Itt jelenik meg az összes, a táblázathoz kapcsolódó nyomógomb. Az adott funkció
leírása tooltip-ben jelenik meg.

`o` Keresés:

Rákattintva balról beúszó panelben megnyílik a **„** **H01_02** **– HUBA –**

**Bejegyzések lekérdezése”** ablak. A (Keresés) nyomógomb csak azon
GVK profil azonosítójú felhasználó számára aktív, megnyomható, akihez az
**OP_H01_02_BejegyzesekKeres** operandus hozzá van rendelve. Operandus
hiánya esetén a nyomógomb disabled állapotú.

`o` Keresés törlése:

Az ikon narancssárga színnel jelenik, amennyiben van megadott (aktív)
keresési feltétel az **„** **H01_02** **– HUBA – Bejegyzések lekérdezése”** ablakban,
fehérrel, ha nincs.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 10/48|


Rákattintva egyszerre törölhetők az „ **H01_02** **– HUBA – Bejegyzések**

**lekérdezése** ” ablakban beállított feltételek. A (Keresés törlése)
nyomógomb csak azon GVK profil azonosítójú felhasználó számára aktív,
megnyomható, akihez az **OP_H01_02_BejegyzesekKeres** operandus hozzá
van rendelve. Operandus hiánya esetén a nyomógomb disabled állapotú.

`o` Beállítások:

Rákattintva balról beúszó panelben megnyílik a „ **H01_03** **– HUBA –**

**Bejegyzések oszlopmegjelenítése** ” ablak. A (Beállítások) nyomógomb
csak azon GVK profil azonosítójú felhasználó számára aktív, megnyomható,
akihez az **OP_H01_03_BejegyzesekOszlopokMegjelenitMent** operandus
hozzá van rendelve. Operandus hiánya esetén a nyomógomb disabled
állapotú.

Kártyanézetben (dataview) inaktív, nem kezelhető.

`o` Excel-export:

Rákattintva kezdeményezhető az összes találat összes oszloppal letöltése
Excel-be a keresési feltételeknek megfelelően.

Kártyanézetben (dataview) inaktív, nem kezelhető.

`o` Összes szűrő törlése:

Rákattintva kezdeményezhető a táblázat oszlopaira beállított szűrési

feltételek törlése.

Kártyanézetben (dataview) inaktív, nem kezelhető.

`o` Oszlopsorrend mentése:

Rákattintva kezdeményezhető a táblázat oszlop sorrendjének mentése a
GVK profil azonosítójú felhasználóhoz.

Kártyanézetben (dataview) inaktív, nem kezelhető.

`o` Frissítés:

Rákattintva kezdeményezhető a táblázat adatainak frissítése a keresési
feltételek beállításainak megfelelően.

`o` Kapcsolók és számláló:

*Kapcsoló* : Az alábbi kétállású kapcsolók ki-bekapcsolhatók. Bekapcsolt
állapotban a kapcsoló háttérszíne sötétebb szürke, kikapcsolt állapotban.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 11/48|


világosszürke. [#99401] Az egeret a kapcsolóra húzva tooltip jelenik meg. [#99401 ]

vége

*Számláló* : A kapcsoló jobb felső sarkában a kapcsoló feltételeinek megfelelő
és a GVK profilú felhasználó számára a grid-ben látható bejegyzések

darabszámát mutató számláló található. A számlálóban a szám max. 3

karakterig jelenik meg, efelett a szám után ’+’ jel jelenik meg (’999+’). A
számláló szélessége a karakterszám növekedésével együtt bővül. A
számláló háttérszíne kék, a számlálóban a szám fehér betűszínnel jelenik

meg.

           - Besorolásra váró:

Alapértelmezetten kikapcsolt állapotú. Bekapcsolt állapotban az
’Új’ állapotú bejegyzések jelennek meg.

           - Aktuális napi:

Alapértelmezetten bekapcsolt állapotú. Bekapcsolt állapotban a
(rendszeridő – ’Aktuális napi bejegyzések intervalluma’
rendszerparaméter időintervallumon belüli befejezési időpontú
’Befejezett’ állapotú) ÉS (korlátlan időintervallumon belül
’Minősített’ állapotú bejegyzések) jelennek meg.

           - Folyamatban lévő:

Alapértelmezetten kikapcsolt állapotú. Bekapcsolt állapotban a
rendszeridő – ’Folyamatban lévő bejegyzések intervalluma’
rendszerparaméter időintervallumon belüli befejezési időpontú
#101513 vagy befejezési idő nélküli #101513vége, #97263 ’Új, #97263 vége

’Minősített’ és [#101513] ’Befejezett’ [#101513 vége] állapotú bejegyzések
jelennek meg.

           - #92180 Feladatkosár:

Alapértelmezetten kikapcsolt állapotú. Bekapcsolt állapotban a
„ **H08_01 – HUBA – HUBA bejegyzés részletek** ” ablakban
feladatkosárba helyezett bejegyzések jelennek meg. [#92180 vége ]

           - #96127 Kifogásolt:

`o` #92180 Nézetváltás:,



-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 12/48|


Rákattintva megváltozik a megjelenítés módja. Grid nézet és a Kártyás
(dataview) nézet között válthat vele a felhasználó.

Kártyás nézetre váltva inaktívvá válnak a kártyás nézetben nem releváns
toolbar ikonok (Oszlopbeállítások, Excel export, Szűrők törlése,
Oszlopsorrend mentése), továbbá a grid helyett megjelenik a kártya nézet.
A választó ikon grid-re vált.

Grid nézetre váltva aktívvá válnak a kártyás nézetben inaktív ikonok
(Oszlopbeállítások, Excel export, Szűrők törlése, Oszlopsorrend mentése),
továbbá kártya nézet helyett megjelenik a grid. A választó ikon kártyá-ra

vált.

  - *Grid nézet:*

`o` *Lista:*

        - Táblázatban jelenik meg az összes kért információ. [#91585] Asorokban az

adatok balra rendezve jelennek meg. [#91585 vége]

        - Fejléc:

A „ **H01_03** **- HUBA – Bejegyzések oszlopmegjelenítése** ” ablakban
kiválasztott oszlopok adják a táblázat oszlopcímeit.

Amennyiben az oszlopcím nem fér ki, az **Oszlopcím…** jelenik meg. Tooltipben olvasható a teljes oszlopcím.

*Sorbarendezés* : Az oszlopcím jobb oldalán található (Sorbarendezés)
ikonra kattintva rendezhető a táblázat megjelenített tartalma. Az
alapértelmezett rendezés a HUBA azonosító szerint csökkenő (a
legfrissebb jelenik meg legelöl).

Az oszlopcím mellett egy felfelé (növekvő) vagy lefelé (csökkenő) mutató
nyíl jelzi, hogy mi szerint van rendezve. Egyszerre egy oszlop szerint

rendezhető a táblázat.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 13/48|


Az oszlopok sorrendje változtatható - drag&drop-pal átrendezhetők

tetszés szerint. Az oszlopok sorrendje a (Oszlopsorrend mentése)

ikonra kattintva menthető el.

*Oszlopszűrés* : Az oszlopcím bal oldalán található (Oszlopszűrés)
ikonra kattintva az alábbi pop-up ablak segítségével a megjelenített
találati lista adott oszlopa szerinti további szűrésre van lehetőség:

Az alábbi szűrési feltételek alkalmazhatók: Tartalmaz (ez az
alapértelmezett) / Egyezik / Kisebb / Kisebb, egyenlő / Nagyobb /
Nagyobb, egyenlő / Üres / Nem üres. Egymást követően több oszlopon is
beállítható oszlopszűrés.

A grid ütemezett frissítése során a rendszer megőrzi az oszlopszűrés, ill.
sorbarendezés állapotát.

        - Adatok:

Ablakbetöltéskor a grid-ben megjelennek az „ **S_45 – Bejegyzések felület**
**lekérdezése** ” szolgáltatástól visszakapott adatok az ott definiált feltételek
alapján.

        - Alsó vízszintes gördítősáv (horizontális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt oszlopa,
akkor az alsó vízszintes gördítősáv segítségével lehet megtekinteni a
táblázat többi oszlopát.

        - Oldalsó függőleges gördítősáv (vertikális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt sora,
akkor az oldalsó (jobb oldalon) függőleges gördítősáv segítségével lehet
megtekinteni a táblázat többi sorát.

`o` *Lábléc:*

        - Oldallapozó: A lekérdezett adatok a grid alatti lapozó funkcióval

jeleníthetők meg (legelső/legutolsó, valamint előző/következő
oldalra ugrás). Megjelenik a megjelenített/összes oldal száma. Az egy


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 14/48|


oldalon megjelenített rekordok száma listából választható [#91585]
(25/50/100), az alapértelmezett érték 100 rekord [#91585 vége]

  - #92180 *Kártyanézet:*

`o` *Lista:*

        - Kártyákon jelenik meg az összes kért információ.

A kártyák adattartalma, elrendezése nem módosítható.

A kártyák háttérszíne a bejegyzés állapotát jelzi az alábbiak szerint:

          - Új: fehér (#FFFFFF)

          - Minősített: halványkék (#D7EBFF)

          - Befejezett: halványzöld (#D7FFD7)

          - Lezárt: halványpiros (#FFD7D7)

          - Elvetett: szürke (#D7D7D7)

*Kártyák adattartalma:*

*#96127*


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 15/48|


*Jobb belső sarosban a Vasút ikon* *:* Azt jelöli, hogy a bejegyzéshez lett e
kiválasztva a H08_01-es ablakon Vasútvállalat. Csak akkor látszódik, ha lett
kiválasztva, és akkor tooltip-ben fel van sorolva a kiválasztott vasútvállalatok.
(Vasúttársaság: XY Kft, K Kft) [#96127 vége]

Felelős szakágak esetén a maximálisan megjeleníthető szakágak száma
nyolc darab, ezért a szakágak számától függően az alábbiak szerint kell
eljárni:

          - 8-nál kevesebb vagy 8 szakág esetén: szakágakhoz tartozó jelölő

ikonok megjelenítésa.

          - 8-nál több szakág esetén: az első 7 szakág megjelenítése, majd „…”

karakterekkel jelölve, hogy több is van.

Az egeret a szakág jelölő ikonja fölé húzva a szakág neve megjelenik
tooltipben.

*Sorbarendezés* : alapértelmezetten Bejegyzés azonosító szerinti
sorrendben kerülnek megjelenítésre a kártyák, a sorren nem

változtatható.

*Szűréshez* a Kapcsolók és a Keresés funkció használható, a kártya nézet
nem tartalmaz további szűrési lehetőséget.

        - Adatok:

Ablakbetöltéskor a nézetben megjelennek az „ **S_45 – Bejegyzések felület**
**lekérdezése** ” szolgáltatástól visszakapott adatok az ott definiált feltételek
alapján.

        - Alsó vízszintes gördítősáv (horizontális scrollbar):

Ha nem fér ki az oldalra az összes kártya, akkor az alsó vízszintes
gördítősáv segítségével lehet megtekinteni a nézet többi kártyáját.

        - Oldalsó függőleges gördítősáv (vertikális scrollbar):

Ha nem fér ki az oldalra az összes kártya, akkor az oldalsó (jobb
oldalon) függőleges gördítősáv segítségével lehet megtekinteni a nézet
többi kártyáját.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 16/48|


`o` *Lábléc:*

        - Oldallapozó: A lekérdezett adatok a grid alatti lapozó funkcióval

jeleníthetők meg (legelső/legutolsó, valamint előző/következő
oldalra ugrás). Megjelenik a megjelenített/összes oldal száma. Az egy
oldalon megjelenített rekordok száma listából választható [#91585]
(25/50/100), az alapértelmezett érték 100 rekord [#91585 vége]

  - *Nyomógombok*

`o` #89145 nyomógomb: Az < **Értesítési beállítások**      nyomógomb alapértelmezetten csak azon GVK profil azonosítójú
felhasználó számára kezelhető, akihez az
**OP_H06_01_ErtesitesfogadokBeallitasokMegjelenitLista** operandus
hozzá van rendelve. Az operandus hiánya esetén a nyomógomb disabled
állapotú. [#89145 vége]

`o` #93041 nyomógomb: Az < **Értesítések**      nyomógomb alapértelmezetten nem kezelhető (nem megnyomható).
Abban az esetben válik kezelhetővé (megnyomhatóvá), ha a (grid-en van
kijelölve egy sor vagy a kártyanézetben kártya) és a GVK profil
azonosítójú felhasználóhoz hozzá van rendelve az
**OP_H06_06_ErtesitesMegtekint** operandus. A grid-en/ [#92180]
kártyanézetben kijelölt bejegyzés vagy az operandus hiánya esetén a
nyomógomb disabled állapotú. [#93041 vége]

`o` #89126 nyomógomb: Az < **Új**      - nyomógomb
alapértelmezetten kezelhető (megnyomható) abban az esetben, ha a
(grid-en nincs kijelölve sor [#92180] VAGY a kártyanézetben kártya [#92180 vége] )
és a GVK profil azonosítójú felhasználóhoz hozzá van rendelve az
**OP_H04_01_KodEsHelySzerkeszt** operandus. A operandus hiánya
esetén a nyomógomb disabled állapotú. [#89126 vége]

`o` Bejegyzés megnyitása:

          - #89132 nyomógomb: A < **Megnyitás**           nyomógomb alapértelmezetten nem kezelhető (nem
megnyomható). Abban az esetben válik kezelhetővé
(megnyomhatóvá), ha a (grid-en van kijelölve egy sor [#92180] VAGY
a kártyanézetben kártya [ #92180 vége] ) és a GVK profil azonosítójú
felhasználóhoz hozzá van rendelve az **OP_H02_01_BK**
operandus. [#89132 vége]

          - #96921 A grid-en egy sorra vagy a kártyanézetben egy kártyára
történő dupla kattintás abban az esetben lehetséges, ha a GVK


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 17/48|


profil azonosítójú felhasználóhoz hozzá van rendelve az
**OP_H02_01_BK** operandus. [#96921 vége]

#89132 A grid-en/ #92180 kártyanézetben kijelölt bejegyzés vagy az
operandus hiánya esetén a nyomógomb disabled állapotú. [#89132 vége]

**Ablakbetöltés**

Az ablak betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens meghívja
az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő
paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H01_01’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens az alábbi
bemenő paraméterekkel meghívja az **„S_15 - Beállítások lekérdezése** ” szolgáltatást:

    - Beállítás azonosító: ’H01_03’

A GVK profil azonosítót a webAPI réteg adja át.

A kliens az alábbi, szolgáltatástól visszakapott értékek alapján megjeleníti az
oszlopokat:

    - Beállítás neve: az oszlop neve

    - Megjelenítési jelző: 0 - nem jelenik meg az oszlop, 1 - megjelenik az oszlop

    - Sorszám: az oszlop sorszáma a griden

Ha nincs ilyen eltárolt adat (S_15 szolgáltatás nem ad vissza adatot), akkor
alapértelmezetten minden oszlop megjelenítendőnek tekintendő a grid-en.

Az ablak megnyitásakor [#92180] az alapértelmezett nézet a grid-es nézet [#92180 vége], az
’Aktuális napi’ kapcsoló bekapcsolt állapotú.

Az ablak betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens meghívja
az „ **S_45 – Bejegyzések felület lekérdezése** ” szolgáltatást az alábbi bemenő
paraméterekkel:

#89139

      - **Kezdés ideje** :

( **Kezdés ideje (-tól)** (’startDateFrom’)

`o` Paraméter (dátum és időpont): Kezdés ideje (-ig) – 60 nap.
**Kezdés ideje (-ig)** (’startDateTo’)

`o` Paraméter (dátum és időpont): [#98306] NULL)

      - Minden további bemenő paraméter értéke NULL.

A GVK profil azonosítót a webAPI réteg adja át. [#89139 vége]


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 18/48|


A kliens a szolgáltatástól visszakapott értékek közül az Aktuális napi, kezdési időponttal,
HUBA felelőssel, ill. HUBA jelleggel rendelkező [#92557] és nem rendelkező [#92557 vége]
bejegyzéseket az alábbiak szerint jeleníti meg a grid-ben:

    - **HUBA bejegyzés ID** (’hubaId’): A kliensen nem jelenik meg a grid-en.

    - #91585 **HUBA azonosító** (’hubaAzonosito’)

    - **HUBA verzió** (’version’): A kliensen nem jelenik meg a grid-en.

    - **Kezdés ideje** (’startDate’)

    - **Befejezés ideje** (’endDate’)

    - **Főkód** (’mainCode’)

    - **Szolgálati hely** (’szolgHely’)

    - **Terület** (’terulet’)

    - **HUBA tárgya** (’subject’)

~~•~~ #89383 ~~**HUBA**~~ ~~**betűkód**~~ ~~(’code’)~~ #89383

    - **HUBA felelőse** (’owner’)

    - **HUBA állapota** (’state’)

    - **HUBA jellege** (’category’)

    - **Bejelentő** (’reportingUser’)

    - **Értesítési szint** (’notificationLevel’)

    - **Értesítés kiadva** (’notificationCreated’)

    - **HUBA kora** (’age’): Amennyiben ismert a kezdés időpontja, az eljárás

DD:HH24:MI formátumban adja vissza; egyébként NULL értéket (kliensen üres
marad a mező).

    - #94783 **Utolsó módosítás ideje** (’lastModifyDate’)

      - #96127 **Vasútvállalat** (’vasutvallalat’)

    - **Kapcsoló** (’switch’): A kliensen nem jelenik meg a grid-en.

`o` **Kapcsoló neve** (’switchName’): Lehetséges értékei: (Ezek jelennek meg.)

          - ’Besorolásra váró’

          - ’Aktuális napi’

          - ’Folyamatban lévő’

          - #92180 ’Feladatkosár’

`o` **Kapcsoló állapota** (’switchState’) (true/false)

Amennyiben a szolgáltatás nem ad vissza egy rekordot sem, az alábbi üzenetet jeleníti
meg a rendszer a grid felett középen:

**Ablak ütemezett frissítése**


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 19/48|


Az ütemezett frissítés kezdetekor az alapértelmezettől eltérő beállítások (kapcsolók,
„ **H01_02 – HUBA – Bejegyzések keresése** ” ablakban beállított kereső paraméterek,
oszlopszűrés, sorbarendezés) nem törlődnek.

A kliens az „ **A01 – GVK – Térkép** ” ablak betöltésekor meghívott, „ **S_23 –**
**Rendszerparaméter lekérdezése** ” szolgáltatástól visszakapott Bejegyzés lista
ütemezett frissítése rendszerparaméterben beállított időtartam szerint
(alapértelmezetten 30 másodpercenként) az alábbiak szerint meghívja az „ **S_45 –**
**Bejegyzések felület lekérdezése** ” szolgáltatást:

Amennyiben a „ **H01_02 – HUBA – Bejegyzések keresése** ” ablakban van kereső
paraméter beállítva, a kliens a H01_02 ablakban beállított kereső paramétereket
adja át bemenő paraméterként ( [#89139 ] ld. H01_02 leírásában) a back-end részére.

Amennyiben a „ **H01_02 – HUBA – Bejegyzések keresése** ” ablakban nincs kereső
paraméter beállítva, a kliens az alábbi bemenő paramétereket adja át a
szolgáltatásnak és a visszakapott adatok közül a bekapcsolt kapcsolónak megfelelő
bejegyzéseket jeleníti meg:

#89139

      - **Kezdés ideje:**

( **Kezdés ideje (-tól)** (’startDateFrom’)

`o` Paraméter (dátum és időpont): Kezdés ideje (-ig) – 60 nap.
**Kezdés ideje (-ig)** (’startDateTo’)

`o` Paraméter (dátum és időpont): [#98306] NULL)

      - Minden további bemenő paraméter értéke NULL.

A GVK profil azonosítót a webAPI réteg adja át.

A kliens a szolgáltatástól visszakapott értékek közül az Aktuális napi, kezdési
időponttal, HUBA felelőssel, ill. HUBA jelleggel rendelkező [#92557] és nem
rendelkező [#92557 vége] bejegyzéseket a H01_01 ablakbetöltésnél leírtak szerint
jeleníti meg.

Amennyiben a szolgáltatás nem ad vissza egy rekordot sem, az alábbi üzenetet
jeleníti meg a rendszer a grid/ [#92180] kártyanézet [#92180 vége] felett középen:

#89139 vége

Amennyiben a szolgáltatástól visszakapott HUBA verziószám (’hubaVersion’) nagyobb,
mint a frissítés előtt, a kliens az érintett bejegyzés adatait vastagított betűtípussal
jeleníti meg a grid-en.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 20/48|


Az ablak betöltésekor és frissítésekor az adatok megjelenítéséig „loading” ikon jelzi a
folyamatban lévő lekérdezést a szürke hátterű nézet felett középen:

**Grid-es nézet és toolbar működése**

A (Keresés) ikonra kattintva a „ **H01_02** **– HUBA – Bejegyzések lekérdezése** ”
ablakban adhatja meg a keresési feltételeket azon GVK profil azonosítójú felhasználó,
akihez **OP_H01_02_BejegyzesekKeres** operandus hozzá van rendelve. Ekkor a
háttérben a grid halványszürke színűre vált.

A grid adatokkal történő frissítése az „ **H01_02** **– HUBA – Bejegyzések lekérdezése** ”
ablakban a < **Keresés**   - nyomógombra történő kattintást követően történik az „ **S_45 –**
**Bejegyzés felület lekérdezése** ” szolgáltatás által visszaadott értékek alapján. A H01_02
ablakban beállított kereső paraméterek felülírják a toolbar-ban beállított kapcsolók
beállításait. A kliens csak azokat az oszlopokat jeleníti meg, amelyeket az **„S_15 -**
**Beállítások lekérdezése** ” szolgáltatás visszatérő értékként visszaadott.

A toolbar-ban található kapcsolók számlálóját a grid-ben a keresési paraméterek
alapján megjelenített adatok nem befolyásolják.

A kliens a (Keresés törlése) ikonra történő kattintáskor kiüríti az „ **H01_02**
**– HUBA – Bejegyzések lekérdezése** ” ablakban beállított paramétereket és visszaállítja
a toolbar-ban a kapcsolókat alapértelmezett állapotba (’Aktuális napi’ kapcsolót
bekapcsolja).

#97253 Amennyiben a „ **H01_02** **– HUBA – Bejegyzések lekérdezése** ” ablakban van
beállítva kereső paraméter és emellett a felhasználó kezeli (bekapcsolja) valamely
kapcsolót a toolbar-ban, a kliens kiüríti az **H01_02** ablakban beállított paramétereket.
#97253 vége

A kliens mind a kereső paraméterek törlésekor, [#97253] mind a **H01_02** ablakban
beállított kereső paraméter melletti valamely kapcsoló visszakapcsolásakor [#97253 vége]
az alábbi bemenő paraméterekkel meghívja az „ **S_45 – Bejegyzés felület lekérdezése** ”
szolgáltatást:

#89139

      - **Kezdés ideje:**

( **Kezdés ideje (-tól)** (’startDateFrom’)

`o` Paraméter (dátum és időpont): Kezdés ideje (-ig) – 60 nap.
**Kezdés ideje (-ig)** (’startDateTo’)

`o` Paraméter (dátum és időpont): rendszeridő; óó:59 másodperc)


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 21/48|



      - Minden további bemenő paraméter értéke NULL.

A GVK profil azonosítót a webAPI réteg adja át.

A kliens a szolgáltatástól visszakapott értékek közül az Aktuális napi, kezdési
időponttal, HUBA felelőssel, ill. HUBA jelleggel rendelkező [#92557] és nem
rendelkező [#92557 vége] bejegyzéseket a H01_01 ablakbetöltésnél leírtak szerint
jeleníti meg a grid-en. [#89139 vége]
Amennyiben a szolgáltatástól visszakapott HUBA verziószám (’hubaVersion’) nagyobb,
mint a frissítés előtt, a kliens az érintett bejegyzés adatait vastagított betűtípussal
jeleníti meg a grid-en.

A (Beállítások) ikonra kattintva a „ **H01_03** **– HUBA – Bejegyzések**
**oszlopmegjelenítése** ” ablakban a griden megjelenítendő oszlopok megjelenítése
állítható be. A nyomógomb csak azon GVK profil azonosítójú felhasználó számára aktív,
megnyomható, akihez az **OP_H01_03_BejegyzesekOszlopokMegjelenitMent**
operandus hozzá van rendelve. Ekkor a háttérben a grid halványszürke színűre vált.

Az (Excel-export) ikonra kattintva a back-end a grid-en az összes lapon
aktuálisan megjelenő adatot kiexportálja Excel fájlba (.xlsx kiterjesztéssel).

Fájlnév: *HUBA bejegyzések_[yyyymmdd].xlsx*

A (Összes szűrő törlése) ikonra kattintva a kliens törli a GVK profil azonosítójú
felhasználó által az oszlopokon alkalmazott beállításokat.

A griden drag&drop módszerrel módosítható a megjelenített oszlopok sorrendje és a

(Mentés) ikonra kattintva menthető el. Az ikonra kattintva a kliens az alábbi
bemenő paraméterekkel meghívja az „ **S_16 –Beállítások mentése”** szolgáltatást:

    - GVK profil azonosító

    - beállítás azonosítója: ’H01_03’

    - beállítás neve: oszlop neve

    - oszlop sorszáma

A (Frissítés) ikonra kattintva manuálisan frissíthetőek a gridben megjelenített

adatok. A kliens a (Frissítés) ikonra történő kattintáskor az alábbi bemenő
paraméterekkel meghívja az „ **S_45 – Bejegyzés felület lekérdezése** ” szolgáltatást:

Amennyiben a „ **H01_02 – HUBA – Bejegyzések keresése** ” ablakban van kereső
paraméter beállítva, a kliens a H01_02 ablakban beállított kereső paramétereket
adja át bemenő paraméterként ( [#89139 ] ld. H01_02 leírásában) a back-end részére.

Amennyiben a „ **H01_02 – HUBA – Bejegyzések keresése** ” ablakban nincs kereső
paraméter beállítva, a kliens az alábbi bemenő paramétereket adja át a
szolgáltatásnak és a visszakapott adatok közül a bekapcsolt kapcsolónak megfelelő
bejegyzéseket jeleníti meg jeleníti meg a grid-en:


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 22/48|


#89139

      - **Kezdés ideje:**

( **Kezdés ideje (-tól)** (’startDateFrom’)

`o` Paraméter (dátum és időpont): Kezdés ideje (-ig) – 60 nap.
**Kezdés ideje (-ig)** (’startDateTo’)

`o` Paraméter (dátum és időpont): rendszeridő; óó:59 másodperc)

      - Minden további bemenő paraméter értéke NULL.

A GVK profil azonosítót a webAPI réteg adja át.

A kliens a szolgáltatástól visszakapott értékek a H01_01 ablakbetöltésnél leírtak
szerint jeleníti meg a grid-en. [#89139 vége]
Amennyiben a szolgáltatástól visszakapott HUBA verziószám (’hubaVersion’) nagyobb,
mint a frissítés előtt, a kliens az érintett bejegyzés adatait vastagított betűtípussal
jeleníti meg a grid-en.

#92180 **Kártyanézet működése**

A (Keresés) ikonra kattintva a „ **H01_02** **– HUBA – Bejegyzések lekérdezése** ”
ablakban adhatja meg a keresési feltételeket azon GVK profil azonosítójú felhasználó,
akihez **OP_H01_02_BejegyzesekKeres** operandus hozzá van rendelve. Ekkor a
háttérben a kártya nézet halványszürke színűre vált.

A nézet adatokkal történő frissítése az „ **H01_02** **– HUBA – Bejegyzések lekérdezése** ”
ablakban a < **Keresés**   - nyomógombra történő kattintást követően történik az „ **S_45 –**
**Bejegyzés felület lekérdezése** ” szolgáltatás által visszaadott értékek alapján. A H01_02
ablakban beállított kereső paraméterek felülírják a toolbar-ban beállított kapcsolók
beállításait. A kliens minden esetben a kártya teljes adattartalmát megjeleníti.

A toolbar-ban található kapcsolók számlálóját a grid-ben a keresési paraméterek
alapján megjelenített adatok nem befolyásolják.

A kliens a (Keresés törlése) ikonra történő kattintáskor kiüríti az „ **H01_02**
**– HUBA – Bejegyzések lekérdezése** ” ablakban beállított paramétereket és visszaállítja
a toolbar-ban a kapcsolókat alapértelmezett állapotba (’Aktuális napi’ kapcsolót
bekapcsolja). A kliens az alábbi bemenő paraméterekkel meghívja az „ **S_45 – Bejegyzés**
**felület lekérdezése** ” szolgáltatást:

      - **Kezdés ideje:**

( **Kezdés ideje (-tól)** (’startDateFrom’)

`o` Paraméter (dátum és időpont): Kezdés ideje (-ig) – 60 nap.
**Kezdés ideje (-ig)** (’startDateTo’)

`o` Paraméter (dátum és időpont): [#98306] NULL)

      - Minden további bemenő paraméter értéke NULL.

A GVK profil azonosítót a webAPI réteg adja át.

A kliens a szolgáltatástól visszakapott értékek közül az Aktuális napi, kezdési
időponttal, HUBA felelőssel, ill. HUBA jelleggel rendelkező [#92557] és nem
rendelkező bejegyzéseket a H01_01 ablakbetöltésnél leírtak szerint jeleníti meg

a nézetben.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 23/48|


Amennyiben a szolgáltatástól visszakapott HUBA verziószám (’hubaVersion’) nagyobb,
mint a frissítés előtt, a kliens az érintett kártyát eltérő módon jeleníti meg az alábbiak
szerint (vastag piros keret, felkiáltójel a jobb felső sarokban):

A (Beállítások) ikon inaktív, nem kezelhető a kártya nézetben.

Az (Excel-export) ikon inaktív, nem kezelhető a kártya nézetben.

A (Összes szűrő törlése) ikon inaktív, nem kezelhető a kártya nézetben..

A (Mentés) ikon inaktív, nem kezelhető a kártya nézetben.

A (Frissítés) ikonra kattintva manuálisan frissíthetőek a gridben megjelenített

adatok. A kliens a (Frissítés) ikonra történő kattintáskor az alábbi bemenő
paraméterekkel meghívja az „ **S_45 – Bejegyzés felület lekérdezése** ” szolgáltatást:

Amennyiben a „ **H01_02 – HUBA – Bejegyzések keresése** ” ablakban van kereső
paraméter beállítva, a kliens a H01_02 ablakban beállított kereső paramétereket
adja át bemenő paraméterként (ld. H01_02 leírásában) a back-end részére.

Amennyiben a „ **H01_02 – HUBA – Bejegyzések keresése** ” ablakban nincs kereső
paraméter beállítva, a kliens az alábbi bemenő paramétereket adja át a
szolgáltatásnak és a visszakapott adatok közül a bekapcsolt kapcsolónak megfelelő
bejegyzéseket jeleníti meg jeleníti meg a grid-en:

#89139

      - **Kezdés ideje:**

( **Kezdés ideje (-tól)** (’startDateFrom’)

`o` Paraméter (dátum és időpont): Kezdés ideje (-ig) – 60 nap.
**Kezdés ideje (-ig)** (’startDateTo’)

`o` Paraméter (dátum és időpont): rendszeridő; óó:59 másodperc)

      - Minden további bemenő paraméter értéke NULL.

A GVK profil azonosítót a webAPI réteg adja át.

A kliens a szolgáltatástól visszakapott értékeket a H01_01 ablakbetöltésnél
leírtak szerint jeleníti meg a grid-en.
Amennyiben a szolgáltatástól visszakapott HUBA verziószám (’hubaVersion’) nagyobb,
mint a frissítés előtt, a kliens az érintett bejegyzés adatait vastagított betűtípussal
jeleníti meg a grid-en.

**Nyomógombok kezelése**


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 24/48|


#89145 nyomógomb kezelése: Az < **Értesítési beállítások**   nyomógomb kezelésekor új böngésző fülön megnyílik a „ **H06_01 – HUBA – Bejegyzés**
**kezelése** ” ablak az alapértelmezett „ **H06_01A – Értesítésfogadók beállításai** ” lapfüllel.
Egy GVK profillal egyszerre max. egy H06_01 ablak megnyitása engedélyezett. [#89145 ]

#93041 nyomógomb kezelése: Az < **Értesítések**    - nyomógomb
kezelésekor új böngésző fülön megnyílik a „ **H06_06 – HUBA – Értesítések kezelése** ”
ablak az alapértelmezett „ **H06_06A – Értesítések** ” lapfüllel. Egy GVK profillal egyszerre
max. egy H06_06 ablak megnyitása engedélyezett. [#93041 vége]

#93041 Már megnyitott H06_06 ablak esetén az < **Értesítések**   - nyomógomb újbóli
kezelése esetén (újabb H06_06 ablak megnyitása vagy a már megnyitott H06_06 ablak
frissítése nélkül) a rendszer az alábbi popup üzenetet jeleníti meg:

[#] [93041 vége ]

#89126 nyomógomb kezelése: Az < **Új**   - nyomógomb kezelésekor új
böngésző fülön üres mezőértékekkel megnyílik a „ **H04_01 – HUBA – Kód és hely** ” ablak,
alapértelmezetten az „Topográfiai elem” lapfüllel. Egy GVK profillal egyszerre max. egy
H04_01 ablak megnyitása engedélyezett.

[#92180vége ]

#89126

#89132 nyomógomb és [#96921] grid-en/kártyanézetben dupla kattintás [#96921 ]

vége kezelése: A < **Megnyitás**    - nyomógomb #96921 vagy a grid-en egy sorra /
kártyanézetben kártyára dupla kattintás [#96921 vége] kezelésekor új böngésző fülön
megnyílik a „ **H02_01 – HUBA – Bejegyzés kezelése** ” ablak a grid-en kijelölt bejegyzés
egyedi azonosítójához tartozó adatokkal. (A H02_01 ablak a GVK profilú felhasználó
jogosultsága alapján jeleníti meg a bejegyzés adatait az egyes csempéken.) Egy GVK
profillal egyszerre max. egy H02_01 ablak megnyitása engedélyezett.



-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 25/48|


A H02_01 ablak megnyitásakor a grid-en kijelölt bejegyzés visszavált a vastagított
betűtípusról normálra. [#89132 vége ]

**Ablak bezárása**

Az ablak bezárása a böngészőfülön lévő **<X>** nyomógombra kattintással lehetséges.

Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H01_01’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 26/48|

### **2.2.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **











|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|---|
|Fejléc||||||||
||Állapotjelző|-|progress_in dicator|||||
||GVK profil megnevezés|GVK felhasználó||||||
|Toolbar - Kapcsolók||||||||
||Besorolásra váró bejegyzések|#99401 Új állapotú bejegyzések|two-state- button + badge|||kikapcsolt||
||Aktuális napi bejegyzések|#99401 Minősített és 24 órán belül befejezett állapotú bejegyzések|two-state- button + badge|||bekapcsolt||
||Folyamatban lévő bejegyzések|#99401 1 órán belüli befejezési idejű Új és Minősített állapotú bejegyzések|two-state- button + badge|||kikapcsolt||
|#92180|Feladatkosár|#99401 Feladatkosárba helyezett bejegyzések|two-state- button + badge|||kikapcsolt||
|#96127|Kifogásolt bejegyzések|#99401 Vasútvállalat által kifogásolt bejegyzések||||||
|, #92180|Nézetváltás|-|custom button|||kártyanézetre váltás (grid nézet megjelenése mellett)||
|Grid-es nézet||||||||
||(szűrés: Tartalmaz)|Oszlopszűrés||||||
||(szűrés: combobox)||combobox|||||
||(rendezés)|Sorbarendezés||||||
||Horizontális scrollbar|-|scrollbar|||-||


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 27/48|





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|---|
||Oldallapozó|-|pagination|10/25/ 50||#91585 100||

### **Listadoboz oszlopai az alapértelmezett sorrendben **

|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Hossz|Maszk/Típus|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|
|HUBA azonosító|HUBA azonosító|HUBA azonosító|AN10||-||
|Kezdés ideje|Kezdés ideje|Kezdés ideje|DATE|YYYY.MM.DD HH24:MI|-||
|Befejezés ideje|Befejezés ideje|Befejezés ideje|DATE|YYYY.MM.DD HH24:MI|-||
|Főkód|Főkód|Főkód|AN3||-|GVK.K_KESES FOKOD|
|Szolgálati hely|Szolgálati hely|Szolgálati hely|AN200||-||
|Terület|Terület|Terület|AN50||-||
|Leírás|Leírás|Leírás|AN100||-||
|#89383 HUBA betűkód|HUBA betűkód|HUBA betűkód|AN50 #89383||-||
|HUBA felelőse|HUBA felelőse|HUBA felelőse|AN50||-|HUBA.K_SZA KAG|
|HUBA állapota|HUBA állapota|HUBA állapota|AN20||-|HUBA.K_BEJ EGYZES_ALL APOT|
|Utolsó állapotváltozás ideje|Utolsó állapotváltozás ideje|Utolsó állapotváltozás ideje|DATE|YYYY.MM.DD HH24:MI|-||
|HUBA jellege|HUBA jellege|HUBA jellege|AN20||-|HUBA.K_KAT EGORIA|
|Bejelentő|Bejelentő|Bejelentő|AN50||-||
|Értesítési szint|Értesítési szint|Értesítési szint|AN20||-|HUBA.K_ERT ESITES_SZINT|
|Értesítés kiadva|Értesítés kiadva|Értesítés kiadva|boolea n|Y/N|-||
|HUBA kora|HUBA kora|HUBA kora|DATE|DD:HH24:MI|-||


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 28/48|


**Nyomógombok, funkcionális ikonok**

















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/ nem nyomható meg]|Ikon neve (Material/ DHTMLX/ Awesome)|
|---|---|---|---|---|
||Keresés|Bejegyzés keresése|Megnyomható|search|
||Keresés törlése|Bejegyzés keresési feltételek törlése|Megnyomható|search_off|
||Beállítás|Bejegyzés beállítások|Megnyomható|settings|
||Excel-export|Adatok letöltése Excel-be|Megnyomható|dxi dxi-file-excel|
||Összes szűrő törlése|Bejegyzés oszlop szűrés törlése|Megnyomható|filter-clear|
||Oszlopsorrend mentése|Bejegyzés oszlopsorrend mentése|Megnyomható|dxi dxi-content- save|
||Frissítés|Bejegyzés adatok frissítése|Megnyomható|refresh|
||Váltás kártyanézetre|Váltás kártyanézetre|Megnyomható|mdi mdi-card- multiple-outline|
||Váltás grid nézetre|Váltás grid nézetre|Megnyomható|mdi mdi-table- large|
|#89145|Értesítési beállítások|-|Megnyomható|-|
|#93041|Értesítések|-|Nem nyomható meg|-|
|#89126|Új felvitel|-|Megnyomható|-|
|#89132|Megnyitás|-|Nem nyomható meg|-|


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 29/48|


**2.2.5.** **Hívott szolgáltatások**







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés|-|S_45 – Bejegyzések felület lekérdezése|
|Ablakbetöltés|-|S_15 – Beállítások lekérdezése|
|Ütemezett frissítés (30 sec)|-|S_45 – Bejegyzések felület lekérdezése|
||H01_02 – HUBA – Bejegyzések lekérdezése|-|
||-|S_45 – Bejegyzések felület lekérdezése|
||H01_03 – HUBA – Bejegyzések oszlopmegjelenítése|-|
||-|S_45 – Bejegyzések felület lekérdezése|
||-|S_16 – Beállítások mentése|
|#89126|H04_01 – HUBA – Kód és hely|-|
|#89132|H02_01 – HUBA – Bejegyzés kezelése|-|
|#89145|H06_01 – HUBA – Értesítési beállítások|-|
|#93041|H06_06 – HUBA – Értesítések kezelése|-|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.2.6.** **Rendszerüzenetek**






|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|Amennyiben az S_45 szolgáltatás nem ad vissza egy rekordot sem|„A felhasználónak nincs joga minden adathoz vagy nincs a megadott keresési paramétereknek megfelelő bejegyzés.”|Információs|
|#92180 Amennyiben az <Új> nyomógombot ismételten kezeli a felhasználó már megnyitott H04_01 ablak mellett|„Van már megnyitott H04_01 – HUBA – Kód és hely ablak. Kérjük kezelje először a megnyitott ablakot.”|Figyelmeztető|
|#93041 Amennyiben az <Értesítések> nyomógombot ismételten kezeli a felhasználó már megnyitott H06_06 ablak mellett|„Van már megnyitott H06_06 – HUBA – Értesítések ablak. Kérjük kezelje először a megnyitott ablakot.”|Figyelmeztető|
||||


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 30/48|


**2.2.7.** **Kódtáblák, választási listák**

Nincs.

**2.2.8.** **Rendszerparaméterek**

Nincs.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 31/48|


**2.3.1.** **Ablak/lap feladatai**

A „ **H01_01 – HUBA - Bejegyzések** ” felületen megjelenő bejegyzések szűrési/keresési
paramétereinek megadására szolgál.

**2.3.2.** **Ablak/lap megjelenése**



-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 32/48|


**2.3.3.** **Ablak/lap működése**

Az ablak a „ **H01_01** **– HUBA - Bejegyzések** ” felületen (Keresés) nyomógomb

kezelését követően nyílik meg. A (Keresés) nyomógomb csak azon GVK profil
azonosítójú felhasználó számára aktív, megnyomható, akihez az
**OP_H01_02_BejegyzesekKeres** operandus hozzá van rendelve.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 33/48|


**Az ablak felépítése**

Az ablak a képernyő bal oldalán jelenik meg egy fix szélességű függőleges panelként.

Az ablak tartalmazza:

    - Az ablak azonosítóját, valamint megnevezését egy fehér hátterű sávban:

**H01_02 – HUBA – Bejegyzések lekérdezése**

    - Ez alatt találhatók a bejegyzések táblázatos megjelenítésének szűrésére

szolgáló kereső mezők:

`o` a kereső paraméter neve,
`o` a kereső paraméter neve alatt a kereső mező halványszürke

háttérszínnel,
`o` a kereső mezővel egy sorban tőle jobbra a megadott kereső értékek

törlésére szolgáló ikon ( ),
`o` valamint a kereső érték(ek) törlésére szolgáló ikon mellett tőle jobbra a

kereső paraméterek közötti logikai kapcsolat ( ) beállítására
szolgáló kapcsoló (kivéve kötelező kereső paraméternél).

A kereső mezőbe kattintáskor a mező kék színű kerettel jelenik meg. A
minimálisan megadandó keresési feltételek alapján az üres értékkel rendelkező
(invalid) kereső mező piros színű kerettel jelenik meg.

    - A panel alsó részén találhatók a funkció gombok: az elsődleges **<Keresés>**,

mellette a másodlagos **<Alaphelyzet>** és tőle jobbra a másodlagos **<Bezárás>**
nyomógomb. A gombok mindig láthatók és kezelhetők a panel alsó részén.

**Ablakbetöltés**

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H01_02’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak első és minden további újbóli betöltésekor a kliens minden kereső
paraméterre vonatkozóan (kivétel dátum -tól és –ig mezők) meghívja az „ **S_08 -**
**Lekérdezési paraméterek értékkészletének lekérdezése** ” szolgáltatást, bemenő
paraméterként átadva neki az adatelem azonosítóját (AutosuggestId). Az S_08 hívások

során átadott értékek:

    - **Főkód** (’KesesFokod’): A kliensen a lenyíló listában a szolgáltatástól visszakapott

szöveg (’text’) lehetséges értékei jelennek meg. A lenyíló listában a töredékre

keresés az 1. karakter beírása után történik.

    - **Hierarchia szűrés**


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 34/48|


`o` **Terület** (’Terulet_A19’): A kliensen a lenyíló listában töredékre keresés

az 1. karakter beírása után történik.

`o` **Szolgálati hely** (’SzolgalatiHely_H01_02’): Alapértelmezetten nem

kezelhető. Minimum egy kiválasztott terület esetén válik kezelhetővé. A
kliensen a lenyíló listában a Terület mezőben kiválasztott terület(ek)
kódjához tartozó MÁV-os szolgálati helyek jelennek meg a
szolgáltatástól visszakapott kód (’code’) alapján.

    - **HÜSZ-vonalszám** ( [#101217] ’HuszVonal_H04_01’): A kliensen a lenyíló listában a

#100127 szolgáltatástól visszakapott ’value’ értéke #100127 vége jelenik meg. A

töredékre keresés az 1. karakter beírása után történik.

    - **HUBA-azonosító** (’HubaId’): A kliensen a lenyíló listában a szolgáltatástól

visszakapott értékek növekvő sorrendben jelennek meg. A lenyíló listában a

töredékre keresés az 1. karakter beírása után történik.

    - **HUBA állapota** (’HubaAllapot’): A kliensen a lenyíló listában töredékre keresés

az 1. karakter beírása után történik.

    - **Értesítési szint** (’HierarchiaSzint’): A kliensen a lenyíló listában a szolgáltatástól

visszakapott értékek közül csak a ’H’ és ’T’ kódú értékek szövege jelenik meg. A
lenyíló listában töredékre keresés az 1. karakter beírása után történik.

    - **Értesített felhasználó** (’ErtesitettFelhasznaloNev’): A kliensen a lenyíló listában

töredékre keresés az 1. karakter beírása után történik.

A kliens az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ”
szolgáltatás hívások során visszakapott listaszerű adatokkal feltölti az autocomplete
(kiválasztási) funkcióval rendelkező szöveges beviteli mezők értékkészletét. A listákban
az S_08 szolgáltatás által visszaadott ’text’ paraméter értékei jelennek meg.

**Kereső paraméterek megadása**

A felületen kereső paraméterenként kerül meghatározásra a keresést vezérlő elem.

    - **Autocomplete beviteli mező** : A mezőbe kattintáskor még nem jelenik meg a

lista, csak a paramétereknél megadott karakter beírása után vagy a lefelé nyíl
gomb kezelésekor. A beírt szövegtöredék alapján a rendszer folyamatosan
frissíti a lista tartalmát, melyben csak a megadott szövegtöredéket tartalmazó
értékek jelennek meg. A legördülő listából kiválasztva egy sort (egér kattintással
vagy az ENTER gomb megnyomásával) a mezőben chips-ként felvételre kerül a
kiválasztott érték, valamint a beírt szűrő értéket törli a rendszer, továbbá a lista
eltűnik. A listában nem szereplő, invalid (érvénytelen) értéket a kliens
automatikusan eltávolítja a mező elhagyásakor.

    - **Chips(ek):** Az autocomplete beviteli mezőbe kerülnek felvételre és a felvett

kereső paraméterek jelölésére szolgálnak. A bejegyzések szűrése mindig a
chips-ben felvett értékek alapján történik. Nincs maximuma meghatározva. A
chips jobb szélén található ’X’ segítségével a felvett kereső paraméter (chips)

törölhető.

    - **Szöveges beviteli mező:** A beírt szövegtöredéket tartalmazó bejegyzések

jelennek meg a listában.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 35/48|



    - **Dátumválasztás** : A mezőben a ikonra kattintva

választható ki egy nap. Az aktuális nap háttérszíne halvány rózsaszín.

    - **Időpont-választás** : A mező kitöltött dátum mező esetén kezelhető
(külön a dátum kezdete és dátum vége mezőkkel párban). Az időpont

megadható manuálisan vagy az ikonra kattintva megnyíló pop-up ablakban
az órát és percet jelképező csúszka mozgatásával, mely az ablakban történő
mellékattintáskor bezáródik, a kiválasztott időpont megjelenik a mezőben.

    - **Kiválasztott kereső értékek törlése:** A gomb segítségével az eddig felvett
kereső értékek (chips-ek) törölhetők.

    - **Kereső paraméterek közötti logikai kapcsolat beállítása:** Az
kapcsológomb (switch) alapértelmezetten kikapcsolt állapotú, melynek
jelentése: ’ÉS’ logikai kapcsolat van érvényben. A kapcsológombra való
kattintáskor annak állapota az éppen aktuálisról az ellenkezőjére vált:
kikapcsolt állapotról bekapcsoltra és fordítva. Csoportos kereső paraméter
esetén a kapcsológomb állapota a teljes paraméter csoportra értendő,
egyébként kereső paraméterenként.

Amennyiben az ablakon egy kereső paraméter (chips) sincs felvéve, akkor a keresés a
toolbar-ban található kapcsolók beállítása alapján történik.

A beállított (már keresés történt rájuk) kereső paramétereket a rendszer a
munkamenet idejére megőrzi, tehát az ablak (panel) bezárása, majd az „ **H01_01 -**
**HUBA - Bejegyzések** ” ablakról való újra megnyitása után is megmaradnak a korábban
rögzített kereső paraméterek.

**Minimális kereső paraméterek:**

A Kezdés ideje (-tól-ig) keresőparaméter kötelezően kitöltendő a < **Keresés**   nyomógombra kattintás előtt.

**Nyomógombok kezelése**

nyomógomb kezelése: A **<Keresés>** nyomógomb mindig kezelhető,
kezelésekor a rendszer meghívja az „ **S_45 – Bejegyzések felület lekérdezése** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - **Kezdés ideje:**

( **Kezdés ideje (-tól)** (’startDateFrom’)

`o` Paraméter (dátum és időpont): Alapértelmezetten az ablak
megnyitásakor a Kezdés ideje (-ig) – 60 nap, amely a Kezdés ideje (-ig)
módosításakor frissül, de manuálisan módosítható. Kötelező mező.
**Kezdés ideje (-ig)** (’startDateTo’)


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 36/48|


`o` Paraméter (dátum és időpont): Alapértelmezetten az ablak
megnyitásakor a rendszeridő jelenik meg, mely manuálisan
módosítható. Az időpontot a kliens :59 másodperccel adja át a
szolgáltatásnak. Kötelező mező.)

    - **Főkód** (’fokod’)

`o` Paraméter (aaa; bbb; …)

    - **Hierarchia szűrés** :

( **Terület** (’terulet’)

`o` Paraméter (aaa; bbb; …)
**Szolgálati hely** (’szolgalatiHely’)

`o` Paraméter (aaa; bbb; …))

    - **HÜSZ-vonalszám** (’huszVonalszam’): [#101217] Az S_08 szolgáltatástól visszakapott

’HuszVonal_H04_01’ paraméter ’value’ értéke. [#101217 vége]

`o` Paraméter (aaa; bbb; …)

    - **Leírás** (’leiras’)

    - **HUBA-azonosító** (’hubaId’)

`o` Paraméter (aaa; bbb; …)

    - **HUBA állapota** (’hubaAllapot’)

`o` Paraméter (aaa; bbb; …)

    - #91585 **Vonatazonosító**

`o` **Vonatszám** (’vonatszam’): Kitöltött Közlekedési dátum paraméter

esetén kötelező.

          - Paraméter (aaa)
`o` **Közlekedési** **dátum** (’vonatszam_datum’): Kitöltött Vonatszám
paraméter esetén kötelező. Formátuma: ’YYYY.MM.DD.’

          - Paraméter (dátum) [#91585 vége]

    - **Értesítési szint** (’hierarchiaSzint’)

`o` Paraméter (aaa; bbb; …)

    - **Értesített felhasználó** (’ertesitettFelhasznaloNev’)

`o` Paraméter (aaa; bbb; …)

    - **Paraméterek közötti logikai VAGY kapcsolat** (’orFilter’): tömb formában, ahol

az ÉS/VAGY logikai kapcsoló bekapcsolt állapotú

`o` Paraméter(ek) (parameterName 1: true, …, parameterName n: true)
A kereső paraméterek közötti logikai kapcsolat alapértelmezetten ’ÉS’. A ’VAGY’ logikai
kapcsolóval átadott bemenő paraméterek alapján történő szűrés a lekérdezés végén
szerepel csoportosan. Példa:

    - Kezdés ideje: 2024.06.01 00:00 – 2024.06.15 23:59 (ÉS)

    - Főkód: 20 (ÉS)

    - Terület: Budapest (VAGY)

    - Vonatazonosító: 240/2024.06.16 (VAGY)

    - Eredmény: Azok a bejegyzések, amelyek kezdete 2024.06.01-06.15. közötti és

a főkódjuk ’20’, és ezen bejegyzések között amelyeknek a területe Budapest
vagy a vonatazonosítója 240/2024.06.16.

A **<Keresés>** nyomógomb kezelésekor a kliens meghívja az „ **S_27 – Felhasználói**
**aktivitás naplózása** ” szolgáltatást is az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H01_02’


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 37/48|



    - Esemény (’ACTIVITY’): ’Search’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): keresett azonosítók JSON

formában

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

A kliens a szolgáltatás által visszaadott adatok alapján frissíti az „ **H01_01 - HUBA –**
**Bejegyzések** ” ablakban megjelenített bejegyzés adatokat és egyúttal kikapcsoltra állítja
a bekapcsolt kapcsolót (’Bejelentésre váró’/’Aktuális napi’/’Folyamatban lévő’).
Keresés után a rendszer automatikusan bezárja a H01_02 ablakot.

A kliens az alábbi hibaüzeneteket jeleníti meg pop-up ablakban a megnyitott ablak
felett a < **Keresés**   - nyomógomb kezelésekor:

    - Amennyiben egyik minimálisan megadandó kereső paraméter sincs kitöltve

vagy [#91585] a vonatszám és közlekedési dátum valamelyike ki van töltve, de a
másik nincs [#91585 vége], az alábbi üzenetet jelenik meg:

    - Amennyiben nincs a keresési paramétereknek megfelelő bejegyzés rekord vagy

a GVK profilú felhasználónak nincs jogosultsága, az alábbi üzenet jelenik meg:



-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 38/48|



    - Amennyiben a lekérdezés túllépi a megengedett időt (5 perc), akkor az alábbi

üzenet jelenik meg:

Az üzenetek az < **OK**   - vagy < **X**   - nyomógomb kezelésével zárhatók be, a H01_02 ablak a
beállított kereső paraméterekkel nyitva marad.

nyomógomb kezelése: Az **<Alaphelyzet>** nyomógomb mindig
kezelhető, kezelésekor a rendszer kiüríti a keresőmezőket, a logika kapcsolatot
visszaállítja az alapértelmezett ’ÉS’ kapcsolatra (kikapcsolt logikai kapcsológomb). Az
**<Alaphelyzet>** gomb hatására nem történik szolgáltatás hívás. Az ablak nyitva marad.

nyomógomb kezelése: A **<Bezárás>** nyomógomb mindig kezelhető,
kezelésekor a rendszer bezárja az ablakot, de a munkamenet befejezéséig
megmaradnak a bezárás előtt felvett kereső paraméterek és a logikai kapcsolat

beállítás is.

**Ablak bezárása**

Az ablak bezárása a **<Bezárás>** nyomógombra kattintással vagy mellékattintással
lehetséges.

Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H01_02’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 39/48|

### **2.3.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **













|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Kezdés ideje (-tól-ig)||||||||
||Kezdés ideje (-tól)|-|calendar és timepicker|DATE AND TIME|YYYY.MM.DD HH24:MI|rendszer időpont – 60 nap||
||Kezdés ideje (-ig)|-|calendar és timepicker|DATE AND TIME|YYYY.MM.DD HH24:MI|rendszer időpont||
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|Főkód||||||||
||Főkód|-|combobox + chips||||GVK.K_KESESFOKOD|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|Hierarchia szűrés||||||||
|Terület||||||||
||Terület|-|combobox + chips||||GVK.K_TERULET|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|Szolgálati hely||||||||
||Szolgálati hely|-|combobox + chips||||GVK_GIS.RAILWAY_ OBJECTS_ALLOMASO K_V|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|HÜSZ-vonalszám||||||||
||HÜSZ-vonalszám|-|combobox + chips||||GVK_GIS.LINES|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|Leírás||||||||
||Leírás|-|szöveges input mező|AN100|||-|
||(keresés törlése)|-|icon|||||

#### (kapcsológomb) - switch ÉS (kikapcsolt)


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 40/48|





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
||HUBA állapota|-|combobox + chips||||HUBA.K_BEJEGYZES_ ALLAPOT|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|#91585 Vonatazonosító||||||||
||Vonatazonosító|-|label||||-|
||Vonatszám|-|szöveges input mező|AN50||||
||(keresés törlése)|-|icon|||||
||Közlekedési dátum|-|calendar – napválasztó||YYYY.MM.DD|||
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|#91585 Vasútvállalat||||||||
||Vasútvállalat|-|combobox + chips||||GVK.VASUTVALLALA T|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|Értesítési szint||||||||
||Értesítési szint|-|combobox + chips||||GVK.K_HIERARCHIA|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|Értesített felhasználó||||||||
||Értesített felhasználó|-|combobox + chips||||-|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||
|#91585 Értesítési szerepkör||||||||
||Értesítési szerepkör|-|combobox + chips||||HUBA.K_ERTESITESI_ SZEREPKOR|
||(keresés törlése)|-|icon|||||
||(kapcsológomb)|-|switch|||ÉS (kikapcsolt)||


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 41/48|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Törlés|-|megnyomható|search off|
||Logikai kapcsoló|-|megnyomható||
||Keresés|-|megnyomható||
||Alaphelyzet|-|megnyomható||
||Bezárás|-|megnyomható||


**2.3.5.** **Hívott szolgáltatások**







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés|-|S_08 - Lekérdezési paraméterek értékkészletének lekérdezése|
||-|S_45 – Bejegyzések felület lekérdezése|
|||S_27 – Felhasználói aktivitás naplózása|
|||S_27 – Felhasználói aktivitás naplózása|
|Ablakbezárás||S_27 – Felhasználói aktivitás naplózása|


**2.3.6.** **Rendszerüzenetek**







|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|A GVK profil azonosítójú felhasználónak nincs joga minden adathoz vagy nincs a megadott keresési paramétereknek megfelelő vontató jármű.|„A felhasználónak nincs joga minden adathoz vagy nincs a megadott keresési paramétereknek megfelelő vontató jármű.”|Információs|
|’Kezdés ideje (-tól)’ üres VAGY ’Kezdés ideje (-ig)’ üres|„Nincs minden kötelező mező kitöltve”|Hiba|
|#91585 ’Kezdés ideje (-tól)’ nem üres ÉS ’Kezdés ideje (- ig)’ nem üres ÉS ’Vonatszám nem üres ÉS Közlekedési dátum üres|„Nincs minden kötelező mező kitöltve”|Hiba|
|#91585 ’Kezdés ideje (-tól)’ nem üres ÉS ’Kezdés ideje (- ig)’ nem üres ÉS ’Vonatszám|„Nincs minden kötelező mező kitöltve”|Hiba|


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 42/48|





|üres ÉS Közlekedési dátum nem üres|Col2|Col3|
|---|---|---|
|’Kezdés ideje (-ig)’ dátum + időpont < ’Kezdés ideje (-tól) dátum + időpont|„Az időszak vége az időszak kezdetével megegyező vagy ettől későbbi időpont lehet.”|Hiba|
|TimeOut exception|„A lekérdezés túllépte a megengedett időt. Kérjük próbálja újra!”|Információs|


**2.3.7.** **Kódtáblák, választási listák**

Nincs.

**2.3.8.** **Rendszerparaméterek**

Nincs.


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 43/48|

##### 2.4. H01_03 – HUBA – Bejegyzések oszlopmegjelenítése [#89142]

**2.4.1.** **Ablak/lap feladatai**

Az ablak feladata a „ **H01_01** **– HUBA - Bejegyzések** ” ablakban a grid-en megjelenített
mezők beállításainak megadására (ki-/bekapcsolására) és mentésére szolgál.

**2.4.2.** **Ablak/lap megjelenése**


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 44/48|


**2.4.3.** **Ablak/lap működése**

Az ablak megnyitása az „ **H01_01** **- HUBA - Bejegyzések** ” ablak toolbar-ban található

( **Beállítások** ) nyomógomb megnyomását követően történik. A
( **Beállítások** ) nyomógomb csak azon GVK profil azonosítójú felhasználó számára jelenik
meg, megnyomható, akihez az **OP_H01_03_** **B** **ejegyzesekOszlopokMegjelenitMent**
operandus hozzá van rendelve.

**Az ablak felépítése**

Az ablak a képernyő bal oldalán jelenik meg egy fix szélességű függőleges panelként.

Az ablak tartalmazza:

     - Az ablak címét: **H01_03 - HUBA – Bejegyzések oszlopmegjelenítése**


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 45/48|



    - Ez alatt található a grid oszlopainak nevét és a nevek mellett jobbra - velük egy

vonalban – az oszlopok megjelenítésére szolgáló kapcsológombokat tartalmazó

szekció.

    - A panel legalsó részén jobbra igazítva található a kék hátterű < **Alkalmazás**    
gomb, melyre kattintáskor az ablakot bezárja a rendszer.

    - A panel legalsó részén az < **Alkalmazás**    - nyomógombtól jobbra található a fehér

hátterű < **Alaphelyzet**      - gomb, melyre kattintáskor minden oszlopnevet
bekapcsol a rendszer.

**Ablakbetöltés**

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H01_03’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’Modify’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak betöltésekor a kliens az alábbi bemenő paraméterekkel meghívja az **„S_15 -**
**Beállítások lekérdezése** ” szolgáltatást:

    - Beállítás azonosító (’azonosito’): ’H01_03’

A GVK profil azonosítót a webAPI réteg adja át.

A kliens az alábbi, szolgáltatástól visszakapott értékek alapján megjeleníti az
oszlopokat:

    - Beállítás neve (’SETTING_NAME’): az oszlop neve

    - Megjelenítési jelző (’DISPLAY_FLAG’): 0 - nem jelenik meg az oszlop, 1 
megjelenik az oszlop

    - Sorszám (’SERIAL_NUMBER’): az oszlop sorszáma a griden

Ha nincs ilyen eltárolt adat (S_15 szolgáltatás nem ad vissza adatot), akkor
alapértelmezetten minden oszlop bekapcsoltnak tekintendő.

Az ablak megnyitásakor az ’Aktuális napi’ kapcsoló bekapcsolt állapotú.

**Switch (kapcsológomb) működése**

    - A switch-re (kapcsológombra) való kattintáskor annak állapota az éppen

aktuálisról az ellenkezőjére vált: bekapcsolt állapotról kikapcsoltra és fordítva.

    - A kapcsológombok alapértelmezett állapotba állítása (összes kapcsológomb

bekapcsolása egyszerre az < **Alaphelyzet**      - nyomógombra kattintással
lehetséges.

    - A kapcsológombok változása esetén a változás az < **Alkalmazás**    - nyomógombra

kattintáskor kerül mentésre. A kliens az < **Alkalmazás**       - nyomógomb kezelésekor


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 46/48|


meghívja az „ **S_16 - Beállítások mentése** ” szolgáltatást, melynek az alábbi
bemenő paramétereket adja át:

`o` Beállítás azonosítója (’code’): ’H01_03’
`o` Beállítások (’settings’):

          - Beállítás neve (’name’): mezőnév

          - Megjelenítési jelző (’display’): 0 - kikapcsolt vagy 1 - bekapcsolt.
A GVK profil azonosítót a webAPI réteg adja át.

A szolgáltatás elmenti a kapott paraméterek alapján a GVK profil azonosítójú
felhasználóhoz tartozó oszlopbeállításokat.

Valamely kapcsoló állapotának módosítása esetén a kliens meghívja az „ **S_27 –**
**Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H01_03’

    - Esemény (’ACTIVITY’): [#92722] ’Modify’ [#92722 vége]

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): [#92722 ] módosítás adatok (mit

mire módosított a felhasználó) JSON formában [#92722 vége]

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

**Ablakbezárás**

Az **<Alkalmazás>** gomb kezelésekor, ill. mellékattintáskor a rendszer bezárja az
ablakot. Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás**
**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H01_03’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’Modify’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 47/48|

### **2.4.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **










|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|HUBA azonosító|HUBA azonosító|-|switch|||Bekapcsolt||
|Kezdés ideje|Kezdés ideje|-|switch|||Bekapcsolt||
|Befejezés ideje|Befejezés ideje|-|switch|||Bekapcsolt||
|Főkód|Főkód|-|switch|||Bekapcsolt||
|Szolgálati hely|Szolgálati hely|-|switch|||Bekapcsolt||
|Terület|Terület|-|switch|||Bekapcsolt||
|Leírás|Leírás|-|switch|||Bekapcsolt||
|#89383 HUBA betűkód|HUBA betűkód|-|switch|||Bekapcsolt #89383||
|HUBA felelőse|HUBA felelőse|-|switch|||Bekapcsolt||
|HUBA állapota|HUBA állapota|-|switch|||Bekapcsolt||
|Utolsó állapotváltozás ideje|Utolsó állapotváltozás ideje|-|switch|||Bekapcsolt||
|HUBA jellege|HUBA jellege|-|switch|||Bekapcsolt||
|Bejelentő|Bejelentő|-|switch|||Bekapcsolt||
|Értesítési szint|Értesítési szint|-|switch|||Bekapcsolt||
|Értesítés kiadva|Értesítés kiadva|-|switch|||Bekapcsolt||
|HUBA kora|HUBA kora|-|switch|||Bekapcsolt||
|#96127 Kifogásolható Vasútvállalat|Kifogásolható Vasútvállalat|-|switch|||Bekapcsolt||


-----

|GVK_UC_H01 – HUBA bejegzyések|Col2|Azonosító: RRT_UC_H01|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.22|Oldal: 48/48|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Alkalmazás|-|megnyomható|-|
||Alaphelyzet|-|megnyomható|-|


**2.4.5.** **Hívott szolgáltatások**







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_15 - Beállítások lekérdezése|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
|- kapcsoló állapotának módosulásakor|-|S_16 - Beállítások mentése|
||-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.4.6.** **Rendszerüzenetek**

Nincs.

**2.4.7.** **Kódtáblák, választási listák**

Nincs.

**2.4.8.** **Rendszerparaméterek**

Nincs.


-----



02.md :::
|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 1/43|

# – GVK_UC_H02  HUBA bejegyzés kezelése RÉSZLETES RENDSZERTERV
## 2025 . februá r május 30 12.
### V1.0


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 2/43|

#### **Dokumentum történet **

Kidolgozó változtatások követése










|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|Col6|Col7|
|---|---|---|---|---|---|---|
||||Név|Állapot|||
|7.0|2024.05.23|Létrehozás|Vörös Gábor|Elkészült|||
|7.0|2024.05.23|#88903 - HUBA - UC_H02_01 HUBA bejegyzés keret|Vörös Gábor|Elkészült|||
|7.0|2024.06.13|#88906 - H02_04 - HUBA - Bejegyzés részletek csempe|Vörös Gábor|Elkészült|||
|7.0|2024.07.01|#88905 - H02-03 - HUBA - Belső megjegyzések|Vörös Gábor|Elkészült|||
|7.0|2024.07.02|#88904 - H02_02 - HUBA - Bejegyzés történet csempe|Vörös Gábor|Elkészült|||
|7.0|2024.08.21|#88908 - H02_06 - HUBA - Kód és hely csempe|Vörös Gábor|Elkészült|||
|7.0|2024.08.23|#88912 - H02_08 - HUBA - Bejelentő csempe|Vörös Gábor|Elkészült|||
|7.0|2024.09.12|#93801 - GVK - HUBA - Pre_activity_ID töltése|Vörös Gábor|ElkészültEllenőriz hető|||
|7.0|2024.09.18|#89383 GVK - HUBA betűkód kivezetése|Berkesi Ádám|ElkészültEllenőriz hető|||
|7.0|2024.09.29|#94153 - HUBA - Verziókezelés megvalósítása|Vörös Gábor|Elkészült|||
|7.0|2024.09.30|#94430 - H02_01 - Üres csempe esetén hibás megjelenés|Vörös Gábor|Ellenőrizhető|||
|7.1|2024.11.28|#96127 - HUBA – H09_Kifogáskezelés|Kovács Eszter|Folyamatban|||
|7.2|2025.01.24|#98733 - HUBA - H02_01 - HUBA történet kiegészítése az értesítés üzeneteivel|Vörös Gábor|Ellenőrizhető|||
|7.2|2025.02.12|99446: H02_03 túl hosszú név esetén levágás, és „…”|Berkesi Ádám|Ellenőrizhető Fo|Fo|rmatted Table|
||||||||
|7.2|2025.02.20|#99938 - HUBA - H02_01 UI javítás (háttérszín)|Vörös Gábor|Ellenőrizhető|||


MÁV SZK Ellenőrzések követése




|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0||Ellenőrzés|||
||||||
||||||
||||||


MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
|||MÁV igényeknek megfelel|Herczog Ákos||
||||||
||||||
||||||


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 3/43|

#### **1. Általános ismertetés **
##### **1.1. A használati eset modulkapcsolatai **

**Szolgáltatások leírásának elérhetősége:**

[GVK_webalkalmazás_szolgáltatások.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1301)

(EA kommunikációs ábra)


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 4/43|

##### **1.2. A használati eset célja, feladatai **

Az alkalmazás alapvető célja xxx.

Feladata, hogy lehetőséget biztosítson

    - xxx


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 5/43|

#### **2. A használati eset ablakai **
##### **2.1. Ablakok közötti kapcsolat, navigálás **

(EA ablakátmenet)


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 6/43|

##### **2.2. H02 - HUBA – Bejegyzés kezelése **

**2.2.1.** **Ablak/lap feladatai**

A képernyő fő feladata az adott HUBA bejegyzés összes fontos adatának megjelenítése egy oldalon, illetve az
összes lehetséges beállítási lehetőség elérhetőségének biztosítása.

  - Nem feltétel a 100%-os információ megjelenítés, de az összes fontosabb adat jelen lesz a dashboardon.

  - Mentés gomb a dashboardon nem szükséges, mivel itt nem lehet adatokat módosítani, azokat a további
képernyők menedzselik, és mentik az adatbázisba.

  - A kötelező mezők megjelennek majd a képernyőn piros színnel kiemelve, amíg nem tartalmaznak

adatot.

  - Megjeleníti az adott HUBA bejegyzéssel kapcsolatos összes log bejegyzést

  - Belső megjegyzés funkció megvalósítása is ezen a képernyőn történikBelső megjegyzések:

**2.2.2.** **Ablak/lap megjelenése**

#96127

**2.2.3.** **Ablak/lap működése**

**Az ablak felépítése**

  - Az ablak kitölti a teljes képernyőt.

  - Fejléc

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet használatakor
a fejléc háttérszíne középszürke (7F7F7F).

Üzemi (PROD)


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 7/43|


Felhasználói teszt (QA)

Képernyőfotó a megvalósítás után.

Belső teszt (TEST)

Képernyőfotó a megvalósítás után.

Fejlesztői (DEV)

Képernyőfotó a megvalósítás után.

`o` Középen az ablak azonosítóját és megnevezését: „ **H02 – HUBA –**

**Bejegyzés kezelése** ”

`o` Jobb szélen:

            - Rendszer neve és logója, valamint a rendszer neve alatt a

frontend verziószáma jelenik meg.

            - A logó előtt a GVK környezet neve:

               - üzemi (PROD): Nem jelenik meg a kliensen.

               - felhasználói teszt (QA): „ **QA** ”

               - teszt (TEST): „ **TEST** ”

               - fejlesztői (DEV): „ **DEV** ”

            - GVK profil név:
A GVK-ba történt bejelentkezéskor érvényes GVK profil név
megjelenítésére szolgál.

  - Fejléc alatt az alábbi adat jelenik meg:

`o` HUBA Azonosító (képzése a létrehozás dátuma, illetve „ ~~/~~ -” jellel

elválasztva a HUBA ~~verziószá~~ ~~m~~ ~~s~~ orszám (ami egy napon belül ~~ül~~ i
sorszám))

A dashboard megnyitásához az **OP_H02_01_BK – HUBA bejegyzés kezelése** operandus
megléte szükséges.

A tartalmi rész (dashboard) ún. csempékből áll, melyek minden esetben egy-egy témakört
(képernyőt) dolgoznak fel. A működési leírásban ennek megfelelően csempénként lesz

részletezve a működés.


**Formatted:** Strikethrough

**Formatted:** Centred


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 8/43|


A dashboard megjelenésénél figyelembe kell venni a HUBA bejegyzés állapotát az alábbiak

szerint:

Szerkesztő és megtekintési nézetek i s el érhetők az aktuális operandusok által
meghatározott módon, és a csempé k h á ttérs zí n e RGB: #E1F0FF

~~•~~ #99938 ~~M~~ inősített és ~~B~~, ~~Be~~ fejezett állapotban ~~állapotban~~

  
Szerkesztő és megtekintési néze tek i s el érh etők az aktuális operandusok által
meghatározott módon, és a csempé k h á ttérs zí n e az állapot színkódjára változik.

#99938 ~~Minden~~ ~~funkció~~ ~~elérhető~~

  - Elvetett, és Lezárt állapotban

Csak a megtekintési nézetek érhetők el, és a csempék háttérszíne ~~halványpirosra~~
~~(RGB:~~ ~~#FFD7E1~~ ~~)a~~ z állapot színkódjára változik. Az alábbi képernyőkép demonstrálja ~~ezt~~
~~az~~ ~~a~~ lezárt állapotot:

#96127

A dashboard figyeli a verziószám változást, és jelzi a felhasználónak, ha módosítás történt az
adatokban. Jelen elvárás szerint a HUBA bejegyzés verziószám kezelése kerül megoldásra, és
HUBA bejegyzés szinten vizsgálja a verzió változását.


**Formatted:** Superscript

**Formatted:** Indent: Left: 1,27 cm, No bullets or numbering

**Formatted:** Indent: Left: 1,27 cm, No bullets or numbering

**Formatted:** Indent: Left: 0,63 cm, Bulleted + Level: 1 +
Aligned at: 1,85 cm + Indent at: 2,48 cm


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 9/43|


Amennyiben az előző frissítéshez képest változik a HUBA bejegyzés verziószáma, azt az alábbi
vizuális jelzéssel jelzi a felhasználónak:

A verziószámot is megjelenítő sáv háttérszíne pirosra (RGB: #FF6464), a betűszín sötétebb
szürkére (RGB: #2D2D2D) változik, továbbá a verziószám mellett megjelenik egy felkiáltójel

( ) ikon.

A felhasználó a felkiáltójelre kattintva szűntetheti meg a verziófrissítés jelzését.

Fontos, hogy ha a verziófrissítés kiemelése aktív, azt a kliens a következő automatikus
frissítéskor nem írhatja felül, azaz addig kell látszódnia, amíg a felhasználó nem nyugtázza a
felkiáltójel ikonra kattintva.


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 10/43|


**Az ablak működési leírása (lapfül esetén külön almenüben)**

**Ablak betöltés**

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H02_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „View”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

**Képernyő tartalm** **án** **ak frissítése**

A képernyő ütem e zetten 20 mp - enként frissül, erre a fejlécben futó progress circle
figyelmeztet, és m u tatja a következő frissítés időpontját 20mp - ről visszaszámlálás módján.

Megjelenése az al áb bi:

Amikor a számláló 0- hoz ér, a kliens az alábbi műveleteket hajtja végre:

bejegyzés egyedi azonosítóját ( **BEJE** **GYZES** **_I** **D** ), m ajd a verziószámot összehasonlítja a
legutóbbi frissítésből kapottal.

**Belső megjegyzés betöltése (GET_HUBA_CHAT)** eljárást, és bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját

        - Frissíti a Bejegyzés részletek csempét a verziószám lekérdezésekor

kapott adatokkal.

        - Frissíti a Belső megyjegyzés csempét, ehhez a kliens meghívja az **S_54** **–**

**Belső megjegyzés betöltése (GET_HUBA_CHAT)** eljárást, és bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** )

        - Frissíti a Bejelentő csempét, ehhez a kliens meghívja az **S_49** **–**

**Bejelentés adatok lekérdezése (getBejelentesAdat)** eljárást, és
bemenő paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** )


**Formatted:** Font: Not Bold, Superscript

**Formatted:** Font: Not Bold

**Formatted:** Font: Bold, Font colour: Text 1

**Formatted:** Default Paragraph Font, Font: Bold, Font colour:
Text 1

**Formatted:** Font: Bold

**Formatted:** Underline

**Formatted:** Font: Bold

**Formatted:** Font: Bold

**Formatted:** Underline


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 11/43|



        - Frissíti a Kód és hely csempét, ehhez a kliens meghívja az **S_53** **–** **Kód és**

**hely adatainak lekérdezése (getHubaKodEsHely)** eljárást, és bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** )

        - Frissíti a HUBA történet csempét, ehhez a kliens meghívja az **S_56** **–**

**HUBA történet betöltése (GET_HUBA_ACTIVITY)** eljárást, és bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** )

        - #96127 Frissíti a Kifogások csempét, ehhez a kliens meghívja az **S_75** **–**
**Bejegyzés kifogások lista lekérezése** **(H** **UBA.Get_Kifogasok_Lista** **)**
eljárást, és bemenő paraméterként átadja a HUBA bejegyzés egyedi
azonosítóját ( **BEJEGYZES_ID** ) [#96127 VÉGE]

        
megnyitott szerkesztő képernyőt (H03_01, H04_01, H06_05, H08_01) bezárnak. Ehhez az
ablakok közötti k om munikációt kell felhasználni, és a **sendMessage** - el jelezni a dashboard

#94153 vége

**Ablak bezárása**

A képernyő bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H02_01”

  - Esemény (’ACTIVITY’): WindowClose

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „View”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - #93801 Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A WindowOpen
eseménykor kapott **ACTIVITY_ID.**



**Formatted:** Not Superscript/ Subscript

**Formatted:** Font: Bold

**Formatted:** Not Superscript/ Subscript

**Formatted:** Font: Not Bold, Font colour: Text 1


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 12/43|


**2.2.3.1.** **H02_01 – HUBA történet**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H02_01_BKTortenet – HUBA bejegyzés HUBA történet megtekintése** operandust,
és amennyiben a felhasználónak engedélyezve van, meghívja a **S_56 – HUBA történet**
**betöltése (GET_HUBA_ACTIVITY)** eljárást, amitől visszakapja a megjelenítéshez
szükséges információkat.

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Belső megjegyzés csempe az alábbiak szerint jelenik meg:

~~**megtekintése**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~ ~~felhasználónak~~ ~~engedélyezve~~ ~~van~~, ~~a~~
~~bejegyzés~~ ~~verziószámát~~ ~~összehasonlítja~~ ~~a~~ ~~legutóbbi~~ ~~frissítéssel~~, ~~és~~ ~~vált~~ o ~~z~~ ás ese ~~t~~ én
~~meghívja~~ ~~a~~ ~~**S**~~ **_** ~~**56**~~ ~~**–**~~ ~~**HUBA**~~ ~~**történet**~~ ~~**betöltése**~~ ~~**(GET**~~ **_** ~~**HUBA**~~ **_** ~~**ACTIVITY)**~~ ~~eljárást~~, ~~amitől~~
~~visszakapja~~ ~~a~~ ~~megjelenítéshez~~ ~~szükséges~~ ~~információkat~~ .

**Ablak működése:**

A HUBA történet csempén csökkenő sorrendben (azaz a legfrissebb lesz elöl) jelennek
meg a naplózott események az adott HUBA bejegyzéshez kapcsolódóan.

A kliens a **S_56 – HUBA történet betöltése (GET_HUBA_ACTIVITY)** eljárástól megkapja
az összes megjelenítéshez szükséges információt JSON formátumban:

    - HUBA bejegyzés egyedi sub azonosítója (’subId’)

    - Ablak azonosítója (’windowId’)




-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 13/43|



    - Esemény megnevezése (’activity’)

    - Esemény kiegészítő információi (’activityExt’)

    - Esemény sablonja (’activityTemplate’)

    - Esemény kiegészítés sablonja (’activityExtTemplate’)

    - Esemény időpontja UTC (’timeUTC’)

    - Esemény időpontja (’logged’)

    - Felhasználó GVK profil azonosítója (’gvkUserId’)

    - Felhasználó GVK profil neve (’gvkUserName’)

A kapott események és sablonok alapján állítja össze a kliens a megjelenítendő
információkat naplóeseményenként az alábbiak szerint:

    - Bejegyzés létrehozás (Create)

Létrehozás esetén nincsenek további paraméterek, csak a létrehozás ténye,
ezért a HUBA történetben a sablonban meghatározott szöveget kell
megjeleníteni (pl.: „Bejegyzés rögzítésének időpontja!”)

Értesítés esetén szintén egy előre meghatározott szöveg kerül megjelenítésre
az értesítés sorszámának megjelölésével.

`o` Az alábbi helyekről érkezhet ilyen log:

          - H04_01 – HUBA – Kód és hely (bejegyzés létrehozás)

          - H06_06A – HUBA – Értesítés kezelése (értesítés létrehozás)

`o` Megjelenítés:

**<hubaActivity.logged> - <hubaActivity.gvkUserName>**

<hubaActivity.activityTemplate>

Az alábbi minta alapján:

    - Bejegyzés módosítás (Modify) [#88904]

Módosítás esetén ~~a~~ ~~kiegészítő~~ ~~információkban~~ ~~JSON~~ ~~formátumban~~ ~~megkapja~~ ~~a~~
~~kliens~~ ~~az~~ ~~összes~~ ~~mező~~ ~~eredeti~~ ~~és~~ ~~mó~~ d ~~osított~~ ~~tartalmát~~ ~~is~~, ~~amelyből~~ ~~differenciát~~
~~képez~~, ~~azaz~~ ~~csak~~ ~~azokkal~~ ~~a~~ ~~mezőkkel~~ ~~foglalkozik~~, ~~amelyeknek~~ ~~tartalma~~ ~~a~~
~~módosítás~~ ~~során~~ ~~megváltozott~~ . ~~F~~ ~~f~~ o rrások szerint eltérő sablonokkat kaphat a
kliens (pl.: képernyő neve változik, értesítések esetén a subId is megjelenik,
stb.).

`o` Az alábbi helyekről érkezhet ilyen log:

          - H03_01 – HUBA – Bejelentő

          - H04_01 – HUBA – Kód és hely


**Formatted:** Superscript


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 14/43|



          - H05_01 – HUBA – Korlátozás

          - H08_01 – HUBA – Bejegyzés részletek

`o` Megjelenítés:

**<hubaActivity.logged> - <hubaActivity.gvkUserName>**

<hubaActivity.activityTemplate>

~~<hubaActivity~~ . ~~activityExtTemplate>*~~

~~***~~ ~~*Fenti*~~ ~~*sort*~~ ~~*annyiszor*~~ ~~*ismétli*~~ ~~*a*~~ ~~*kliens*~~ *,* ~~*ahány*~~ ~~*adat*~~ ~~*tartalma*~~ ~~*megváltozott*~~

Az alábbi minta alapján:

    - Bejegyzés állapotának változása (StateChange)

Az állapotjelző mező változása a felületen nem direktben történik, hanem az
adatbázis oldalon több mező kiértékelése után, ezért erre külön naplóbejegyzés
kerül mentésre a HUBA történetbe. Értesítések esetén a háttérben futó

adatbázis és egyéb folyamatok módosíthatják az értesítés állapotát.

`o` Az alábbi helyekről érkezhet ilyen log:

          - H08_01 – HUBA – Bejegyzés részletek (bejegyzés
állapotváltozása)

          - K16_01 – K_16_01 – HUBA bejegyzés automatikus lezárása

(HUBA_AUTOCLOSE) (bejegyzés állapotváltozása)

          - H06_06A – HUBA – Értesítések kezelése (értesítés
állapotváltozása)

`o` Megjelenítés:

**<hubaActivity.logged> - <hubaActivity.gvkUserName>**

<hubaActivity.activityTemplate>

Az alábbi minta alapján:


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 15/43|



    - Adatbázis oldali egyéb tevékenységek

Értesítések esetén az e-mail (EMAIL_SEND) és SMS (SMS_SEND) elküldésének
megtörténte esetén kerül be log bejegyzés, amely az értesítés sorszámának
megjelölésével az alábbiak szerint jelenik meg.

`o` Az alábbi helyekről érkezhet ilyen log:

          - H06_06A – HUBA – Értesítések kezelése (értesítés
állapotváltozása)

`o` Megjelenítés:

**<hubaActivity.logged> - <hubaActivity.gvkUserName>**

<hubaActivity.activityTemplate>

Az alábbi minta alapján:


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 16/43|


**2.2.3.2.** **H02_02 – Belső megjegyzés**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H02_01_BKMegjegyzes – HUBA bejegyzés Belső megjegyzés megtekintése**
operandust, és amennyiben a felhasználónak engedélyezve van, meghívja a **S_54 –**
**Belső megjegyzés adatainak betöltése (GET_HUBA_CHAT)** eljárást, aminek bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 17/43|


Amennyiben még nem rögzítettek egyetlen belső megjegyzést sem az ado tt
bejegyzéshez, a csempe az alábbiak szerint jelenik meg:

#94430 vége


**Formatted:** Superscript


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 18/43|


Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Belső megjegyzés csempe az alábbiak szerint jelenik meg:

Ebben az esetben nincs adatlekérés, és a beviteli mező, valamint a Küldés nyomógomb
inaktívvá válnak, továbbá a tartalom helyett az alábbi szöveg jelenik meg:

„Nincs jogosultsága a Belső megjegyzé ~~es~~ e k megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával!”

|#94153|Ablak/Lapfül frissítése|
|---|---|
|||



~~**Ablak/Lapfül**~~ ~~**frissítése**~~

~~A~~ „ ~~H02~~ ~~–~~ ~~HUBA~~ ~~–~~ ~~Bejegyzés~~ ~~kezelése”~~ ~~képernyő~~ ~~20mp-enként~~ ~~frissíti~~ ~~tar~~ tal ~~m~~ á ~~t~~, i ~~l~~ y ~~e~~ nk ~~o~~ r
~~a~~ ~~kliens~~ ~~ellenőrzi~~ ~~az~~ ~~**OP**~~ **_** ~~**H02**~~ **_** ~~**01**~~ **_** ~~**BKMegjegyzes**~~ ~~**–**~~ ~~**HUBA**~~ ~~**bejegyzés**~~ ~~**Belső**~~ ~~**megjegyzés**~~
~~**megtekintése**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~ ~~felhasználónak~~ ~~engedélyezve~~ ~~van~~,
~~meghívja~~ ~~a~~ ~~**S**~~ **_** ~~**54**~~ ~~**–**~~ ~~**Belső**~~ ~~**megjegyzés**~~ ~~**adatainak**~~ ~~**betöltése**~~ ~~**(GET**~~ **_** ~~**HUBA**~~ **_** ~~**CHAT)**~~ ~~eljárást~~,
~~aminek~~ ~~bemenő~~ ~~paraméterként~~ ~~átadja~~ ~~a~~ ~~HUBA~~ ~~bejegyzés~~ ~~egye~~ d ~~i~~ az ~~onosítóját~~
~~(~~ ~~**BEJEGYZES**~~ **_** ~~**ID**~~ ~~)~~ .

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

**<Megjegyzés_időpontja> - <Megjegyzés létrehozója>**



**Formatted:** Strikethrough


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 19/43|


<Megjegyzés tartalma>


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 20/43|


**Ablak működése:**

A csempe alsó részén található egy beviteli mező, és egy „Küldés” gomb. A felhasználó
beírja a megjegyzését a beviteli mezőbe, majd megnyomja a küldés gombot.

A kliens a Küldés gomb kezelésére meghívja a **S_55 – Belső megjegyzés mentése**
**(SET_HUBA_CHAT)** eljárást, aminek bemenő paraméterként átadja a HUBA bejegyzés
egyedi azonosítóját ( **BEJEGYZES_ID** ), a Felhasználó GVK profil azonosítóját, valamint a
megjegyzés tartalmát.

Az eljárás mentése után a Belső megjegyzések csempe tartalmát soron kívül frissíti,
amihez meghívja a **S_54 – Belső megjegyzés betöltése (GET_HUBA_CHAT)** eljárást,
aminek bemenő paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** ).


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 21/43|


**2.2.3.3.** **H02_03 –** ~~**Bejelentés**~~ ~~**B**~~ **ejelentő**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H03_01_BejelentesMegtekint** operandust, és amennyiben a felhasználónak
engedélyezve van, meghívja az **S_49** **–** **Bejelentés** **adatok** **lekérdezése**
**(getBejelentesAdat)** eljárást, aminek bemenő paraméterként átadja a HUBA bejegyzés
egyedi azonosítóját ( **BEJEGYZES_ID** ).

#94430 kezdete

Amennyiben még nem rögzítettek bejelentőt a bejegyzéshez, a Bejel entő csem pe az
alábbiak szerint jelenik meg:

**adat** ” felirat jelenik meg.

#94430 vége

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Bejelentő csempe az alábbiak szerint jelenik meg:

Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a fejlécből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:

„Nincs jogosultsága a Kód és hely megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával!”

|#94153|Ablak/Lapfül frissítése|
|---|---|
|||



~~**Ablak/Lapfül**~~ ~~**frissítése**~~


**Formatted:** Strikethrough


**Formatted:** Font: Bold



-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 22/43|


~~A~~ „ ~~H02~~ ~~–~~ ~~HUBA~~ ~~–~~ ~~Bejegyzés~~ ~~kezelése”~~ ~~képernyő~~ ~~20mp-enként~~ ~~frissíti~~ ~~tar~~ tal ~~m~~ á ~~t~~, i ~~l~~ y ~~e~~ nk ~~o~~ r
~~a~~ ~~kliens~~ ~~ellenőrzi~~ ~~az~~ ~~**OP**~~ **_** ~~**H03**~~ **_** ~~**01**~~ **_** ~~**BejelentesMegtekint**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~
~~felhasználónak~~ ~~engedélyezve~~ ~~van~~, ~~a~~ ~~bejegyzés~~ ~~verziószámát~~ ~~összehasonlítja~~ ~~a~~ ~~legutóbbi~~
~~frissítéssel~~, ~~és~~ ~~változás~~ ~~esetén~~ ~~meghívja~~ ~~a~~ ~~m~~ ~~eghívja~~ ~~a~~ ~~**S**~~ **_** ~~**49**~~ ~~**–**~~ ~~**Bejelentés**~~ ~~**adatok**~~
~~**lekérdezése**~~ ~~**(getBejelentesAdat)**~~ ~~eljárást~~, ~~aminek~~ ~~bemenő~~ ~~paraméterként~~ ~~átadja~~ ~~a~~
~~HUBA~~ ~~bejegyzés~~ ~~egyedi~~ ~~azonosítóját~~ ~~(~~ ~~**BEJEGYZES**~~ **_** ~~**ID**~~ ~~)~~ .

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - Bejelentő neve (’nev’): A HUBA.BEJEGYZES_BEJELENTO táblából kiolvasott NEV

értékét változatlan formában visszaadja az eljárás.

#99446 Amennyiben a mező értéke eléri a kliensen beállított értéket (túl hosszú),

akkor levégva kerül megjelenítésre, és "..."-tal kiegészíti az alkalmazás.
#99446_vége

    - Bejelentő törzsszáma (’torzsszam’): A HUBA.BEJEGYZES_BEJELENTO táblából

kiolvasott TORZSSZAM értékét változatlan formában visszaadja az eljárás.

    - Bejelentő telefonszáma (’telefonszam’): A HUBA.BEJEGYZES_BEJELENTO

táblából kiolvasott TELEFON értékét változatlan formában visszaadja az eljárás.

    - Bejelentés módja (’bejelentesModId’): A HUBA.BEJEGYZES táblából kiolvasott

BEJELENTES_MOD_ID alapján a K_BEJELENTES_MOD táblából a
BEJELENTES_MOD_ID alapján a BEJELENTES_MOD_NEV értéket visszaadja az
eljárás.

    - Bejelentés ideje (’bejelentesIdo’): A HUBA.BEJEGYZES táblából kiolvasott

BEJELENTES_IDO értékét változatlan formában visszaadja az eljárás.

    - Rögzítő neve (’letrehozoUser’): A HUBA.BEJEGYZES_BEJELENTO táblából

kiolvasott LETREHOZO_USER értékét alapján GVK_USERS táblából a
GVK_USER_ID alapján a GVK_USER_NAME értéket adja vissza az eljárás.

#99446 Amennyiben a mező értéke eléri a kliensen beállított értéket (túl hosszú),
akkor levégva kerül megjelenítésre, és "..."-tal kiegészíti az alkalmazás. [#99446_vége]

    - Rögzítő törzsszáma (’letrehozoUserTorzsszam’): A
HUBA.BEJEGYZES_BEJELENTO táblából kiolvasott LETREHOZO_USER értékét
alapján GVK_USERS táblából a GVK_USER_ID alapján az AD_USER_ID mentén
az AD_USERS táblából a TORZSSZAM értéket adja vissza az eljárás.

**Ablak működése:**

A csempe fejlécében két nyomógombos ikon található, amelyek működése az alábbiak

szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 23/43|


A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H03_01_BejelentesSzerkeszt** operandussal, ellenkező esetben nem

látható.

Kezelése esetén az alábbi folyamat zajlik le:

**H03_01 – HUBA – Bejelentés** képernyő szerkeszthetőségének ellenőrzése,
amihez a kliens meghívja a **K_15_01 – Szerkeszthetőség ellenőrzése**
**(GET_DATA_EDITABILITY)** eljárást, bemenő paraméterként átadva a képernyő
kódját **(H03_01)**, valamint a HUBA bejegyzés egyedi azonosítóját
**(BEJEGYZES_ID)** .

Az eljárástól válaszként egy numerikus érték érkezik. Amennyiben ez ’0’ (azaz
nulla), a képernyő szerkeszthető. Ettől eltérő érték a képernyőt aktuálisan
szerkesztő felhasználó GVK profil azonosítóját jelzi.

Szerkeszthetőség esetén a kliens megnyitja szerkesztésre a **H03_01 – HUBA –**
**Bejelentés** képernyő.

Ellenkező esetben hibaüzenetet küld az alábbiak szerint:

Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot, vagy megnyitja a
kívánt képernyőt megtekintési nézetben.

    - Megtekintés nyomógombos iko n (Tooltip: Megtekintés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H03_01_BejelentesMegtekint** operandussal, ellenkező esetben nem

látható.

Kezelése esetén új böngészűfülön megnyitja a kliens a **H03_01 – HUBA –**
**Bejelentés** képernyőt megtekintés módban.


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 24/43|


**2.2.3.4.** **H02_04 – Kód és hely**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H04_01_KodEsHelyMegtekint** operandust, és amennyiben a felhasználónak
engedélyezve van, meghívja az **S_53 – Kód és hely adatainak lekérdezése**
**(getHubaKodEsHely)** eljárást, aminek bemenő paraméterként átadja a HUBA
bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).

#94430 kezdete

Amennyiben még nem rögzítettek érintett helyeket a bejegyzéshez, a K ó d és hely
csempe az alábbiak szerint jelenik meg:

#94430 vége

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Kód és hely csempe az alábbiak szerint jelenik meg:

Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a fejlécből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:

„Nincs jogosultsága a Kód és hely megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával!”


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 25/43|


|#94153|Ablak/Lapfül frissítése|
|---|---|
|||


~~**Ablak/Lapfül**~~ ~~**frissítése**~~

~~A~~ „ ~~H02~~ ~~–~~ ~~HUBA~~ ~~–~~ ~~Bejegyzés~~ ~~kezelése”~~ ~~képernyő~~ ~~20mp-enként~~ ~~frissíti~~ ~~tar~~ tal ~~m~~ á ~~t~~, i ~~l~~ y ~~e~~ nk ~~o~~ r
~~a~~ ~~kliens~~ ~~ellenőrzi~~ ~~az~~ ~~**OP**~~ **_** ~~**H04**~~ **_** ~~**01**~~ **_** ~~**KodEsHelyMegtekint**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~

|Col1|Col2|
|---|---|
|frissítéssel, és változás esetén meghívja a meghívja a S_53 – Kód és hely adatainak Formatted: Strikethrough lekérdezése (getHubaKodEsHely) eljárást, aminek bemenő paraméterként átadja a Formatted: Strikethrough|Formatted: Strikethrough|
||Formatted: Strikethrough|


~~HUBA~~ ~~bejegyzés~~ ~~egyedi~~ ~~azonosítóját~~ ~~(~~ ~~**BEJEGYZES**~~ **_** ~~**ID**~~ ~~)~~ .

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - Késés főkód (’kesesFokod’) – szöveges érték, a HUBA.BEJEGYZES táblából

kiolvasott KESES_FOKOD alapján a K_KESESFOKOD táblából a K_ID alapján a
K_KOD és K_MEGNEVEZES értéket visszaadja az eljárás az alábbi formátumban:
K_KOD + „ – ” + K_MEGNEVEZES.

    - Szolgálati hely, Forgalmi szakasz és Topográfiai elem **[,]**, Hálózat, Terület, Forgalmi

csomópont, Állomásfőnökséget, Vonat és Jármű adatokat pedig a
HUBA.BEJEGYZES_HELYSZIN táblából listadobozban megjelenítve.

**Ablak működése:**

A csempe fejlécében két nyomógombos ikon található, amelyek működése az alábbiak

szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H04_01_KodEsHelySzerkeszt** operandussal, ellenkező esetben nem

látható.

Kezelése esetén az alábbi folyamat zajlik le:

**H04_01 – HUBA – Kód és hely** képernyő szerkeszthetőségének ellenőrzése,
amihez a kliens meghívja a **K_15_01 – Szerkeszthetőség ellenőrzése**
**(GET_DATA_EDITABILITY)** eljárást, bemenő paraméterként átadva a képernyő
kódját **(H04_01)**, valamint a HUBA bejegyzés egyedi azonosítóját
**(BEJEGYZES_ID)** .

Az eljárástól válaszként egy numerikus érték érkezik. Amennyiben ez ’0’ (azaz
nulla), a képernyő szerkeszthető. Ettől eltérő érték a képernyőt aktuálisan
szerkesztő felhasználó GVK profil azonosítóját jelzi.

Szerkeszthetőség esetén a kliens megnyitja szerkesztésre a **H04_01 – HUBA –**
**Kód és hely** képernyő.

Ellenkező esetben hibaüzenetet küld az alábbiak szerint:



**Formatted:** Strikethrough


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 26/43|


Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot, vagy megnyitja a
kívánt képernyőt megtekintési nézetben.

    - Megtekintés nyomógombos iko n (Tooltip: Megtekintés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H04_01_KodEsHelyMegtekint** operandussal, ellenkező esetben nem

látható.

Kezelése esetén új böngészűfülön megnyitja a kliens a **H04_01 – HUBA – Kód**
**és hely** képernyőt megtekintés módban.


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 27/43|


**2.2.3.5.** **H02_05 – Korlátozás**

#94430 kezdete

A korlátozások funkció a második szakaszban kerül megvalósításra, add i g fix en az alábbi
felirat jelenik meg:

#94430 vége


**Formatted:** C_normál


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 28/43|


**2.2.3.6.** **H02_06 – Értesítés kezelése**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése ” képernyő betöltésekor a kliens ell e nőrz i az
**OP_H06_06_ErtesitesMegtekint** operandust, és amennyiben a fel hasz nál ó nak

**(HUBA.Get_Ertesites_Lista)** eljárást, aminek bemenő paraméterként át adja a HUBA
bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).

#94430 kezdete

Amennyiben még nem rögzítettek értesítéseket a bejegyzéshez, az Ért esí tése k csem p e
az alábbiak szerint jelenik meg:

#94430 vége

Amennyiben a felhasználó nem rendelkezik a megtekintés hez sz ük séges
jogosultságokkal, úgy az Értesítések csempe az alábbiak szerint jelenik m eg:

Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a f ejléc ből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:


**Formatted:** Font: Bold


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 29/43|


„Nincs jogosultsága az Értesítések megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával! ”

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - Értesítés adatokat a HUBA.BEJEGYZES_ERTESITES táblából listadobozban

megjelenítve.

`o` Értesítés azonosítója (HUBA bejegyzésen belüli sorszám)
`o` Értesítés szintje
`o` Értesítés állapota
`o` Értesítés kiküldésének időpontja
`o` Értesítés szövege (max 3 sorig, a m ennyiben a szöveg hosszabb, levágja

a kliens és a végén „… ” szerepel)

**Ablak működése:**

A csempe fejlécében nyomógombos ikonok és ikon jelzések talál ható k, amely ek

működése az alábbiak szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)

A felhasználó számára csak a kkor érhető el, ha rendelkezik az
**OP_H06_06_ErtesitesSzerkeszt** ope ra n du ssal, ellenkező esetben nem látható.

Kezelése esetén új böngészűfülön meg nyitja a kliens a **H06_06** **–** **HUBA** **–**
**Értesítések kezelése** képernyőt szerkes zt és módban.

    - Megtekintés nyomógombos ikon (Tooltip: Megtekintés)

A felhasználó számára csak a kkor érhető el, ha rendelkezik az
**OP_H06_06_ErtesitesMegtekint** op era ndussal, ellenkező esetben nem látható.

Kezelése esetén új böngészűfülön megnyitja a kliens a **H06_06** **–** **HUBA** **–**
**Értesítések kezelése** képernyőt megt eki ntés módban.

    - Telefonos értesítés nagysága miatti jelző ikon (Tooltip: Telefonon értesítés)

Amennyiben bármely értesítésben be v a n állítva a Telefonos értesítés nagysága
miatt telefonos értesítés szüksége s op ció, abban az esetben megjelenik a
telefon ikon, ellenkező esetben nem lá tszik.

    - Értesítések száma badge ikon (Tooltip: Értesítések száma)

A bejegyzéshez tartozó értesítések szá m át mutatja, csak akkor látszódik, ha
értéke nagyobb, mint 0.

    - Értesítési napló megnyitása nyomógombos ikon (Tooltip: Értesítési napló
megnyitása)

operandussal, abban az esetben érhe t ől e l a nyomógomb, és kezelésére megnyílik a


**Formatted**

**Formatted:** Indent: Left: 2,47 cm, No bullets or numbering

**Formatted:** Indent: Left: 2,47 cm, No bullets or numbering

**Formatted:** Font: Bold

**Formatted:** Font: Bold


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 30/43|


Az operandus hiánya esetén a nyomóg ombos ikon nem látható.


**Formatted:** Indent: Left: 1,25 cm, First line: 1,22 cm


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 31/43|


~~**2.2.3.7**~~ ~~**.1.1.1.1.**~~ ~~**H**~~ ~~**02**~~ **_** ~~**07**~~ ~~**–**~~ ~~**Kifogáskezelés**~~


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 32/43|


**2.2.3.7.** **H02_07** **–** **K** **orlátozások**


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 33/43|


**2.2.3.8.** **H02_08 – Bejegyzés részletek**

**Csempe betöltés** [#96127]

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H08_01_BRMegtekint – HUBA bejegyzés részletek megtekintése** operandust, és
amennyiben a felhasználónak engedélyezve van, meghívja a **S_50 – Bejegyzés**
**részletek adatainak betöltése (GET_HUBA_RESZLETEK)** eljárást, aminek bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).

#94430 kezdete

Amennyiben még nem rögzítettek részlet információkat a bejegyzésh ez, a B eje gy zés
részletek csempe az alábbiak szerint jelenik meg:


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 34/43|


Részleges rögzítés esetén megjelennek az adatok és a hiányzó mezők es et éb en a „ **N** **i** **nc** **s**
**adat** ” felirat jelenik meg.

#94430 vége

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Bejegyzés részletek csempe az alábbiak szerint jelenik meg:

Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a fejlécből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:

„Nincs jogosultsága a Bejegyzés részletek megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával!”


|#94153|Ablak/Lapfül frissítése|
|---|---|
|||


**Formatted:** Strikethrough


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 35/43|


~~A~~ „ ~~H02~~ ~~–~~ ~~HUBA~~ ~~–~~ ~~Bejegyzés~~ ~~kezelése”~~ ~~képernyő~~ ~~20mp-enként~~ ~~frissíti~~ ~~tar~~ tal ~~m~~ á ~~t~~, i ~~l~~ y ~~e~~ nk ~~o~~ r
~~a~~ ~~kliens~~ ~~ellenőrzi~~ ~~az~~ ~~**OP**~~ **_** ~~**H08**~~ **_** ~~**01**~~ **_** ~~**BRMegtekint**~~ ~~**–**~~ ~~**HUBA**~~ ~~**bejegyzés**~~ ~~**részletek**~~
~~**megtekintése**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~ ~~felhasználónak~~ ~~engedélyezve~~ ~~van~~, ~~a~~
~~bejegyzés~~ ~~verziószámát~~ ~~összehasonlítja~~ ~~a~~ ~~legutóbbi~~ ~~frissítéssel~~, ~~és~~ ~~vált~~ o ~~z~~ ás ese ~~t~~ én
~~meghívja~~ ~~a~~ ~~m~~ ~~eghívja~~ ~~a~~ ~~**S**~~ **_** ~~**50**~~ ~~**–**~~ ~~**Bejegyzés**~~ ~~**részletek**~~ ~~**adatainak**~~ ~~**betöltése**~~
~~**(GET**~~ **_** ~~**HUBA**~~ **_** ~~**RESZLETEK)**~~ ~~eljárást~~, ~~aminek~~ ~~bemenő~~ ~~paraméterként~~ ~~átadja~~ ~~a~~ ~~HUBA~~
~~bejegyzés~~ ~~egyedi~~ ~~azonosítóját~~ ~~(~~ ~~**BEJEGYZES**~~ **_** ~~**ID**~~ ~~)~~ .

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - HUBA tárgya (’targy’) – szöveges érték, a képernyőterv alapján jelenik meg

    - HUBA kezdete (’kezdet_ido’) – dátum és idpont, a képernyőterv alapján

szöveges formában jelenik meg

    - HUBA vége (’vege_ido’) – dátum és idpont, a képernyőterv alapján szöveges

formában jelenik meg

    - HUBA állapota (’huba_allapot’) – szöveges érték, a képernyőterv alapján jelenik

meg

    - HUBA jellege, ahol a HUBA jelleg neve (’jelleg_nev’) szövegesen jelenik meg, a

saját színével (’jelleg_szin’)

    - HUBA felelősök, ahol a felelős szakágak színkódjaira (’felelos_szin’) színezett kör

alakú ikonok jelennek meg, és tooltipben látszódik a felelős szakág
megnevezése (’felelos_nev’)

    - HUBA leírások, ahol az összes leírás megjelenik kronológiai sorrendben az alábbi

formázással:

Létrehozás időpontja (’letrehozas_ido’)      - Létrehozó neve
(’letrehozo_user_name’) vastagon kiemelve, majd sortörést követően a
Tartalom (’szoveg’) normál betűkkel.

**Ablak működése:**

A csempe fejlécében ~~két~~ három nyomógombos ikon található, amelyek működése az

alábbiak szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H08_01_BRSzerkeszt** **–** **HUBA** **bejegyzés** **részletek** **szerkesztése**
operandussal, ellenkező esetben nem látható.

Kezelése esetén az alábbi folyamat zajlik le:

**H08 – HUBA – Bejegyzés részletek** képernyő szerkeszthetőségének
ellenőrzése, amihez a kliens meghívja a **K_15_01 – Szerkeszthetőség**
**ellenőrzése (GET_DATA_EDITABILITY)** eljárást, bemenő paraméterként átadva
a képernyő kódját **(H08)**, valamint a HUBA bejegyzés egyedi azonosítóját
**(BEJEGYZES_ID)** .


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 36/43|


Az eljárástól válaszként egy numerikus érték érkezik. Amennyiben ez ’0’ (azaz
nulla), a képernyő szerkeszthető. Ettől eltérő érték a képernyőt aktuálisan
szerkesztő felhasználó GVK profil azonosítóját jelzi.

Szerkeszthetőség esetén a klien megnyitja szerkesztésre a **H08 – HUBA –**
**Bejegyzés részletek** képernyő.

Ellenkező esetben hibaüzenetet küld az alábbiak szerint:

Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot, vagy megnyitja a
kívánt képernyőt megtekintési nézetben.

    - Megtekintés nyomógombos iko n (Tooltip: Megtekintés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H08_01_BRMegtekint – HUBA bejegyzés részletek megtekintése**
operandussal, ellenkező esetben nem látható.

Kezelése esetén új böngészűfülön megnyitja a kliens a **H08 – HUBA – Bejegyzés**
**részletek** képernyőt megtekintés módban.

    - #96127 Vasút ikon (Tooltip: Vasútvállalat : felsorolva a H08_01-en kiválasztott
Vasúrvállalatok )

Azt jelöli, hogy a bejegyzéshez lett e kiválasztva a H08_01-es ablakon
Vasútvállalat. Csak akkor látszódik, ha lett kiválasztva, és akkor tooltip-ben fel
van sorolva a kiválasztott vasútvállalatok. [#96127 vége]

**2.2.3.9.** **H02_09 – Kifogások** [[#96127]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/93801)

**Csempe betöltés**

A „H09 – HUBA – Kifogások kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H09_01_KifogasMegtekint – HUBA kifogások megtekintése** operandust és azt,
hogy a bejelentkezett felhasználónak milyen vasútvállalata van! (MÁV-os felhasználó
minden kifogás láthat, de VV-s „csak” a saját Kifogását láthatja!)

Amennyiben a felhasználónak engedélyezve van, meghívja a **S_75** **–**
**Bejegyzeskifogások lista lekérdezése (HUBA.Get_Kifogasok_Lista)** eljárást, aminek
bemenő paraméterként átadja a HUBA bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 37/43|


Amennyiben még nem rögzítettek Kifogást adott bejegyzéshez, a Kifogások részletek
csempe az alábbiak szerint jelenik meg: „Még nem rögzítettek kifogást ehhez a HUBA
bejegyzéshez.”.

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges operandussal,
úgy a Korlátozások csempe az alábbiak szerint jelenik meg: „Nincs jogosultsága a
Bejegyzés korlátozásaihoz! Vegye fel a kapcsolatot a rendszer adminisztrátorával!”




-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 38/43|


Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a fejlécből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - Értesítés adatokat a HUBA.BEJEGYZES_KIFOGAS táblából listadobozban

megjelenítve.

`o` Kifogás sorszáma (HUBA bejegyzésen belüli sorszám)

`o` Vasútvállalat

`o` Kifogás állapota

**Ablak működése:**

A csempe fejlécében két nyomógombos ikon található, amelyek működése az alábbiak

szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H09_01_KifogasSzerkeszt** VAGY **OP_H09_01_KifogasBiralo** operandussal,

ellenkező esetben nem látható.

    - Megtekintés nyomógombos ikon (Tooltip: Megtekintés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H09_01_KifogasMegtekint** operandussal, ellenkező esetben nem látható.

Kezelése esetén új ~~/~~ side nav-on megnyitja a kliens a **H09_01 – HUBA –**
**Kifogások kezelés** képernyőt megtekintés módban.


**Formatted:** Highlight


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 39/43|

### **2.2.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **




















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapért. érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Fejléc||||||||
|||||||||
|HUBA történet csempe||||||||
|-|HUBA történet|-|Scrollozható szöveges megjelenítő|-|-|-|HUBA_ACTIVITY, HUBA_ACTIVITY_TEMPLATE|
|||||||||
|Belső megjegyzés csempe||||||||
|-|Belső megjegyzések|-|Scrollozható szöveges megjelenítő|-|-|-|BEJEGYZES_MEGJEGYZES|
|-|Megjegyzés szöveg|-|Szabad szöveges beviteli mező|1000|-|-|BEJEGYZES_MEGJEGYZES|
|Küldés|Küldés|-|Nyomógomb|-|-|-|-|
|Bejelentés csempe||||||||
|Bejelentő neve|Bejelentő neve|-|szabad szöveges megjelenítő|-|Bejelentő neve (Bejelentő törzsszáma)|-|BEJEGYZES_BEJELENTO|
|Bejelentő telefonszáma|Bejelentő telefonszáma|-|szabad szöveges megjelenítő|-|-|-|BEJEGYZES_BEJELENTO|
|Bejelentés módja|Bejelentés módja|-|szabad szöveges megjelenítő|-|-|-|K_BEJELENTES_MOD|
|Bejelentés ideje|Bejelentés ideje|-|dátum és időpont megjelenítő|-|éééé.hh.nn óó:pp|-|BEJEGYZES_BEJELENTO|
|Rögzítő neve|Rögzítő neve|-|szabad szöveges megjelenítő|-|Rögzítő neve (Rögzítő törzsszámma)|-|BEJEGYZES_BEJELENTO|
|Kód és hely csempe||||||||
|Késés főkód|Késés főkód|-|szabad szöveges megjelenítő|-|Késés főkód – Késés főkód neve|-|K_KESESFOKOD|

#### Érintett helyek Érintett helyek - listadoboz 
#### Hely ikonja | Hely azonosítója – Hely é

### - BEJEGYZES_HELYSZIN


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 40/43|

















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapért. érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|-|Kifogások listája|-|listadoboz|-|Kifogás sorszáma | Vasútvállalat | Kifogás állapota ||-|BEJEGYZES_KIFOGAS|
|Értesítés csempe||||||||
|||||||||
|||||||||
|Bejegyzés részletek csempe||||||||
|HUBA tárgya|HUBA tárgya|-|szabad szöveges megjelenítő|-|-|-|BEJEGYZES|
|HUBA kezdetének időpontja|HUBA kezdetének időpontja|-|dátum és időpont megjelenítő|-|éééé.hh.nn óó:pp|-|BEJEGYZES|
|HUBA végének időpontja|HUBA végének időpontja|-|dátum és időpont megjelenítő|-|éééé.hh.nn óó:pp|-|BEJEGYZES|
|HUBA állapota|HUBA állapota|-|szabad szöveges megjelenítő|-|-|-|K_BEJEGYZES_ALLAPOT|
|HUBA felelős|HUBA felelős|-|grafikus megjelenítő|-|-|-|K_SZAKAG|
|HUBA jellege|HUBA jellege|-|szabad szöveges megjelenítő|-|-|-|K_JELLEG|
|HUBA rövid leírása|HUBA rövid leírása|-|Scrollozható szöveges megjelenítő|-|-|-|BEJEGYZES_LEIRAS|
|||||||||


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 41/43|


**Nyomógombok**




|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
|---|---|---|---|---|
|||Szerkesztés|||
|||Megtekintés|||
||||||


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 42/43|


**2.2.6.** **Hívott szolgáltatások**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés||S_54 – Belső megjegyzés adatainak betöltése (GET_HUBA_CHAT)|
|Ablakbetöltés||S_56 – HUBA történet betöltése (GET_HUBA_ACTIVITY)|
|Ablakbetöltés||S_50 – Bejegyzés részletek adatainak betöltése (GET_HUBA_RESZLETEK)|
|Ablakbetöltés||S_49 – Bejelentés adatok lekérdezése (getBejelentesAdat)|
|Ablakbetöltés||S_53 – Kód és hely adatainak lekérdezése (getHubaKodEsHely)|
|#96127 Ablakbetöltés||S_75 – Bejegyzes kifogások lista lekérdezése (HUBA.Get_Kifogasok_Lista)|
|Szerkesztés nyomógomb ikonok||K_15_01 – Szerkeszthetőség ellenőrzése (GET_DATA_EDITABILITY)|
|Küldés nyomógomb||S_55 – Belső megjegyzés mentése (SET_HUBA_CHAT)|


**2.2.7.** **Rendszerüzenetek**

Nincs. vagy

|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
||||
||||
||||
||||
||||



**2.2.8.** **Kódtáblák, választási listák**

Nincs.

**2.2.9.** **Rendszerparaméterek**

Nincs. vagy

Helye: /src/BackEnd/GvkBackend/WebApi/appsettings.json

|Rendszerparaméter neve|Rendszerparaméter jelentése|Default érték|Beállított érték|
|---|---|---|---|
|||||
|||||
|||||


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 43/43|


-----



03.md :::
|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 1/19|

# – GVK_UC_H03  HUBA_Bejelentő RÉSZLETES RENDSZERTERV
## 2024. május 17.
### V1.0


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 2/19|

#### **Dokumentum történet **

Kidolgozó változtatások követése










|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|7.0|2024.05.17|#89245 H03_01_HUBA_Bejelentő ablak kialakítása|Kovács Eszter|Ellenőrizhető|
|7.0|2024.05.27.|#89247 - H03_01_HUBA_Bejelentő ablak - 'Eseményt bejelentő'|Kovács Eszter|Ellenőrizhető|
|7.0|2024.05.27.|#89248 - H03_01_HUBA_Bejelentő ablak - 'Bejelentés módja', 'Bejelentés telefonszáma' és 'Bejelentés ideje'|Kovács Eszter|Ellenőrizhető|
|7.0|2024.05.27.|#89249 - H03_01_HUBA_Bejelentő ablak - 'Rögzítő' és 'Rögzítés ideje'|Kovács Eszter|Ellenőrizhető|
|7.0|2024.05.27.|#89250 - H03_01_HUBA_Bejelentő ablak - 'Jelentéstől eltérő rögzítés ideje'|Kovács Eszter|Ellenőrizhető|
|7.0|2024.05.27.|#89251 - H03_01_HUBA_Bejelentő ablak - nyomógombok|Kovács Eszter|Ellenőrizhető|
|7.0|2024.09.12|#93801 - GVK - HUBA - Pre_activity_ID töltése|Vörös Gábor|Ellenőrizhető|
|7.0|2024.09.24|#89383 - HUBA betűkód kivezetése|Berkesi Ádám|Ellenőrizhető|
|7.0|2024.09.26.|#94357 - HUBA - H03_01 - HUBA azonosító megjelenítése|Kovács Eszter|Ellenőrizhető|
|7.0|2024.10.17|#92775 - DB mentés sikertelenségéről felhasználó tájékoztatása|Kovács Eszter|Ellenőrizhető|
|7.1|2025.01.14|#96564 - HUBA - Konkurenskezelés trace condition megoldása|Vörös Gábor|Elkészült|
|7.2|2025.01.21|#98613 - HUBA - Global AD-ból keresés 3 karakter megadását követően - első 3 karakter|Kovács Eszter|Ellenőrizhető|


MÁV SZK Ellenőrzések követése



|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.05.17|MÁV Véglegesítésre átadható|Kovács Eszter||
||||||
||||||
||||||


MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
||||||
||||||
||||||
||||||


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 3/19|

#### **1. Általános ismertetés **
##### **1.1. A használati eset modulkapcsolatai **

**Szolgáltatások leírásának elérhetősége:**

[GVK_webalkalmazás_szolgáltatások.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1301)
##### **1.2. A használati eset célja, feladatai **

A használati eset célja a egy HUBA bejegyzéshez kapcsolódó bejelentés adatok

megadása.

Feladata, hogy lehetőséget biztosítson

     - a rögzített bejegyzéshez kapcsolódó bejelentés adatainak megadása.

     - a rögzített bejelentés adatok megtekintésére.


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 4/19|

#### **2. A használati eset ablakai **
##### **2.1. Ablakok közötti kapcsolat, navigálás **


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 5/19|

##### 2.2. UC_H03 -HUBA – Bejelentés [#89245]

**2.2.1.** **Ablak feladatai**

#89245 A „ **H03_01** **- HUBA - Bejelentő** ” ablak a „ **H02_01** - **HUBA - Bejegyzés kezelése** ” ablakról

nyitható meg, a „ *Bejelentő szerkesztése* ” vagy „ *Bejelentő megtekintése* ” nyomógomb

kezelését követően nyílik meg azon GVK profil azonosítójű felhasználó számára akihez az

     - **OP_H03_01_BejelentésSzerkeszt**

     - **OP_H03_01_BejelentésMegtekint** operandus hozzzá van rendelve.

**2.2.2.** **Ablak megjelenése** [#89245]

A „ **H03_01** **- HUBA – Bejelentő”** ablak új böngésző lapon nyílik meg, és kétféle módban
nyitható meg:

    - Szerkesztés/Rögzítés

    - Megtekintés

**2.2.3.** **Ablak működése** [#89245]

Az ablak megnyitása az „ **H02_01** - **HUBA - Bejegyzés kezelése** ” felületen található

„ *Bejelentő szerkesztése* ” vagy „Bejelentő megtekintése” nyomógomb kezelését követően

történik új böngésző lapon. A rendszer az „ **H03_01** **- HUBA - Bejelentő** ” ablakot maximum

egyszer nyitja meg új böngésző lapon. Amennyiben az „ **H02_01** - **HUBA - Bejegyzés kezelése** ”

ablakról többször próbálja meg a GVK profil azonosítójú felhasználó megnyitni, a korábban

megnyitott „ **H03_01** **- HUBA - Bejelentő** ablak frissül az alapértelmezett módon.

#89245 A („ *Bejelentő szerkesztése* ”) nyomógomb csak azon GVK profil azonosítójú

van rendelve.



-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 6/19|


A („ *Bejelentő megtekintése* ”) nyomógomb csak azon GVK profil azonosítójú felhasználó

számára érhető el akihez az **OP_H03_01_BejelentésMegtekint** operandusok hozzá van

rendelve.

**Az ablak felépítése**

     - Az ablak kitölti a teljes képernyőt.

     - Fejléc

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet
használatakor a fejléc háttérszíne középszürke (7F7F7F).

#82283 Üzemi (PROD)

#82283 Felhasználói teszt (QA)

Képernyőfotó a megvalósítás után.

#82283 Belső teszt (TEST)

#82283 Fejlesztői (DEV)

Képernyőfotó a megvalósítás után.

`o` Középen az ablak azonosítóját és megnevezését: „ **H03_01** **- HUBA -**

**Bejelentés** ”

`o` #58495 Jobb szélen:

            - Rendszer neve és logója, valamint [#70030] a rendszer neve alatt a

frontend verziószáma jelenik meg.

            - A logó előtt a GVK környezet neve:

               - üzemi (PROD): Nem jelenik meg a kliensen.

               - #66395 felhasználói teszt (QA): „ **QA** ”

               - teszt (TEST): „ **TEST** ”

               - fejlesztői (DEV): „ **DEV** ”

            - #82283 GVK profil név:
A GVK-ba történt bejelentkezéskor érvényes GVK profil név
megjelenítésére szolgál. [#82283 vége ]

     - Fejléc alatt az alábbi két adat jelenik meg:

`o` #94357 HUBA Azonosító


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 7/19|


`o` #89383 ~~HUBA~~ ~~Betűkód~~ #89383

**Az ablak működési leírása**

A képernyő kettő különböző módban nyitható meg, a továbbiakban eszerint tagolva
kerül bemutatásra a működés. Megnyitási módok:

     - Szerkesztés/Rögzítés

     - Megtekintés

**Az ablak működési leírása**

A képernyő kettő különböző módban nyitható meg:

     - Szerkesztés/Rögzítés

Ebben az esetben a „ **H03_01** **- HUBA - Bejelentő** ” ablak mentésével jön létre a
Bejelentő adatai,a konkurenskezelés aktív.

     - Megtekintés

Megtekintés esetén betöltéskor feltöltődnek a mezők a korábban mentett
tartalommal, minden mező inaktív, és nincs konkurenskezelés sem.

**#** 89245, #96564 **Ablak betöltés**

Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, az alábbi sorrendben
hajtódik végre az ablak betöltése. A kliens meghívja az „ **S_27 – Felhasználói aktivitás**
**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H03_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Modify”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

A kliens az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól kétféle módon kaphat

vissza értéket:

Amennyiben az **„EDITABILITY”** mezőben ’0’ (azaz nulla) érték érkezik, és **„ACTIVITY_ID”** érték
is érkezik a válaszban, a kliens folytatja konkurenskezelés indításával a folyamatot, és a

felahasználó szerkesztheti a kívánt adatelemet.


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 8/19|


Amennyiben az **„EDITABILITY”** mezőben ’0’ (azaz nulla) érték érkezik, és az **„ACTIVITY_ID”**
mező nem tartalmaz értelmezhető adatot (azaz az értéke NULL), abban az esetben valamilyen
adatbázis oldali hiba történt, és az alábbi hibaüzenet kerül megjelenítésre, majd az OK-ra
kattintva a képernyő bezárul:

Amennyiben az eljárástól válaszként az **„EDITABILITY”** mezőben egy ’0’-tól (azaz nullától)
eltérő numerikus érték érkezik, abban az esetben egy másik felhasználó már szerkeszti a kívánt
adatelemet, ezért a kliens hibaüzenetet küld az alábbiak szerint:

Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot (amivel a teljes képernyő is bezárul),
vagy megnyitja a kívánt képernyőt megtekintési nézetben, és a képernyő betöltésének
végrehajtása ott folytatódik.

Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, és a felhasználói aktivitás
logolásnál kapitt vissza érvényes **„ACTIVITY_ID”** -t, azzal elindítja a Konkurenskezelés
életjelküldés funkcióját, a **„K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)”** függvény 20mpént (rendszerparaméterben meghatározott) történő meghívásával.
Az életjel küldés funkció minden esetben ellenőrizni fogja a munkamenet érvényességét, és

eszerint választ küld a kliensnek az alábbiak szerint:

  - „OK” – a függvény frissítette a munkamenetet, a szerkesztés folytatható

  - „CEASED_ACTIVITY” – valamilyen esemény folytán a munkamenet megszakadt, de a

munkamenet még nem került a háttérben lezárásra. Ilyenkor a felhasználó dönthet,
hogy folytatja-e a munkát. Ez az eset akkor fordulhat elő, ha az életjel küldés legutóbb
1 percnél korábban futott le, de még nem érte el a 10 percet (rendszerparaméterben
meghatározott időzítések).

A kliens az alábbi üzenetet jeleníti meg:


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 9/19|


`o` amennyiben a felhasználó ilyenkor azt választja, hogy folytatja a munkamenetet

(Igen-re kattint), ezt megteheti, és a rendszer úgy kezeli, mintha a munkamenet
folyamatos lett volna. Ebben az esetben a kliens meghívja a **„K_15_03 – Életjel**
**küldés ellenőrzés nélkül (SET_DATA_FORCE_LIFESIGN)”** eljárást az „ **S_27 –**
**Felhasználói aktivitás naplózása** ” szolgáltatástól WindowOpen eseménykor
visszakapot „ **ACTIVITY_ID** ”-val, amely ellenőrzés nélkül végrehajtja az életjel
küldés funkciót, így a továbbiakban folytatható a munkamenet a normál
kerékvágásban.

`o` a felhasználó dönthet úgy is, hogy a munkamenetet lezárja (Nem-re kattint),

ami egy <Mégsem> gomb megnyomásával egyenértékű, azaz a kliens mentés
nélkül bezárja a képernyőt. Ebben az esetben a <Mégsem> gomb megnyomása
esetén leírt folyamatok hajtódnak végre.

 - „CLOSED_ACTIVITY” – valamilyen esemény folytán a munkamenet megszakadt, és a

munkamenet a háttérben már lezárásra került, a szerkesztés NEM folytatható. Ebben
az esetben a kliensnek mentés nélkül be kell zárnia a képernyőt. Ilyen akkor fordulhat
elő, ha hosszabb kihagyás (rendszerparaméterben meghatározandó –
alapértelmezetten 10 perc) után küldött a kliens újra életjelet.

A kliens az alábbi üzenetet jeleníti meg:

Az <OK> gombra kattintás után a <Mégsem> gomb megnyomása esetén leírt
folyamatok hajtódnak végre.

 - „ERROR:MISSING_ACTIVITY” – valamilyen hiba folytán a munkamenet nem található,

akkor az eljárás ezt az üzenetet küldi vissza, majd bezárja a képernyőt.


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 10/19|


Az <OK> gombra kattintás után a <Mégsem> gomb megnyomása esetén leírt
folyamatok hajtódnak végre.

Amennyiben a felhasználó megtekintésre nyitotta meg a képernyőt, a kliens meghívja az „ **S_27**
**– Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H03_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „View”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

#89248 Ezután a kliens minden kereső paraméterre vonatkozóan meghívja az „ **S_08 - Lekérdezési**
**paraméterek értékkészletének lekérdezése** ” szolgáltatást, bemenő paraméterként átadva
neki az adatelem azonosítóját (AutosuggestId).

Az S_08 hívások és az átadott értékek:

     - Bejelentő

     - Bejelentés módja

A kliens az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ” szolgáltatás
hívások során visszakapott listaszerű adatokkal feltölti az autocomplete (kiválasztási)
funkcióval rendelkező szöveges beviteli mezők értékkészletét. A listákban az S_08 szolgáltatás
által visszaadott ’text’ paraméter értékei jelennek meg.

A „ **H03_01** **- HUBA - Bejelentő”** ablak kétféle módon nyitható meg az **„** **H02_01** - **HUBA -**
**Bejegyzés kezelése”** ablakról, melyek az alábbiak:

  - Szerkesztés/Rögzítés

`o` Amennyiben a felhasználó rögzítésre nyitotta meg a képernyőt, a kliens az

„ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól visszakapot
„ **ACTIVITY_ID** ”-val, elindítja a Konkurenskezelés életjelküldés funkcióját, a
**„K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)”** függvény 20mp-ént történő
meghívásával.
`o` A képernyő az alábbiak szerint töltődik fel tartalommal:

        - Rögzítő neve – bejelentkezett GVK profil neve és ()-ben törzsszáma

        - Rögzítés ideje – a „ **H03_01** **- HUBA – Bejelentő”** ablak megnyitásának

ideje
`o` A többi mező üres, a GVK profil azonosítójú felhasználónak kell tartalommal

feltöltenie.

`o` A megadott adatok nem módosíthatóak.


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 11/19|



  - Megtekintés

`o` A GVK profil azonosítójú felhasználó semmin nem módosíthat, csak a

< **Mégsem**       - gomb kezelhető.
`o` Az **„** **S_49** **– Bejelentés adatok lekérdezése (getBejelentesAdat)”** eljárás

meghívásra került az **„H02_01**        - **HUBA - Bejegyzés kezelése”** ablakon lévő
HUBA azonosítóval, ami feltölti a szükséges mezőket a képernyőn.

**Kereső paraméterek megadása**

A felületen minden egyes kereső paraméter az alábbi vezérlőkkel rendelkezik:

     - **Autocomplete beviteli mező** : A mezőbe kattintáskor még nem jelenik meg a

lista, csak az három karakter beírása után vagy a lefelé nyíl gomb kezelésekor.
A beírt szövegtöredék alapján a rendszer folyamatosan frissíti a lista tartalmát,
melyben csak a megadott szövegtöredékkel [#98613] kezdődő ~~tartalmazó~~ értékek
#98613 vége jelennek meg. A legördülő listából kiválasztva egy sort (egér
kattintással vagy az ENTER gomb megnyomásával) a mezőben felvételre kerül a
kiválasztott érték, valamint a beírt szűrő értéket törli a rendszer, továbbá a lista
eltűnik. A listában nem szereplő, invalid (érvénytelen) értéket a kliens
automatikusan eltávolítja a mező elhagyásakor. Kereséskor 3 karakter
megadáást követően kezdődik el a keresés. [#98613] (A megadott 3 karakter a név
elejére keres csak, nem tartalmazzára)

       - **Dátum és időpont választás naptárból** : A mezőben a
ikonra kattintva választható ki egy nap. Az aktuális nap háttérszíne halvány

rózsaszín.

**Ablak működése**

Az **„** **H03_01** **- HUBA – Bejelentő”** ablak az alábbi adatbeviteli mezőket tartalmaz,
amelyek az alábbi funkciókkal és szabályokkal bírnak:

     - #89247 **Bejelentő neve:** a mező kitöltése kötelező (kötelezőzés jelzése piros
kerettel, az ablak betöltésekor piros kerettel és felirattal jelenik meg. Global
AD user neve vagy szabad szövegesen beírt név rögzíthető. Kereséskor töredék
információkra is elindítható a keresés, ~~tartalmazó~~ ~~kereséssel~~ [#] [98613 ] név eleji
egyezéssel [#98613], de minimum 3 karaktert meg kell adnia a GVK profil
azonosítójú felhasználónak. ()-ben a kiválasztott AD-s felhasználó törzsszámát
is meg kell jeleníteni.

     - #89248 **Bejelentő telefonszáma** : Global AD-s felhasználó esetén az AD-ban
szereplő telefonszám. Ez módosítható, átírható csak numerikus karakterekkel.
Ha a Bejelentés módja= ’Telefon’ kiválasztás esetén kötelezően kitöltendő
mező a *’Bejelentő telefonszáma*

     - *’* [#89248] **Bejelentés módja:** a mező kitöltése kötelező (kötelezőzés jelzése piros

kerettel), az ablak betöltésekor piros kerettel és felirattal jelenik meg, és a GVK
profil azonosítójú felhasználónak 4 választási lehetőség közül kell megadnia


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 12/19|


egyet, amely hatására a mező felirata és kerete zöldre változik. ’Telefon’
kiválasztás esetén kötelezően kitöltendő mező a *’Bejelentő telefonszáma’* .

     - #89248 **Bejelentés ideje:** a mező kitöltése kötelező (kötelezőzés jelzése piros
kerettel), az ablak betöltésekor a ~~*’Rögzítés*~~ ~~*idejével’*~~ ~~töltődik~~ ~~fel~~, ~~de~~ ~~átírható~~,
~~módosítható~~ . ~~Nem~~ ~~lehet~~ ~~régebbi~~ ~~a~~ ~~rögzítés~~ ~~idejénél~~ . ~~Formátuma:~~ ~~’ÉÉ/HH/NN~~

     - #89249 **Rögzítő neve:** a rögzítést végző GVK Felhasználó neve és ()-ben a
törzsszáma. Értéke nem módosítható.

**Nyomógombok működése** [#89251]

**Mentés**

Csak szerkesztés módban érhető el,

A **Mentés** nyomógomb csak azon GVK profil azonosítójú

felhasználó számára elérhető, akihez az **OP_H03_01_BejelentésSzerkeszt** operandus

hozzá van rendelve.

Ha a GVK profil azonosítójú felhasználó a < **Mentés**    - gombra kattint, első körben egy

ellenőrzés kerül lefuttatásra az alábbiak szerint:

       - *’Bejelentő neve’* mező kitöltésre került-e

       - *’Bejelentő telefonszáma’* mező kitöltésre került-e, ha a ’Bejelentés módja’

a ’Telefon’ érték lett kiválasztva.

       - *’Bejelentés módja’* mező kitöltésre került-e

#92775 eleje Amennyiben a fenti feltételek teljesülnek, az ablak meghívja a **„S_47 –**
**Bejelentés adatok mentése (setBejelentesAdat)”** eljárást, visszakapott SQL kód
alapján jelenít meg pop-up ablakban:

       - A mentés sikeres, ha a státusz kód 200-as.

`o` A képernyőn az alábbi folyamatok futnak le a lenti sorrendben:




-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 13/19|


`o` A böngésző ablak be fog záródni”. Ha a GVK profil azonosítójú

felhasználó az < **Rendben>** -ra kattint, az **„** **H03_01** **- HUBA –**
**Bejelentő”** ablak bezáródik.

`o` Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, a

kliens az **„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól
(WindowOpen eseménykor) visszakapot **„ACTIVITY_ID** ”-val, soron
kívül elindítja a Konkurenskezelés életjelküldés funkcióját, a
**„K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)”** függvény
meghívásával.

`o` Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, a

kliens lezárja a munkamenetet a **„K_15_04 – Munkamenet lezárás**
**(SET_DATA_CLOSE)”** eljárás meghívásával, amihez bemenő
paraméterként az **„S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatástól (WindowOpen eseménykor) visszakapot
**„ACTIVITY_ID** ”-t küldi be.

`o` A mentést követően a kliens meghívja az „ **S_27 – Felhasználói**

**aktivitás** **naplózása** ” szolgáltatást az alábbi bemenő
paraméterekkel:

`o` Ablakazonosító (’WINDOW_ID’): „H03_01”
`o` Esemény (’ACTIVITY’): „Create”
`o` AD felhasználó (’AD_USER’): bejelentkezett felhasználó

AD azonosítója
`o` GVK felhasználó (’GVK_USER’): GVK felhasználói profil

azonosítója
`o` Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON

formában a mentés részletei

`o` Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés

azonosítója
`o` Bejegyzés sub azonosító (’SUB_ID’): NULL
`o` Előzmény felhasználói aktivitás azonosító
(’PRE_ACTIVITY_ID’): A WindowOpen eseménykor
kapott **ACTIVITY_ID.**


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 14/19|



       - Ha a mentés nem sikeres 599-es vagy 400-as státusz kódot kap a kliens.

Mindkét esetben az alábbi hibaüzenetet kell megjeleníteni, a kapott

RequiestId-val. [#92775] [vége]

**Mégsem**

Ha a GVK profil azonosítójú felhasználó a < **Mégsem** - gombra kattint, **Mégsem** gombra
kattintva a kliens ellenőrzi, hogy történt-e bármilyen adatmódosítás a képernyőn (csak új
felvitel módban), és ha igen, az alábbi üzenetet küldi:

Ha a felhasználó az **Igen** opciót választja, a képernyő mentés nélkül bezárul, a **Nem** opció
esetén pedig a felhasználó folytathatja a munkát a „ **H03_01** **- HUBA – Bejelentő”** képernyőn.

Amennyiben a képernyő bezárásra kerül, és a felhasználó szerkesztés módban nyitotta meg a
képernyőt, a kliens meghívja a **„K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)”** eljárást,
amihez bemenő paraméterként az **„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól
(WindowOpen eseménykor) visszakapot **„ACTIVITY_ID** ”-t küldi be. Ezzel zárja a

munkamenetet.

**Ablak bezárása**

A képernyő bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H03_01”

  - Esemény (’ACTIVITY’): WindowClose

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Create” vagy „View” a megnyitás

módjától függően

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 15/19|



 - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A WindowOpen

eseménykor kapott **ACTIVITY_ID.**


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 16/19|

### **2.2.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|Col9|Col10|Col11|
|---|---|---|---|---|---|---|---|---|---|---|
|Fejléc|||||||||||
|HUBA azonosító|||||||HUBA.BEJEGYZES.B EJEGYZES_ID||||
|VK89383HUBA kód|||||||HUBA.BEJEGYZES. VK89383||||
|Bejelentés adatok|||||||||||
|Bejelentő neve|Bejelentő neve|-|Szöveges beviteli mező kiválasztás és szöveges beviteli funkcióval||||HUBA.BEJEGYZES_ BEJELENTO.NEV||||
|Bejelentő telefonszám|Bejelentő telefonszáma|-|Szöveges beviteli mező (csak numerikus)||||HUBA.BEJEGYZES_ BEJELENTO.TELEFO N||||
|Bejelentés módja|Bejelentés módja|-|||||HUBA.BEJEGYZES. BEJELENTES_MOD _ID||||
|Bejelentés ideje|Bejelentés ideje|-|Dátum és idő beviteli mező|12|ÉÉÉÉ/HH/NN ÓÓ:PP||HUBA.BEJEGYZES. BEJELENTES_IDO||||
|Rögzítő neve|Rögzítő neve|-|Szöveges beviteli mező||Co||HUBA.BEJEGYZES_||||
|||||||mm ented [EK4]: 2024.07.1|8-|BÁNE mJEóLdoEsNultT! O|.||
||||||||LETREHOZO_USER||||
|Rögzítés ideje|Rögzítés ideje|--|Dátum és idő beviteli mező|12|ÉÉÉÉ/HH/NN ÓÓ:PP Co||HUBA.BEJEGYZES.||||
|||||||mmented [K3E5]: 2024.06.|27L-EeiTmRegEbHeszOélZésA sSze_riInDt nOe|||m ke|


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 17/19|


**Nyomógombok**





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
|---|---|---|---|---|
||Mentés||Nem megnyomható (kötelező mezők és további feltételek teljesülése esetén lesz kezelhető)||
||Mégsem||Megnyomható||


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 18/19|


**2.2.6.** **Hívott szolgáltatások**







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés||S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés (konkurenskezeléssel)||K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)|
|Ablakbetöltés||S_08 - Lekérdezési paraméterek értékkészletének lekérdezése|
|Ablakbetöltés||S_49 – Bejelentés adatok lekérdezése (getBejelentesAdat)|
|Konkurenskezelés (lejárt munkamenet visszaszerzésekor)||K_15_03 – Életjel küldés ellenőrzés nélkül (SET_DATA_FORCE_LIFESIGN)|
|Mentés (konkurenskezeléssel)||K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)|
|||S_47 – Bejelentés adatok mentése (setBejelentesAdat)|
|Mentés (konkurenskezeléssel)||K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)|
|||S_27 – Felhasználói aktivitás naplózása|
|Mégsem (konkurenskezeléssel)||K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)|
|Böngésző ablak bezárása||S_27 – Felhasználói aktivitás naplózása|


**2.2.7.** **Rendszerüzenetek**

Nincs. vagy







|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|<Mégsem> nyomgógomb megnyomásakor, ha a GVK profil azonosítójú felhasználó nem mentette a módosításait.|„Biztosan elveti a módosításoka?(I/N)”|Eldöntendő (I/N)|
|ha a munkamenet megszakadt, de még a lezárási időn belül van.|Aktuális munkamenet lejárt. Kívánja folytatni?|Eldöntendő (I/N)|
|ha a munkamenet megszakadt, és le is záródott.|Aktuális munkamenete lezárult, nem folytatható. Kattintson az OK-ra a képernyő bezárásához.|Figyelmeztető|
|ha a munkamanet kezelésekor hiba történt|Hiba történt, aktuális munkamenete nem található. Kattintson az OK-ra a képernyő bezárásához.|Figyelmeztető|
|#92775 Az új rekord mentése sikertelen|A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX|Hibaüzenet|


-----

|GVK_UC_H03_01|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 19/19|


**2.2.8.** **Kódtáblák, választási listák**

Nincs.

**2.2.9.** **Rendszerparaméterek**

Nincs. vagy

Helye: /src/BackEnd/GvkBackend/WebApi/appsettings.json

|Rendszerparaméter neve|Rendszerparaméter jelentése|Default érték|Beállított érték|
|---|---|---|---|
|||||
|||||
|||||


-----



04.md :::
|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 1/33|

# – GVK_UC_H04  HUBA Kód és hely RÉSZLETES RENDSZERTERV
## 2024. május 22.
### V1.0


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 2/33|

#### **Dokumentum történet **

Kidolgozó változtatások követése





|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|7.0|2024.06.13.|#89370: H04_01_HUBA_Kód_és_hely ablak - KésésFőKód választás + naplózása|Kovács Eszter|Folyamatban|
|7.0|2024.06.19.|#89371: H04_01_HUBA_Kód_és_hely ablak - 'Topográfiai elem' kiválasztása|Kovács Eszter|Folyamatban|
|7.0|2024.06.19.|#89250: H04_01_HUBA_Kód_és_hely ablak kialakítása|Kovács Eszter|Folyamatban|
|7.0|2024.06.19.|#89372: H04_01_HUBA_Kód_és_hely ablak - 'Terület' kiválasztása|Kovács Eszter|Folyamatban|
|7.0|2024.06.26|#89373:H04_01_HUBA_Kód_és_hely ablak - 'Szakasz' kiválasztása|Kovács Eszter|Folyamatban|
|7.0|2024.07.29.|#89375 - H04_01_HUBA_Kód_és_hely ablak - 'Jármű / Vonat / Egyéb' kiválasztása tab kialakítása|Kovács Eszter|Folyamatban|
|7.0|2024.07.29.|#893783 - H04_01_HUBA_Kód_és_hely ablak - HUBA betűkód|Kovács Eszter|Folyamatban|
|7.0|2024.07.29.|#89383: H04_01_HUBA_Kód_és_hely ablak - HUBA betűkód + azonosító|Kovács Eszter|Folyamatban|
|7.0|2024.08.14.|#89385 - GVK - Területi lehatárolás felhasználása|Kovács Eszter|Folyamatban|
|7.0|2024.08.27.|#93153 - H04_01 - HUBA Kód és hely ablak - Törlés és piktogram kezelés|Kovács Eszter|Folyamatban|
|7.0|2024.08.29.|#93236 - H04_01 - HUBA Kód és hely ablak - HUBA azonosító|Kovács Eszter|Folyamatban|
|7.0|2024.09.04|#93505 - H04_01 - HUBA Kód és hely ablak - ablaknavigáció|Kovács Eszter|Folyamatban|
|7.0|2024.09.12|#93801 - GVK - HUBA - Pre_activity_ID töltése|Vörös Gábor|Ellenőrizhető|
|7.0|2024. 09. 24.|#89383 – GVK HUBa betűkód kivezetése|Berkesi Ádám|Ellenőrizhető|
|7.0|2024.10.17|#92775 - DB mentés sikertelenségéről felhasználó tájékoztatása|Kovács Eszter|Ellenőrizhető|
|7.0|2024.10.28|#95441 - HUBA - H04_01 - Terület érték automatikus feltöltése értékkel|Kovács Eszter|Ellenőrizhető|
|7.1|2025.01.14|#96564 - HUBA - Konkurenskezelés trace condition megoldása|Vörös Gábor|Elkészült|
|7.2|2025.01.21|#98613 - HUBA - Global AD-ból keresés 3 karakter megadását követően - első 3 karakter|Kovács Eszter|Ellenőrizhető|
|7.0|2025.03.25.|#100650 - GVK - HUBA - H04_01 - A főkódok között csak azokat lehessen kiválasztani, aminél a <ResJelzo> tag-ben „1” érték szerepel|Kovács Eszter|Folyamatban|


MÁV SZK Ellenőrzések követése



|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.05.17|MÁV Véglegesítésre átadható|Kovács Eszter||
||||||
||||||


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 3/33|


MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
||||||
||||||
||||||
||||||


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 4/33|

#### **1. Általános ismertetés **
##### **1.1. A használati eset modulkapcsolatai **

**Szolgáltatások leírásának elérhetősége:** [#95441 ]

[GVK_webalkalmazás_szolgáltatások.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1301)


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 5/33|

##### **1.2. A használati eset célja, feladatai **

A használati eset alapvető célja, hogy a Bejegyzés

  - Késés főkódjának megadása

  - helyének rögzítését támogatja.


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 6/33|

#### **2. A használati eset ablakai **




-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 7/33|

##### 2.2. UC_H04_01 -HUBA – Kód és hely [#89250]

**2.2.1.** **Ablak/lap feladatai**

A „ **H04_01** **- HUBA – Kód és hely** ” ablak vagy a

   - „ **H01_01 - HUBA - Bejegyzések** ” ablakon lévő <Új> nyomógombra kattintással

vagy

   - „ **H02_01**    - **HUBA - Bejegyzés kezelése** ” ablakról nyitható meg, a „ *Kód és hely*

*szerkesztése* ” vagy *„Kód és hely megtekintése* ” nyomógomb kezelését

követően nyílik meg, azon GVK profil azonosítójű felhasználó számára akihez az

     - **OP_H04_01_KodEsHelySzerkeszt**

     - **OP_H04_01_KodEsHelyMegtekint** operandus hozzzá van rendelve.

**2.2.2.** **Ablak megjelenése**

A „ **H04_01** **- HUBA – Kód és hely** ” ablak új böngésző lapon nyílik meg, és három féle
módban nyitható meg:

    - Új felvitele, szerkesztés – operandus : **OP_H04_01_KodEsHelySzerkeszt**


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 8/33|



   - Megtekintés – operandus: **OP_H04_01_KodEsHelyMegtekint**


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 9/33|


**2.2.3.** **Ablak működése** [#89250]

A „ **H04_01** **- HUBA – Kód és hely** ” ablak a

vagy

       - „ **H02_01**       - **HUBA - Bejegyzés kezelése** ” ablakról nyitható meg, a „ *Kód és hely*

*szerkesztése* ” vagy *„Kód és hely megtekintése* ” nyomógomb kezelését

követően történik új böngésző lapon. ~~A~~ ~~rendszer~~ ~~az~~ „ ~~**H04**~~ **_** ~~**01**~~ ~~**-**~~ ~~**HUBA**~~ ~~**–**~~ ~~**Kód**~~ ~~**és**~~ ~~**hely**~~ ~~”~~
~~ablakot~~ ~~egy~~ ~~bejegyzés~~ ~~vonatkozásában~~ ~~maximum~~ ~~egyszer~~ ~~nyitja~~ ~~meg~~ ~~új~~ ~~böngésző~~
~~lapon~~ . Amennyiben a „ **H04_01** **- HUBA – Kód és hely** ” ablakot többször szeretné
megnyitni szerkesztésre, a konkurens kezelés miatt felugró ablak fogja a Felhasználót
fogadni.

Amennyiben az „ **H02_01**    - **HUBA - Bejegyzés kezelése** ” ablakról többször próbálja meg
a GVK profil azonosítójú felhasználó megnyitni, a korábban megnyitott „ **H04_01** **-**
**HUBA – Kód és hely”** ablak frissül az alapértelmezett módon.

**Az ablak felépítése**

     - Az ablak kitölti a teljes képernyőt.

     - Fejléc

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet
használatakor a fejléc háttérszíne középszürke (7F7F7F).

#82283 Üzemi (PROD)



-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 10/33|


#82283 Felhasználói teszt (QA)

Képernyőfotó a megvalósítás után.

#82283 Belső teszt (TEST)

#82283 Fejlesztői (DEV)

Képernyőfotó a megvalósítás után.

`o` Középen az ablak azonosítóját és megnevezését: „ **H04_01** **- HUBA – Kód és**

**hely** ”

`o` #58495 Jobb szélen:

         - Rendszer neve és logója, valamint [#70030] a rendszer neve alatt a

frontend verziószáma jelenik meg.

         - A logó előtt a GVK környezet neve:

             - üzemi (PROD): Nem jelenik meg a kliensen.

             - #66395 felhasználói teszt (QA): „ **QA** ”

             - teszt (TEST): „ **TEST** ”

             - fejlesztői (DEV): „ **DEV** ”

         - ~~#82283~~ GVK profil név:
A GVK-ba történt bejelentkezéskor érvényes GVK profil név
megjelenítésére szolgál. [#82283 vége ]

      - #89383 Fejléc alatt az alábbi két adat jelenik meg:

`o` #93236 HUBA Azonosító ( BEJEGYZES.HUBA_AZONOSITO)

      - A tartalmi rész három nagyobb részből áll:

`o` Felső sor (Késés főkód és [#89838] ~~HUBA~~ ~~Betűkód~~ [#89838] )
`o` a bal oldalon található TAB-onként elkülönítve, a kiválasztható

helyszínek.

`o` Jobb oldalon egy táblázat (listbox) található, amelyben a

kiválasztott, hozzáadott helyszín(ek) felsorolva jelen(nek) meg

**Az ablak működési leírása** [[#89250]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)

A képernyő három különböző módban nyitható meg:

    - Új felvitel

„ **H01_01 - HUBA - Bejegyzések** ” ablakon lévő <Új> nyomógombra kattintásal
lehetséges. Ebben az esetben a „ **H04_01** **- HUBA – Kód és hely** ” képernyő


**Formatted:** Strikethrough

**Formatted:** Strikethrough


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 11/33|


mentésével jön létre a Bejegyzés és a hozzá tartozó helyszín. Ebben az esetben
nincs konkurenskezelés. A HUBA azonosító a <Mentés> nyomógombra
kattintáskor generálódik le.

     - Szerkesztés

„ **H02_01**        - **HUBA - Bejegyzés kezelése** ” ablakról indíthatja a „ *Kód és hely*
*szerkesztése* ” nyomógombról. A meglévő Bejegyzés helyszínének szerkesztése
esetén betöltéskor feltöltődnek a mezők a korábban mentett tartalommal,

illetve a konkurenskezelés is aktív.

     - Megtekintés

„ **H02_01**        - **HUBA - Bejegyzés kezelése** ” ablakról indíthatja a „ *Kód és hely*
*megtekintése* ” nyomógombról. Megtekintés esetén betöltéskor feltöltődnek a
mezők a korábban mentett tartalommal, minden mező inaktív, és nincs

konkurenskezelés sem.

**Ablak betöltés** **[#96564 ]**

Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, az alábbi sorrendben
hajtódik végre az ablak betöltése. A kliens meghívja az „ **S_27 – Felhasználói aktivitás**
**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H04_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Modify”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

A kliens az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól kétféle módon kaphat

vissza értéket:

Amennyiben az **„EDITABILITY”** mezőben ’0’ (azaz nulla) érték érkezik, és **„ACTIVITY_ID”** érték
is érkezik a válaszban, a kliens folytatja konkurenskezelés indításával a folyamatot, és a

felahasználó szerkesztheti a kívánt adatelemet.

Amennyiben az **„EDITABILITY”** mezőben ’0’ (azaz nulla) érték érkezik, és az **„ACTIVITY_ID”**
mező nem tartalmaz értelmezhető adatot (azaz az értéke NULL), abban az esetben valamilyen
adatbázis oldali hiba történt, és az alábbi hibaüzenet kerül megjelenítésre, majd az OK-ra
kattintva a képernyő bezárul:


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 12/33|


Amennyiben az eljárástól válaszként az **„EDITABILITY”** mezőben egy ’0’-tól (azaz nullától)
eltérő numerikus érték érkezik, abban az esetben egy másik felhasználó már szerkeszti a kívánt
adatelemet, ezért a kliens hibaüzenetet küld az alábbiak szerint:

Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot (amivel a teljes képernyő is bezárul),
vagy megnyitja a kívánt képernyőt megtekintési nézetben, és a képernyő betöltésének
végrehajtása ott folytatódik.

Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, és a felhasználói aktivitás
logolásnál kapitt vissza érvényes **„ACTIVITY_ID”** -t, azzal elindítja a Konkurenskezelés
életjelküldés funkcióját, a **„K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)”** függvény 20mpént (rendszerparaméterben meghatározott) történő meghívásával.
Az életjel küldés funkció minden esetben ellenőrizni fogja a munkamenet érvényességét, és

eszerint választ küld a kliensnek az alábbiak szerint:

  - „OK” – a függvény frissítette a munkamenetet, a szerkesztés folytatható

  - „CEASED_ACTIVITY” – valamilyen esemény folytán a munkamenet megszakadt, de a

munkamenet még nem került a háttérben lezárásra. Ilyenkor a felhasználó dönthet,
hogy folytatja-e a munkát. Ez az eset akkor fordulhat elő, ha az életjel küldés legutóbb
1 percnél korábban futott le, de még nem érte el a 10 percet (rendszerparaméterben
meghatározott időzítések).

A kliens az alábbi üzenetet jeleníti meg:

`o` amennyiben a felhasználó ilyenkor azt választja, hogy folytatja a munkamenetet

(Igen-re kattint), ezt megteheti, és a rendszer úgy kezeli, mintha a munkamenet


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 13/33|


folyamatos lett volna. Ebben az esetben a kliens meghívja a **„K_15_03 – Életjel**
**küldés ellenőrzés nélkül (SET_DATA_FORCE_LIFESIGN)”** eljárást az „ **S_27 –**
**Felhasználói aktivitás naplózása** ” szolgáltatástól WindowOpen eseménykor
visszakapot „ **ACTIVITY_ID** ”-val, amely ellenőrzés nélkül végrehajtja az életjel
küldés funkciót, így a továbbiakban folytatható a munkamenet a normál
kerékvágásban.

`o` a felhasználó dönthet úgy is, hogy a munkamenetet lezárja (Nem-re kattint),

ami egy <Mégsem> gomb megnyomásával egyenértékű, azaz a kliens mentés
nélkül bezárja a képernyőt. Ebben az esetben a <Mégsem> gomb megnyomása
esetén leírt folyamatok hajtódnak végre.

  - „CLOSED_ACTIVITY” – valamilyen esemény folytán a munkamenet megszakadt, és a

munkamenet a háttérben már lezárásra került, a szerkesztés NEM folytatható. Ebben
az esetben a kliensnek mentés nélkül be kell zárnia a képernyőt. Ilyen akkor fordulhat
elő, ha hosszabb kihagyás (rendszerparaméterben meghatározandó –
alapértelmezetten 10 perc) után küldött a kliens újra életjelet.

A kliens az alábbi üzenetet jeleníti meg:

Az <OK> gombra kattintás után a <Mégsem> gomb megnyomása esetén leírt
folyamatok hajtódnak végre.

  - „ERROR:MISSING_ACTIVITY” – valamilyen hiba folytán a munkamenet nem található,

akkor az eljárás ezt az üzenetet küldi vissza, majd bezárja a képernyőt.

Az <OK> gombra kattintás után a <Mégsem> gomb megnyomása esetén leírt
folyamatok hajtódnak végre.

Amennyiben a felhasználó megtekintésre nyitotta meg a képernyőt, a kliens meghívja az „ **S_27**
**– Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H04_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 14/33|



  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „View”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Amennyiben a felhasználó rögzítésre nyitotta meg a képernyőt, a kliens meghívja az „ **S_27 –**
**Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H04_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Create”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

[#89370](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370) Ezután a kliens minden kereső paraméterre vonatkozóan meghívja az „ **S_08 -**
**Lekérdezési paraméterek értékkészletének lekérdezése** ” szolgáltatást, bemenő
paraméterként átadva neki az adatelem azonosítóját (AutosuggestId).

Az S_08 hívások és az átadott értékek:

     - #89370 Késés főkód (’kesesFokod’)

     - #89371 Forgalmi szakasz (’ForgalmiSzakasz_H04_01’)

     - #89371 Szolgálati hely (’SzolgalatiHely_ H04_01’)

     - #89371 Hálózati elem tipusa (’HalozatiElemTipusa_ H04_01’)

     - #89371 Topográfiai elem (’TopografiaiElem_ H04_01’)

     - #89372 Terület (’terulet_H04_01’)

     - #89372 Forgalmi csomópont (’ForgalmiCsomopont_H04_01’)

     - #89372 Állomás főnökség (’Allomasfonokseg_H04_01’)

     - #89373 Hüsz vonal (’HuszVonal_ H04_01’)

     - #89373 Szolgálati hely tól-ig-1 (’SzakaszSzolgalatiHelyTolIg1’)

     - #89373 Szakasz tól-ig-1 (’SzakaszTolIg1’)

     - #89375 Munkatárs (’Munkatars_H04_01’)

     - #89375 Főkategória (’Fokategoria_H04_01’)

     - #89375 Alkategória (’Alkategoria_H04_01’)

      - [#89372](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370) Hálózat (’Halozat_H04_01’)

     

-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 15/33|


A kliens az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ”
szolgáltatás hívások során visszakapott listaszerű adatokkal feltölti az autocomplete
(kiválasztási) funkcióval rendelkező szöveges beviteli mezők értékkészletét. A listákban
az S_08 szolgáltatás által visszaadott ’text’ paraméter értékei jelennek meg.

Szerkesztés és megtekintés esetén a kliens ezután meghívja az **„S_53 – Kód és hely**
**adatainak lekérdezése (getHubaKodEsHely)** ” eljárást a HUBA bejegyzés egyedi
azonosítóját átadva bemenő paraméterként, amely JSON-ban adja vissza a
megjelenítendő adatokat. [#95441 ] Illetve a „ **S_74** **– Bejelentkezett GVK user terület**
**adatának lekérdése (HUBA.Get_Gvk_User_Terulet)** ” eljárás is meghívásra kerül ezt
követően. [ #95441 vége]

Kiválasztott elem törlése:

Rákattintva törölhető a mellette található kiválaszott értékkészletből a kiválasztott

érték.

Amennyiben a felső értékkészletben a kiválasztott érték törlődik, úgy a hiearchiában
alatta lévő beviteli mezőkben kiválasztott érték törlődjön. (Egyéb TAB esetén a Leírás
mezőben szereplő érték is törlődjön.)

**Az ablak működési leírása** [[#89250]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)

Az **OP_H04_01_KodEsHelySzerkeszt** operandus megléte esetén a felhasználó új

felvitelre és szerkesztésre is megnyithatja a „ **H04_01** **- HUBA – Kód és hely** ”

képernyőt. Ezt már a „ **H01_01**    - **HUBA – Bejegyzések** **”** és **„** **H02_01**    - **HUBA -**

**Bejegyzés kezelése”** ablakon ellenőrzi a rendszer, és csak akkor nyomható meg az

<új> és <Kód és hely szerkesztés> ikon, ha a fenti operandus engedélyezett a

felhasználónak.

Az **OP_H04_01_KodEsHelyMegtekint** operandus esetén csak megtekintésre
nyithatja meg a képernyőt. Ezt szintén már a **„** **H02_01**     - **HUBA - Bejegyzés kezelése”**
ablakon ellenőrzi a rendszer, és csak akkor nyomható meg a megtekintés ikon, ha
a fenti operandus engedélyezett a felhasználónak.

Megtekintés módban a felhasználó semmilyen mezőt nem szerkeszthet.

**2.2.3.1.** **Fejléc** [[#89250, #89383]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)

A fejléc alatt az alábbi két adat jelenik meg:

   - HUBA Azonosító [, ] ~~[#89383]~~ [ #93236 ]


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 16/33|


`o` Felépítése: BEJEGYZES. HUBA_AZON OSITO ~~BEJEGYZES~~ . ~~LETREHOZAS~~ _ ~~IDO~~ ~~**-**~~

~~BEJEGYZES~~ . ~~NAPI~~ _ ~~SORSZAM~~ (Pl: 20240718-0001)

         - A LETREHOZAS_IDO mezőből csak az ÉÉÉÉ.HH.NN értéke kell

(Óra:perc:mp nem kell)

         - A NAPI_SORSZAM 4 karakter hosszú, és naponta újrakezdődik (pl:

20240730-0001)

`o` ~~Rendszer~~ ~~által~~ ~~képzett~~ ~~azonosító~~, ~~a~~ ~~Felhasználó~~ ~~által~~ ~~megadott~~ ~~adatokból~~ .

~~Felépítése:~~

~~▪~~ ~~BEJEGYZES~~ . ~~LETREHOZAS~~ _ ~~IDO~~ ~~(dátum-~~ ~~időpont)~~ ~~-~~

~~▪~~ ~~BEJEGYZES~~ . ~~KESES~~ _ ~~FOKOD~~

~~▪~~ ~~**–**~~

~~▪~~ ~~Felvehető~~ ~~értékek:~~

~~▪~~ ~~**:**~~ ~~(csak~~ ~~ha~~ ~~van~~ ~~megadva~~ ~~HUBA~~ ~~szabad~~ ~~szöveges~~ ~~rész)~~

~~▪~~ ~~HUBA~~ ~~szabad~~ ~~szöveges~~ ~~rész~~

~~Példa:~~ ~~20240731-1417-99-XXXX~~ ~~:~~ ~~alm~~ ~~a~~ [#89838]

**2.2.3.2.** **Felső sor** [#89250]

A TAB-ok felett az alábbi mezők érhetőek el, jeleníthetőek meg:

   - [#89370](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370) **Késés főkód: OP_H04_01_KodEsHelySzerkeszt operandus megléte esetén a**
mező kitöltése kötelező, az ablak betöltésekor piros kerettel és felirattal jelenik
meg (megtekintés esetén a már kiválaszott adat jelenik meg), és a GVK profil
azonosítójú felhasználónak ki kell választania egyet, amely hatására a mező
felirata és kerete zöldre változik. **OP_H04_01_KodEsHelyMegtekint** operandussal
a mező inaktív. Módosítható adat. [#100650 eleje ] Csak azon Késés főkódok közül lehet
választani, aminek a K_RES_JELZO=’1’. [#100650 vége]

~~(maximum~~ ~~10karakter~~ ~~hosszút~~ ~~lehessen~~ c ~~sa~~ k ~~megadni)~~

**2.2.3.3.** ~~**Hálózati**~~ **Topográfiai elem – H04_01A** **[[#89371]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)**


**Formatted:** Strikethrough

**Formatted:** Strikethrough


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 17/33|


**’Topográfiai elem kiválasztása forgalmi szakaszról** ’ vagy ’ **’Topográfiai elem kiválasztása**
**szolgálati helyről’** paraméterek egyike tölthető csak ki.

    - **Topográfiai elem kiválasztása forgalmi szakaszról** : Opcionális. Amennyiben a

„Topográfiai elem kiválasztása szolgálati helyről” mezőben érték van kiválasztva
,akkor ezen mező inaktívvá válik.

**VAGY**

    - **Topográfiai elem kiválasztása szolgálati helyről** : Opcionális. Amennyiben a

„Topográfiai elem kiválasztása forgalmi szakaszról” mezőben érték van
kiválasztva, akkor ezen mező inaktívvá válik.

    - **Topográfiai elem típusa** : Opcionális. Értékkészletből lehet kiválasztani. A

felvehető értékek listája attól függ, hogy milyen „Topográfiai elem” választható

ki.

    - **Topográfiai elem** : Opcionális. Kiválasztható értékkészlete függ, hogy mi a

kiválasztott érték a „Topográfiai elem kiválasztása forgalmi szakaszról” vagy a
**„** Topográfiai elem kiválasztása szolgálati helyről” mezőkben, ~~vagy~~ ~~sincs~~ . Illetve,
hogy milyen adatot jelenítünk meg, az függ a kiválasztható topográfiai elem
OBJEKTUM_TIPUS értékétől, hogy adott elem milyen tulajdonságát jelenítünk
meg/ keresünk benne. (3 karakter megadását követően keresünk),

< **Hozzáadás** - nyomógombra kattintáskor az alábbi esetek lehetségesek ezen a TAB-on:

  - Forgalmi szakasz kiválasztása

  - Szolgálati hely kiválasztása

  - Topográfiai elem kiválasztása




-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 18/33|


**2.2.3.4.** **Terület – H04_01B** **[[#89372]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)**

 - **Hálózat** : Alapértelmezetten a „Máv Zrt.”érték van kiválasztva. Lehet az a felhasználó

döntése, hogy a kiválasztott hálózatot adja Hozzáadás nyomógombbal a kiválasztott

helyszínhez, ilyen esetben Területet nem választ ki.

 - **Terület** : a mező kitöltése nem kötelező. A mező aktív, A MÁV Zrt-hez tartozó összes

érvényes területből tud a felhasználó választani, de lehet az a döntése, hogy a
kiválaszott Területet adja Hozzáadás nyomógombbal a kiválasztott helyszínhez. [#95441]

A Terulet mezőbe alapértelmezetten a rögzítést végző GVK-s felhasználó Terület

értéke van kiválasztva, amelyet módosíthat a Felhasználó.

 - **Forgalmi csomópont:** a mező kitöltése nem kötelező. A mező inaktív marad addig,

amit ’Terület’ kiválasztása nem történik meg. A kiválasztható értékkészlet függ, hogy

milyen ’Terület’ lett kiválasztva. (csak adott Területhez tartozó érvényes Forgalmi

csomópont közül lehet választani.) Lehet az a felhasználó döntése, hogy a kiválasztott

Forgalmi csomópontot adja Hozzáadás nyomógombbal a kiválasztott helyszínhez.

 - **Állomásfőnökség:** a mező kitöltése nem kötelező. A mező inaktív marad addig, amit

’Forgalmi csomópont’ kiválasztása nem történik meg. A kiválasztható értékkészlet
függ, hogy milyen ’Forgalmi csomópont’ lett kiválasztva. (csak adott Forgalmi
csomóponthoz tartozó érvényes Állomásfőnökségek közül lehet választani.


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 19/33|


< **Hozzáadás** - nyomógombra kattintáskor az alábbi esetek lehetségesek ezen a TAB-on:

  - Hálózat

  - Terület

  - Forgalmi csomópont

  - Állomásfőnökség

**2.2.3.1.** **Szakasz H04_01C** [[#89373]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)

  - **HÜSZ vonal:** a mező kitöltése nem kötelező. Felvehető értékek hüsz vonalszámok.

Lehet az a felhasználó döntése, hogy a kiválasztott hüsz vonalat adja Hozzáadás

nyomógombbal a kiválasztott helyszínhez, ilyen esetben nem választ ki mást a
felületen, csak HÜSZ vonalat.

**Szolgálati hellyel:**

  - **Szolgálati hely (tól-ig)1:** a mező kitöltése nem kötelező. A mező inaktív marad addig,

amit ’hüsz vonal’ kiválasztása nem történik meg. A kiválasztható értékkészlet függ,
hogy milyen ’hüsz vonal’ lett kiválasztva. (adott hüsz vonalon lévő érvényes és
sorszámozott forgalmi szakasz szolgálati hely -tól és -ig értékekből lehet választani.)

  - **Szolgálati hely (tól-ig)2:** a mező kitöltése nem kötelező. A mező inaktív marad addig,

amit ’szolgálati hely (tól-ig)1’ kiválasztása nem történik meg. A kiválasztható
értékkészlet függ, hogy milyen ’hüsz vonal’ és milyen lett Szolgálati hely (tól-ig)1 lett
kiválasztva. (adott hüsz vonalon lévő érvényes és sorszámozott forgalmi szakasz
szolgálati hely -tól és -ig értékekből lehet választani, sorrendben felsorolva)


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 20/33|


**Szelvénnyel:**

  - **Szelvény (tól-ig)1:** a mező kitöltése nem kötelező. A mező inaktív marad addig, amig

’szolgálati hely (tól-ig)1’ és ’szolgálati hely (tól-ig)2’ mezők kiválasztása nem történik
meg. A kiválasztható értékkészlet függ, hogy milyen ’szolgálati hely (tól-ig)1’ és
’szolgálati hely (tól-ig)2’ lett kiválasztva.

  - **Szelvény (tól-ig)2:** a mező kitöltése nem kötelező. A mező inaktív marad addig, amig

’szolgálati hely (tól-ig)1’ és ’szolgálati hely (tól-ig)2’ és Szelvény (tól-ig)1 mezők
kiválasztása nem történik meg. A kiválasztható értékkészlet függ, hogy milyen
’szolgálati hely (tól-ig)1’ és ’szolgálati hely (tól-ig)2’ lett kiválasztva.

< **Hozzáadás** - nyomógombra kattintáskor az alábbi esetek lehetségesek ezen a TAB-on:

   - Ha csak a HÜSZ vonal kerül kiválasztásra, ilyenkor HÜSZ vonal kerül megadásra,

hozzáadásra.

   - Ha a ’Szolgálati hely (tól-ig)1’ = ’Szolgálati hely (tól-ig)2’

          - Ilyenkor egy Szolgálati hely kerül kiválasztásra

(Azonosító=’Szolgálati hely (tól-ig)1’=’Szolgálati hely (tól-ig)2’)

(RAILWAY_OBJECT_ID)

`o` Ha a kiválaszott ’Szolgálati hely (tól-ig)1’ érték nem egyezik meg ’Szolgálati

hely (tól-ig)2’ értékkel

          - A kiválasztott ’Szolgálati hely (tól-ig)1’ és ’Szolgálati hely (tól-ig)2’

és ’HÜSZ vonal’ értékek alapján 1 vagy több Forgalmi szakasz

azonosítóható be, akkor ilyen esetben adott Forgalmi szakasz kerül

hozzáadásra kiválasztott helyszínhez. (BEJEGYZES_HELYSZIN.

SZOLGHELY_TOL és BEJEGYZES_HELYSZIN. SZOLGHELY_IG)

   - Ha a Szelvény (tól-ig)1 és Szelvény (tól-ig)2 mezőben kerül érték kiválasztva,

akkor Szelvény lett kiválasztva. (BEJEGYZES_HELYSZIN.SZELVENY_TOL és

BEJEGYZES_HELYSZIN.SZELVENY_IG)

**2.2.3.2.** **Jármű/Vonat/Egyéb** [[#89375]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 21/33|


**Vonat**

  - **Vonatazonosító:** mező kitöltése nem kötelező. Szabad szöveges mező.

  - **Közlekedési dátum:** mező kitöltése nem kötelező, de ha a ’Vonatazonosító’ érték meg

an adva, akkor kötelező tölteni. Dátum formátumban megadható érték.

**Jármű**

  - **Pályaszám / egyéb azonosító :** mező kitöltése nem kötelező. Abban az esetben lehet

meadni, ha a Vonat részen nincs megadva adat. Formai ellenőrzés szükséges ezen
beviteli mezőre. Amennyiben a formai ellenőrzésen nem megfelelő adat kerül
berögzítésre, úgy kérik a „Nem szabványos” feliratot kiírni. (példa: 378478381304,
314621871206)

  - Ellenőrzés:

`o` 12 jegyű kell legyen és csak számokat tartalmazhat
`o` Ezen kívül az ellenőrzőszámnak (a 12. jegye) megfelelőnek kell lennie

(modulo10)

       - Balról az első 11 szám páratlan helyértékű számjegyeit 2-vel meg kell

szorozni, a páros helyértékűeket saját értékükön kell figyelembe venni:

3 7  8 4  7 8 3 8 1 3 0 -> 6  7  16  4  14  8  6  8  2  3  0

       - A szorzatok szájegyeit össze kell adni:

6 7 16 4  14  8  6  8  2  3  0 -> 6 7  7 4  5 8 6 8  2 3 0

       - Majd ezeket is össze kell adni:

6+7+7+4+5+8+6+8+2+3+0=56


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 22/33|



       - A végösszeg (56) egyes helyértékén adódó számot 10-ből ki kell vonni, a

maradék a helyes ellenőrző szám:

10-6=4

~~•~~ ~~Ha~~ ~~a~~ ~~12~~ . ~~szám~~ ~~nem~~ ~~egyenlő~~ ~~a~~ ~~hely~~ es ~~ellenőrző~~ ~~számmal~~ ~~(4)~~ ~~akkor~~ ~~a~~ ~~mező~~

~~hibás~~, ~~alatta~~ ~~a~~ „ ~~Az~~ ~~ellenőrzőszám~~ ~~hi~~ b ~~ás~~ . ~~”~~ ~~üzenet~~ ~~jelenik~~ ~~meg~~ .
```
     o

```
**Egyéb**

Főkategória nincs kiválasztva. Kiválasztható értékei függnek a kiválasztott
Főkategóriától.

  - **Munkatárs:** a mező kitöltése nem kötelező. Global AD user neve vagy szabad

szövegesen beírt név rögzíthető. . Kereséskor töredék információkra is elindítható a
keresés, ~~tartalmazó~~ ~~kereséssel~~ [#] [98613 ] név eleji egyezéssel [#98613], de minimum 3 karaktert
meg kell adnia a GVK profil azonosítójú felhasználónak.

Amennyiben a felső értékkészletben a kiválasztott érték törlődik, úgy a hiearchiában alatta
lévő beviteli mezőkben kiválasztott érték törlődjön. (Egyéb TAB esetén a Leírás mezőben
szereplő érték is törlődjön.)

< **Hozzáadás** - nyomógombra kattintáskor az alábbi esetek lehetségesek:

   - Vonat: Vonatazonosító / Közlekedési dátum (pl:1033/2024.08.06)

   - Jármű: Pályaszám/ egyéb azonosító (pl: 189745698213548)

– kistermetű)

**2.2.3.3.** **Kiválasztott helyszín** [[#89250]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)

A „ **H04_01** **- HUBA – Kód és hely** ” ablak Helyszín kiválasztásának szekció két fő részből

épül fel:

    - a bal oldalon található TAB-onként elkülönítve, a kiválasztható helyszínek.

    - Jobb oldalon egy táblázat (listbox) található, amelyben a kiválasztott, hozzáadott

helyszín(ek) felsorolva jelen(nek) meg.






-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 23/33|


Amikor a GVK profil azonosítójú felhasználó kiválaszt egy helyszínt és a

táblázatba.

Visszafelé úgyműködik, hogy a „Kiválasztott helyszínből” törlendő elemet kijelöljük, és a
Törlésre kattint. Ekkor a kiválasztott helyszín eltűnik a listából.
A táblázat a kiválasztott helyszíneket mutatja.

#93153 A táblázatban az alábbi típusokhoz megjelenítendő ábrák láthatóak:













|Szimbólum|HELYSZIN_TIPUS NEV|HELYSZIN_ TIPUS_ID|IKON_NEV|
|---|---|---|---|
||Szolgálati helyek|1|szolghely.png|
||Peronok|2|peron.png|
||Alállomások|3|alallomas.png|
||Gázolaj feladó és lefejtőkutak|4|gazolajkut.png|
||Kitérők|5|kitero.png|
||Alagutak|6|alagut.png|
||Szelvények|7|szelveny.png|
||Hidak|8|hid.png|
||Jármű ellenőrző berendezések|9|jarmuellenorzo.png|
||Fény bejárati-, kijárati- és fedezőjelzők|10|fenyjelzo.png|
||Térközjelzők|11|terkozjelzo.png|
||Alakjelzők|12|alakjelzo.png|
||Elő-, ismétlő- és mellékvonali ellenőrző jelzők|13|ismetlojelzo.png|


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 24/33|







|Col1|Tolatásjelzők|14|tolatasjelzo.png|
|---|---|---|---|
||Megállj! Jelzők|15|megalljjelzo.png|
||Tolatási határjelzők|16|thjelzo.png|
||Fázishatárok|17|fazishatar.png|
||Vágányzáró sorompók, siklasztósaruk|18|vaganyzaro.png|
||Biztonsági határjelzők|19|bizthatarjelzo.png|
||Sorompók|20|sorompo.png|
||Útátjárók|21|utatjaro.png|
||Forgalmi szakasz|22|forgszakasz.png|
||HÜSZ vonal|23|husz.png|
||Vonat/Közlekedési dátum|24|vonat.png|
||Jármű (Nem vonatban lévő)|25|jarmu.png|
||Hálózat|26|halozat.png|
||Terület|27|terulet.png|
||Forgalmi csomópont|28|forgcsompont.png|
||Állomásfőnökség|29|allomasfonokseg.png|


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 25/33|


**Nyomógombok működése** [[#89250]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)

**Hozzáadás**

szerkesztés módban érhető el/ nyomható meg) a „ **H04_01** **- HUBA – Kód és hely** ”
ablakon az alábbi folyamatok futnak le a lenti sorrendben:

     - #89385 Jogosultság kiértékelés: Amennyiben olyan kiválaszott helyszín van
(forgalmi szakasz vagy szolgálati hely) amelynek van hierarchia szintje és a
rögzítést végző GVK-s felhasználóhoz beállított hierarchia eltér, úgy egy felugró
pop-up ablakban hívja fel a rögzítő figyelmét, hogy: „ **S_61** – Hierarchia adatok
lekérése (HUBA.Get_Hierarchia_adat)”

     
`o` < **Ok**       - nyomógomb: Lefutásra kerül
`o` < **Mégsem**       - a felugró ablak bezáródik, és a kiválaszott helyszínhez nem

adódik hozzá az elem.

     
#93153 **Törlés**

rendszer törölt státuszúra állítja az adott HELYSZIN_ID-t.
(BEJEGYZES_HELYSZIN.TOROLT=I), a továbbiakban nem jelenik meg a kiválasztott
helyszín listában.

**Mentés**

A **Mentés** gombra kattintva (csak új felvitel és szerkesztés

módban érhető el) csak azon GVK profil azonosítójú felhasználó számára elérhető,

akihez az **OP_H04_01_KodEsHelySzerkeszt** operandus hozzá van rendelve.




-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 26/33|


#92775 eleje Az ablak meghívja az **„S_52 – Kód és hely adatainak mentése”** eljárást,
visszakapott SQL kód alapján jelenít meg pop-up ablakban.

      - A mentés sikeres, ha a státusz kód 200-as.

`o` A képernyőn az alábbi folyamatok futnak le a lenti sorrendben:

`o` #89383 Napi sorszám generálása és mentése. Az eljárás a HUBA
bejegyzés egyedi azonosítójának bemenő paraméterként
átadásából tudja majd eldönteni, hogy szerkesztés vagy új helyszín
felvitel történt. Utóbbi esetben nem lesz egyedi azonosító.

`o` Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, a

kliens az **„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól
(WindowOpen eseménykor) visszakapot **„ACTIVITY_ID** ”-val, soron
kívül elindítja a Konkurenskezelés életjelküldés funkcióját, a
**„K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)”** függvény
meghívásával.

`o` Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, a

kliens lezárja a munkamenetet a **„K_15_04 – Munkamenet lezárás**
**(SET_DATA_CLOSE)”** eljárás meghívásával, amihez bemenő
paraméterként az **„S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatástól (WindowOpen eseménykor) visszakapot
**„ACTIVITY_ID** ”-t küldi be.

`o` A mentést követően a kliens meghívja az „ **S_27 – Felhasználói**

**aktivitás** **naplózása** ” szolgáltatást az alábbi bemenő
paraméterekkel:

`o` Ablakazonosító (’WINDOW_ID’): „H04_01”
`o` Esemény (’ACTIVITY’): „Create” vagy „Modify”
`o` AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD

azonosítója
`o` GVK felhasználó (’GVK_USER’): GVK felhasználói profil

azonosítója
`o` Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON

formában a mentés részletei

`o` Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés
azonosítója
`o` Bejegyzés sub azonosító (’SUB_ID’): NULL
`o` Előzmény felhasználói aktivitás azonosító
(’PRE_ACTIVITY_ID’): A WindowOpen eseménykor kapott
**ACTIVITY_ID.**


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 27/33|



       - Ha a mentés nem sikeres 599-es vagy 400-as státusz kódot kap a kliens.

Mindkét esetben az alábbi hibaüzenetet kell megjeleníteni, a kapott

RequiestId-val. [#92775] [vége]

**Mégsem**

A **Mégsem** gombra kattintva a kliens ellenőrzi, hogy
történt-e bármilyen adatmódosítás a képernyőn (csak új felvitel és szerkesztés
módban), és ha igen, az alábbi üzenetet küldi:

Ha a felhasználó az **Igen** opciót választja, a képernyő mentés nélkül bezárul, a
**Nem** opció esetén pedig a felhasználó folytathatja a munkát a „ **H04_01** **- HUBA**
**– Kód és hely** ” ablakon.

Amennyiben a képernyő bezárásra kerül, és a felhasználó szerkesztés módban nyitotta meg a
képernyőt, a kliens meghívja a **„K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)”** eljárást,
amihez bemenő paraméterként az **„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól
(WindowOpen eseménykor) visszakapot **„ACTIVITY_ID** ”-t küldi be. Ezzel zárja a

munkamenetet.

**Ablak bezárása** **[[#89250]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/89370)**

A képernyő bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H04_01”

  - Esemény (’ACTIVITY’): WindowClose


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 28/33|



 - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

 - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

 - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Create”, „Modify” vagy „View” a

megnyitás módjától függően

 - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

 - Bejegyzés sub azonosító (’SUB_ID’): NULL

 - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A WindowOpen

eseménykor kapott **ACTIVITY_ID.**


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 29/33|

### **2.2.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **






















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Fejléc||||||||
||tab|-|tabbar|||Hálózati elem||
|#89383 #93236 HUBA azonosító|HUBA azonosító|-|||||BEJEGYZES.HUBA_AZ ONOSITO|
|#89383 HUBA Betűkód|HUBA Betűkód|-|||For For|m atted: Strikethrough|BEJEGYZES|
|||||||matted: Strikethrough||
|#89370 Késés főkód|Késés főkód|-|Szöveges beviteli mező kiválasztás funkcióval||||BEJEGYZES|
|#89838 HUBA Betűkód – szabad szöveges rész|HUBA Betűkód –|-|Szabad||For|m atted: Strikethrough|BEJEGYZES #89838|
||szabad szöveges rész||szöveges beviteli mező||For|matted: Strikethrough||
|||||||||
|#89371 Topográfiai elem||||||||
|Topográfiai elem kiválasztása forgalmi szakaszról||-|||||BEJEGYZES_HELYSZ IN.FORGALMI_SZA KASZ_ID|
|Topográfiai elem kiválasztása szolgálati helyről||-|||||BEJEGYZES_HELYSZI N.RAILWAY_OBJECT _ID|
|Topográfiai elem típusa||-|||||GVK.K_OBJEKTUM_A LKATEGORIA|
|Topográfiai elem||-|||||BEJEGYZES_HELYSZI N.RAILWAY_OBJECT _ID|
|#89372 Terület||||||||
|Hálózat|Hálózat|-||||MÁV Zrt.||
|Terület|Terület|-|Szöveges beviteli mező kiválasztás funkcióval||||BEJEGYZES_HELYSZ IN.TERULET|
|Forgalmi csomópont|Forgalmi csomópont|-|Szöveges beviteli mező kiválasztás funkcióval||||BEJEGYZES_HELYSZ IN.FORGALMI_CSO MOPONT|

### BEJEGYZES_HELYSZ IN.ALLOMASFONO KSEG




##### Szöveges beviteli mező kiálastás

#### Állomásfőnökség Állomásfőnökség 

-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 30/33|















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Szolgálati hely (tól- ig) 1|Szolgálati hely (tól-ig) 1|-|Szöveges beviteli mező kiválasztás funkcióval||||BEJEGYZES_HELYSZ IN.SZOLGHELY_TOL|
|Szolgálati hely (tól- ig) 2|Szolgálati hely (tól-ig) 2|-|Szöveges beviteli mező kiválasztás funkcióval||||BEJEGYZES_HELYSZ IN.SZOLGHELY_IG|
|Szelvény (tól-ig) 1|Szelvény (tól-ig) 1|-|Szöveges beviteli mező kiválasztás funkcióval||||BEJEGYZES_HELYSZ IN.SZELVENY_TOL|
|Szelvény (tól-ig) 2|||||||BEJEGYZES_HELYSZ IN.SZELVENY_IG|
|#89375 Jármű/Vonat/Egyéb||||||||
|Vonatazonosító|Vonatazonosító|-|Szöveges beviteli mező|-|-|-|BEJEGYZES_HELYSZIN. VONATAZONOSITO|
|Közlekedési dátum|Közlekedési dátum|-|Dátum beviteli mező|8|ÉÉÉÉ/HH/NN|-|BEJEGYZES_HELYSZIN. VONAT_IND_DATUM|
|Pályaszám|Pályaszám|-|Szöveges beviteli mező formátum ellenőrzéssel|-||-|BEJEGYZES_HELYSZIN.J ARMU_PALYASZAM|
|Főkategória|Főkategória-|-|Szöveges beviteli mező kiválasztás funkcióval||-|-|BEJEGYZES_HELYSZIN. FOKATEGORIA_ID|
|Alkategória|Alkategória|-|Szöveges beviteli mező kiválasztás funkcióval||-|-|BEJEGYZES_HELYSZIN. ALKATEGORIA_ID|
|Munkatárs|Munkatárs|-|Szöveges beviteli mező kiválasztás funkcióval és szabad szöveges beviteli mező||-|-|BEJEGYZES_HELYSZIN. MUNKATARS|
|Leírás|Leírás|-|Szabad szöveges leírás|200|-|-|BEJEGYZES_HELYSZIN. LEIRAS|


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 31/33|


**Nyomógombok**





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
|---|---|---|---|---|
|Hozzáadás|Hozzáadás||||
|Törlés|Törlés||||
|Mentés|Mentés||||
|Mégsem|Mégsem||megnyomható||


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 32/33|


**2.2.6.** **Hívott szolgáltatások**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés||S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés (konkurenskezeléssel)||K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)|
|Ablakbetöltés||S_08 - Lekérdezési paraméterek értékkészletének lekérdezése|
|Ablakbetöltés||S_53 – Kód és hely adatainak lekérdezése (getHubaKodEsHely)|
|#95441 Ablakbetöltés||S_74 – Bejelentkezett GVK user terület adatának lekérdése (HUBA.Get_Gvk_User_Terulet)|
|Konkurenskezelés (lejárt munkamenet visszaszerzésekor)||K_15_03 – Életjel küldés ellenőrzés nélkül (SET_DATA_FORCE_LIFESIGN)|
|Mentés (konkurenskezeléssel)||K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)|
|Mentés||S_52 – Kód és hely adatainak mentése (setHubaKodEsHely)|
|Mentés (konkurenskezeléssel)||K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)|
|Mentés||S_27 – Felhasználói aktivitás naplózása|
|Mégsem (konkurenskezeléssel)||K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)|
|Ablak bezárása||S_27 – Felhasználói aktivitás naplózása|
|Hozzáadás||S_61 – Hierarchia adatok lekérése (HUBA.Get_Hierarchia_adat)|


**2.2.7.** **Rendszerüzenetek**

Nincs. vagy







|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|Ha a munkamenet megszakadt, de még a lezárási időn belül van.|Aktuális munkamenet lejárt. Kívánja folytatni?|Eldöntendő (I/N)|
|Ha a munkamenet megszakadt, és le is záródott.|Aktuális munkamenete lezárult, nem folytatható. Kattintson az OK-ra a képernyő bezárásához.|Figyelmeztető|
|Ha a munkamanet kezelésekor hiba történt|Hiba történt, aktuális munkamenete nem található. Kattintson az OK-ra a képernyő bezárásához.|Figyelmeztető|
|Figyelmeztető üzenet, a Hozzáadás gomb megnyomásakor, ha a rögzítést végző felhasználó hierarchia adata, és a hozzáadni kívánt helyszín|Jogosultsága alapján nem Önhöz tartozó helyszín! Folytatja?|Eldöntendő (I/N)|


-----

|GVK_UC_H00|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 33/33|


|hierarchia adata eltér egymástól.|Col2|Col3|
|---|---|---|
|Mégsem gomb megnyomásakor, ha a képernyőn történt módosítás|Biztosan elveti a módosításait?|Eldöntendő (I/N)|
|#92775 Az új rekord mentése sikertelen|A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX|Hibaüzenet|


**2.2.8.** **Kódtáblák, választási listák**

Nincs.

**2.2.9.** **Rendszerparaméterek**

Nincs. vagy





Helye: /src/BackEnd/GvkBackend/WebApi/appsettings.json

|Rendszerparaméter neve|Rendszerparaméter jelentése|Default érték|Beállított érték|
|---|---|---|---|
|||||
|||||
|||||


-----



06.md :::
|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 1/136|

# – GVK_UC_H06  HUB A ért e sítések kezelése RÉSZLETES RENDSZERTERV
## 2025. április 4.
### V1.32


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 2/136|

#### **Dokumentum történet **

Kidolgozó változtatások követése






|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.06.03.|Létrehozás #89258 - H06_01 - Értesítési beállítások kezelése ablak kialakítása|Hutter Julianna|Ellenőrizhető|
|1.1|2024.07.04|#89269 - H06_01A - Értesítésfogadók beállításai lapfül és grid kialakítása|Hutter Julianna|Ellenőrizhető|
|1.2|2024.07.08|#89281 - H06_02 - Értesítésfogadók beállításaiban keresés ablak kialakítása|Hutter Julianna|Ellenőrizhető|
|1.3|2024.08.02|#89331 - H06_03 - Értesítésfogadó beállítások oszlopmegjelenítési beállítása ablak kialakítása|Hutter Julianna|Ellenőrizhető|
|1.4|2024.08.06|#89356 - H06_05 - Értesítési csoport ablak kialakítása #89431 - H06_01A - Értesítési csoport nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.5|2024.08.09|#91979 - H06_01, H06_09 - Egyéb szervezetek kezelése|Hutter Julianna|Ellenőrizhető|
|1.6|2024.08.14 2024.09.04|#89384 - H06_01A - Új értesítésfogadó nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.7|2024.08.23|#89347 - H06_04 - Értesítésfogadó adatai ablak kialakítása|Hutter Julianna|Ellenőrizhető|
|1.8|2024.09.09|#89410 - H06_01A, H06_07 - Értesítésfogadó fel-/leiratkozása nyomógomb kezelése|Vörös Gábor|Ellenőrizhető|
|1.9|2024.09.10|#89393 - H06_01A - Értesítésfogadó szerkesztése/megtekintése nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.10|2024.09.11|#89405 - H06_01A - Értesítésfogadó törlése nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.11|2024.09.11|#89448 - H06_06 - Bejegyzés értesítései ablak kialakítása|Hutter Julianna|Ellenőrizhető|
|1.12|2024.09.12|#92554 - H06_01A - Értesítésfogadó beállítások véglegesítése|Hutter Julianna|Ellenőrizhető|
|1.13|2024.09.16|#89479 - H06_06A - Értesítések lapfül kialakítása|Hutter Julianna|Ellenőrizhető|
|1.14|2024.09.20|#89281 - H06_02 - Értesítésfogadók beállításaiban keresés ablak kialakítása #92554 - H06_01A - Értesítésfogadó beállítások véglegesítése|Hutter Julianna|Ellenőrizhető|
|1.15|2024.10.07|#89483 - H06_06A - Értesítés megtekintésének kezelése|Hutter Julianna|Ellenőrizhető|
|1.16|2024.10.16|#94940 - GVK - HUBA - Egység átnevezése Szervezeti egységre|Hutter Julianna|Ellenőrizhető|
|1.17|2024.11.05|#89651 - H06_06A - Értesítendő törlése nyomógomb kezelése|Hutter Julianna|Ellenőrizhető|
|1.18|2024.11.11|#95573 - HUBA - H06_01 fel-le iratkozás bővítése +1 operandussal|Vörös Gábor|Ellenőrizhető|
|1.19|2024.11.12|#95363 - H06_06A - Értesítés rögzítésben jogosultsági szűrés, listában sorbarendezés|Hutter Julianna|Ellenőrizhető|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 3/136|


|1.20|2025.01.02|#96101 - GVK - H06_06A - Értesítés mentésének kezelése lezárt bejegyzésnél|Hutter Julianna|Ellenőrizhető|
|---|---|---|---|---|
|1.21|2025.01.07|#89642 - H06_06A - Értesítendők listájának manuális bővítése|Hutter Julianna|Ellenőrizhető|
|1.22|2025.01.08|#89704 - H06_06B - Értesítési napló lapfül kialakítása|Hutter Julianna|Folyamatban|
|1.23|2025.01.15|#98217 - GVK - H06_06A - Értesítés másolásakor értesítési szint figyelése|Hutter Julianna|Ellenőrizhető|
|1.23|2025.01.21|#98613 - HUBA - Global AD-ból keresés 3 karakter megadását követően - első 3 karakter|Kovács Eszter|Ellenőrizhető|
|1.24|2025.01.22|#98672 - GVK - Értesítésfogadóra keresés, név mentése - módosítás|Hutter Julianna|Ellenőrizhető|
|1.25|2025.01.29|#99030 - H06_06 ablak - Értesítendő kiválasztása - hiba|Hutter Julianna|Ellenőrizhető|
|1.26|2025.02.04|#99167 - GVK - H06_06 aláíró visszaadása az S65-ben (getErtesitesAdat)|Hutter Julianna|Ellenőrizhető|
|1.27|2025.02.06|#97450 - HUBA - szabad szöveges beviteli mezők max hossz hiba|Hutter Julianna|Ellenőrizhető|
|1.28|2025.02.06.|#92775 - DB mentés sikertelenségéről felhasználó tájékoztatása|Kovács Eszter|Ellenőrizhető|
|1.29|2025.02.18|#99383 - GVK - H06-os Értesítésfogadó ablakok kialakításának befejezése (QA)|Hutter Julianna|Ellenőrizhető|
|1.30|2025.02.28|#99440 – Összes HUBA ablakon megjelenő üzenet egységesítése|Kovács Eszter|Folyamatban|
|1.31|2025.03.05|#89696 - H06_08 - Hívás eredménye ablak kialakítása #89705 - H06_06B - Telefonszámra kattintás kezelése|Hutter Julianna|Ellenőrizhető|
|1.32|2025.04.04|#89704 - H06_06B - Értesítési napló lapfül kialakítása|Hutter Julianna|Ellenőrizhető|


MÁV SZK Ellenőrzések követése



|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.|Ellenőrzés|||
||||||
||||||
||||||


MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
||2024.|MÁV igényeknek megfelel|Herczog Ákos||
||||||
||||||
||||||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 4/136|

#### **1. Általános ismertetés ** **1.1. A használati eset modulkapcsolatai **
##### **Szolgáltatások leírásának elérhetősége:** GVK_webalkalmazás_szolgáltatáso k . do c x


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 5/136|

##### **1.2. A használati eset célja, feladatai **

A használati eset célja a GVK alkalmazásban a HUBA bejegyzésekben értesíthető
felhasználók beállításainak, valamint valamely bejegyzéshez kapcsolódó értesítés(ek)

kezelése.

Feladata, hogy lehetőséget biztosítson

    - állandó és feliratkozott értesítésfogadó felhasználók alapadatainak kezelésére,

    - valamely HUBA bejegyzéshez értesítés(ek) rögzítésére, az értesítéshez

kapcsolódó értesítendő felhasználók, valamint az értesítési napló kezelésére.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 6/136|

#### **2. A használati eset ablakai ** **2.1. Ablakok közötti kapcsolat, navigálás **


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 7/136|

##### 2.2. H06_01 – HUBA – Értesítési beállítások [ #89258]

**2.2.1.** **Ablak feladatai**

A MÁV Zrt. vasúti pályahálózatán keletkezett üzemzavarok és nem tervezett
korlátozások adatait tartalmazó bejegyzések értesítéseihez rendelhető
értesítésfogadóival kapcsolatban az alábbi funkciók biztosítása:

     - létező értesítésfogadók lekérdezése grid funkciókkal (keresés,
oszlopmegjelenítés beállítása, oszlopsorrend mentése, grid manuális és
ütemezett frissítése, lekérdezés eredményének Excel-be exportálása),

     - új értesítésfogadó rögzítésének, valamint létező értesítésfogadó szerkesztési,

ill. megtekintési lehetőségének indítása, értesítésfogadó törlése,

     - értesítési csoportok és egyéb szervezetek kezelésének indítása,

     - állandó értesítésfogadók értesítésekről történő leiratkozásának és feliratkozott

értesítésfogadók értesítésekre történő feliratkozásának indítása.

**2.2.2.** **Ablak megjelenése**

#89258, #89269 **Értesítésfogadók beállításai** :


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 8/136|


**2.2.3.** **Ablak működése**

Az ablak a „ **H01_01 - HUBA - Bejegyzések** ” felületen található
nyomógomb kezelését követően nyílik meg új böngésző lapon, ezen belül az
alapértelmezett „ **H01_01A – Értesítésfogadók beállításai** ” lapfüllel. Az ablak azon GVK
profil azonosítójú felhasználó számára nyílik meg, akihez az
**OP_H06_01_ErtesitesfogadokBeallitasokMegjelenitLista** operandus hozzá van

rendelve.

Amennyiben a GVK profil azonosítójú felhasználóhoz hozzá van rendelve az
**OP_H06_02_ErtesitesFogadokKeres** operandus, balról beúszva megnyílik a „ **H06_02 –**
**HUBA – Értesítésfogadók lekérdezése** ” ablak, üres kereső paraméter mezőkkel.

A rendszer a **H06_01** ablakot maximum egyszer nyitja meg új böngésző lapon.
Amennyiben a „ **H01_01 – HUBA - Bejegyzések** ” ablakról többször próbálja meg a GVK
profil azonosítójú felhasználó megnyitni, a korábban megnyitott **H06_01** ablak frissül
az alapértelmezett módon.

Az „ **A01 - GVK - Térkép** ”vagy „ **H01_01 – HUBA - Bejegyzések** ” ablak bezárása esetén
automatikusan bezáródik a H06_01 ablak is.

**Az ablak felépítése**

    - Az ablak kitölti a teljes képernyőt.

    - *Fejléc:*

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet használatakor
a fejléc háttérszíne középszürke (7F7F7F).

Üzemi (PROD)



-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 9/136|


Felhasználói teszt (QA)

QA-ra kihelyezéskor

Belső teszt (TEST)

TEST-re kihelyezéskor

Fejlesztői (DEV)

DEV-re kihelyezéskor

`o` Középen az ablak azonosítóját és megnevezését: „ **H06_01 - HUBA –**

**Értesítési beállítások** ”

`o` Jobbszélen:

          - Rendszer neve és logója, valamint a rendszer neve alatt a

frontend verziószáma jelenik meg.

          - A logó előtt a GVK környezet neve:

              - üzemi (PROD): Nem jelenik meg a kliensen.

              - felhasználói teszt (QA): „ **QA** ”

              - teszt (TEST): „ **TEST** ”

              - fejlesztői (DEV): „ **DEV** ”

          - GVK profil név:

A GVK-ba történt bejelentkezéskor érvényes GVK profil név
megjelenítésére szolgál.

  - *Tabbar (fülmegjelenítő sáv):*

A fejléc alatt az alábbi nézetek jelennek meg:

`o` **Értesítésfogadók beállításai**      - alapértelmezetten ez az aktív tab/fül

          - A tabfül technikai elnevezése: „H06_01A – Értesítésfogadók

beállításai”

              - Az „ **A** ” betű nem jelenik meg a felületen, csak az

ablakazonosítóban.

**Ablakbetöltés** [ #89269]

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_01A’

    - Esemény (’ACTIVITY’): ’WindowOpen’



-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 10/136|



    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

**Lapfülek működése**

**2.2.3.1.** **H06_01A – Értesítésfogadók beállításai** [#89269]

**Lapfül felépítése**

  - *Felső eszközsor (Toolbar):*

Itt jelenik meg az összes, a táblázathoz kapcsolódó nyomógomb. Az adott funkció
leírása tooltip-ben jelenik meg.

`o` Keresés:

Rákattintva balról beúszó panelben megnyílik a **„** **H06_02** **– HUBA –**

**Értesítésfogadók lekérdezése”** ablak. A (Keresés) nyomógomb csak
azon GVK profil azonosítójú felhasználó számára aktív, megnyomható,
akihez az **OP_H06_02_ErtesitesFogadokKeres** operandus hozzá van

rendelve.

`o` Keresés törlése:

Az ikon narancssárga színnel jelenik, amennyiben van megadott (aktív)
keresési feltétel az **„** **H06_02** **– HUBA – Értesítésfogadók lekérdezése”**
ablakban, fehérrel, ha nincs.

Rákattintva egyszerre törölhetők az „ **H06_02** **– HUBA – Értesítésfogadók**

**lekérdezése** ” ablakban beállított feltételek. A (Keresés törlése)
nyomógomb csak azon GVK profil azonosítójú felhasználó számára aktív,
megnyomható, akihez az **OP_H06_02_ErtesitesFogadokKeres** operandus

hozzá van rendelve.

`o` Beállítások:

Rákattintva balról beúszó panelben megnyílik a „ **H06_03** **– HUBA –**

**Értesítésfogadók oszlopmegjelenítése** ” ablak. A (Beállítások)
nyomógomb csak azon GVK profil azonosítójú felhasználó számára aktív,
megnyomható, akihez az
**OP_H06_03_ErtesitesFogadokOszlopokMegjelenitMent** operandus hozzá

van rendelve.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 11/136|


`o` Excel-export:

Rákattintva kezdeményezhető az összes találat grid-en látható összes
oszloppal letöltése Excel-be a keresési feltételeknek megfelelően.

`o` Összes szűrő törlése:

Rákattintva kezdeményezhető a táblázat oszlopaira beállított szűrési

feltételek törlése.

`o` Oszlopsorrend mentése:

Rákattintva kezdeményezhető a táblázat oszlop sorrendjének mentése a
GVK profil azonosítójú felhasználóhoz.

`o` Frissítés:

Rákattintva kezdeményezhető a táblázat adatainak frissítése a keresési
feltételek beállításainak megfelelően.

  - *Lista:*

`o` Táblázatban jelenik meg az összes kért információ.

`o` Fejléc:

A „ **H06_03** **- HUBA – Értesítésfogadók oszlopmegjelenítése** ” ablakban
kiválasztott oszlopok adják a táblázat oszlopcímeit.

Amennyiben az oszlopcím nem fér ki, az **Oszlopcím…** jelenik meg. Tooltipben olvasható a teljes oszlopcím.

*Sorbarendezés* : Az oszlopcím jobb oldalán található (Sorbarendezés)
ikonra kattintva rendezhető a táblázat megjelenített tartalma. Az


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 12/136|


alapértelmezett rendezés a HUBA azonosító szerint csökkenő (a legfrissebb
jelenik meg legelöl).

Az oszlopcím mellett egy felfelé (növekvő) vagy lefelé (csökkenő) mutató
nyíl jelzi, hogy mi szerint van rendezve. Egyszerre egy oszlop szerint

rendezhető a táblázat.

Az oszlopok sorrendje változtatható - drag&drop-pal átrendezhetők tetszés

szerint. Az oszlopok sorrendje a (Oszlopsorrend mentése) ikonra

kattintva menthető el.

*Oszlopszűrés* : Az oszlopcím bal oldalán található (Oszlopszűrés) ikonra
kattintva az alábbi pop-up ablak segítségével a megjelenített találati lista
adott oszlopa szerinti további szűrésre van lehetőség:

Az alábbi szűrési feltételek alkalmazhatók: Tartalmaz (ez az
alapértelmezett) / Egyezik / Kisebb / Kisebb, egyenlő / Nagyobb / Nagyobb,
egyenlő / Üres / Nem üres. Egymást követően több oszlopon is beállítható
oszlopszűrés.

`o` Adatok:

Ablakbetöltéskor a grid üres, nem jelennek meg alapértelmezetten adatok.

`o` Alsó vízszintes gördítősáv (horizontális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt oszlopa,
akkor az alsó vízszintes gördítősáv segítségével lehet megtekinteni a
táblázat többi oszlopát.

`o` Oldalsó függőleges gördítősáv (vertikális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt sora,
akkor az oldalsó (jobb oldalon) függőleges gördítősáv segítségével lehet
megtekinteni a táblázat többi sorát.

  - *Lábléc:*

`o` Oldallapozó: A lekérdezett adatok a grid alatti lapozó funkcióval

jeleníthetők meg (legelső/legutolsó, valamint előző/következő oldalra
ugrás). Megjelenik a megjelenített/összes oldal száma. Az egy oldalon


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 13/136|


megjelenített rekordok száma listából választható [#92554] (25/50/100), az
alapértelmezett érték 100 rekord [#92554 vége] .

  - *Nyomógombok*

`o` #89410, #95573 Fel-/Leiratkozás nyomógomb: A < **Fel-**
**/Leiratkozás**        - nyomógomb alapértelmezetten disabled állapotú, csak
abban az esetben válik kezelhetővé, ha a gridben kiválasztásra kerül a
bejelentkezett felhasználó, mint értesítésfogadó és a GVK profil azonosítójú
felhasználó rendelkezik az **OP_H06_07_ErtFogFelLeIratkozas – Értesítés**
**fogadók fel- / leiratkozása** operandussal.

Abban az esetben, ha a felhasználó rendelkezik az
**OP_H06_07_ErtFogFelLeIratkozasAdmin** **– Értesítés fogadók fel- /**
**leiratkozása admin** operandussal, bármelyik értesítésfogadó kiválasztása
esetén aktívvá válik a Fel-/Leiratkozás nyomógomb.

`o` #89431 Értesítési csoportok kezelése nyomógomb: Az
< **Értesítési csoportok**       - nyomógomb alapértelmezetten csak azon GVK
profil azonosítójú felhasználó számára kezelhető, akihez az
**OP_H06_05_ErtesitesiCsoportokMegjelenitMent** operandus hozzá van
rendelve. Az operandus hiánya esetén a nyomógomb disabled állapotú.
#89431 vége

`o` #91979 Egyéb szervezetek kezelése nyomógomb: Az
< **Egyéb szervezetek**       - nyomógomb alapértelmezetten csak azon GVK profil
azonosítójú felhasználó számára kezelhető, akihez az
**OP_H06_09_EgyebSzervezetekMegjelenitMent** operandus hozzá van
rendelve. Az operandus hiánya esetén a nyomógomb disabled állapotú.
#91979 vége

`o` nyomógomb: Az < **Új**     - nyomógomb alapértelmezetten
kezelhető (megnyomható) abban az esetben, ha a grid-en nincs kijelölve sor
és a [#89384] GVK profil azonosítójú felhasználóhoz hozzá van rendelve az
**OP_H06_04_ErtesitesFogadoSzerkeszt** operandus [#89384 ] vége . A grid-en
kijelölt értesítésfogadó vagy az operandus hiánya esetén a nyomógomb
disabled állapotú.

`o` nyomógomb: A < **Szerkesztés**     - nyomógomb
alapértelmezetten nem kezelhető (nem megnyomható). Abban az esetben
válik kezelhetővé (megnyomhatóvá), ha a grid-en van kijelölve egy [#99383]
nem törölt sor [#99383 vége] és a GVK profil azonosítójú felhasználóhoz hozzá
van rendelve [#89393] az **OP_H06_04_ErtesitesFogadoSzerkeszt** operandus
#89393 vége .

`o` nyomógomb: A < **Megtekintés**     - nyomógomb
alapértelmezetten nem kezelhető (nem megnyomható). Abban az esetben
válik kezelhetővé (megnyomhatóvá), ha a grid-en van kijelölve egy sor és a


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 14/136|


GVK profil azonosítójú felhasználóhoz hozzá van rendelve [#89393 ] az
**OP_H06_04_ErtesitesFogadoMegtekint** operandus [#89393 vége] .

`o` nyomógomb: A < **Törlés**     - nyomógomb alapértelmezetten
nem kezelhető (nem megnyomható). Abban az esetben válik kezelhetővé
(megnyomhatóvá), ha a grid-en van kijelölve [#89405 ] egy nem törölt sor és a
GVK profil azonosítójú felhasználóhoz hozzá van rendelve az **OP_H06_04_**
**OP_H06_04_ErtesitesFogadoTorol** operandus [#89405 vége] .

**Lapfül betöltése**

A H06_01A lapfül csak akkor érhető el a GK profil azonosítójú felhasználó számára, ha
rendelkezik az **OP_H06_01_ErtesitesfogadokBeallitasokMegjelenitLista**
operandussal. A megfelelő operandus hiányában a lapfül nem választható ki (inaktív) a
GVK profil azonosítójú felhasználó számára.

A lapfül betöltésekor a grid üres.

A lapfül betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens az alábbi
bemenő paraméterekkel meghívja az **„S_15 - Beállítások lekérdezése** ” szolgáltatást:

    - Beállítás azonosító: ’H06_03’

A GVK profil azonosítót a webAPI réteg adja át.

A kliens az alábbi, szolgáltatástól visszakapott értékek alapján megjeleníti az
oszlopokat:

    - Beállítás neve: az oszlop neve

    - Megjelenítési jelző: 0 - nem jelenik meg az oszlop, 1 - megjelenik az oszlop

    - Sorszám: az oszlop sorszáma a griden

Ha nincs ilyen eltárolt adat (S_15 szolgáltatás nem ad vissza adatot), akkor
alapértelmezetten minden oszlop megjelenítendőnek tekintendő a grid-en.

**Grid és toolbar működése**

A (Keresés) ikonra kattintva a „ **H06_02** **– HUBA – Értesítésfogadók lekérdezése** ”
ablakban adhatja meg az értesítésfogadó beállítások keresési feltételeit azon GVK
profil azonosítójú felhasználó, akihez **OP_H06_02_ErtesitesFogadokKeres** operandus
hozzá van rendelve. Ekkor a háttérben a grid halványszürke színűre vált.

A grid adatokkal történő frissítése az „ **H06_02** **– HUBA – Értesítésfogadók**
**lekérdezése** ” ablakban a < **Keresés**   - nyomógombra történő kattintást követően
történik az „ **S_62 – Értesítésfogadók lekérdezése** ” szolgáltatás által visszaadott
értékek alapján. A kliens csak azokat az oszlopokat jeleníti meg, amelyeket az **„S_15 -**
**Beállítások lekérdezése** ” szolgáltatás visszatérő értékként visszaadott.

A kliens a (Keresés törlése) ikonra történő kattintáskor kiüríti az „ **H06_02**
**– HUBA – Értesítésfogadók lekérdezése** ” ablakban beállított paramétereket.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 15/136|


A (Beállítások) ikonra kattintva a „ **H06_03** **– HUBA – Értesítésfogadók**
**oszlopmegjelenítése** ” ablakban a H06_01A lapfülön található griden megjelenítendő
oszlopok megjelenítése állítható be. A nyomógomb csak azon GVK profil azonosítójú
felhasználó számára aktív, megnyomható, akihez az
**OP_H06_03_ErtesitesFogadokOszlopokMegjelenitMent** operandus hozzá van
rendelve. Ekkor a háttérben a grid halványszürke színűre vált.

Az (Excel-export) ikonra kattintva a back-end a grid-en az összes lapon
aktuálisan megjelenő adatot kiexportálja Excel fájlba (.xlsx kiterjesztéssel).

Fájlnév: *HUBA értesítésfogadók_[yyyymmdd].xlsx*

A (Összes szűrő törlése) ikonra kattintva a kliens törli a GVK profil azonosítójú
felhasználó által az oszlopokon alkalmazott beállításokat.

A griden drag&drop módszerrel módosítható a megjelenített oszlopok sorrendje és a

(Mentés) ikonra kattintva menthető el. Az ikonra kattintva a kliens az alábbi
bemenő paraméterekkel meghívja az „ **S_16 –Beállítások mentése”** szolgáltatást:

    - GVK profil azonosító

    - beállítás azonosítója: ’H06_03’

    - beállítás neve: oszlop neve

    - oszlop sorszáma

A (Frissítés) ikonra kattintva manuálisan frissíthetőek a H06_01A gridben

megjelenített adatok. A kliens a (Frissítés) ikonra történő kattintáskor a H06_02
ablakban beállított kereső (mint bemenő) paraméterekkel meghívja az „ **S_62 –**
**Értesítésfogadók lekérdezése** ” szolgáltatást (H06_02 ablaknál leírtak szerint).

**Nyomógombok kezelése**

#89410 nyomógomb kezelése: Az < **Fel-/Leiratkozás**    - nyomógomb
kezelésekor megnyílik a **„** **H06_07** **– HUBA – Értesítésfogadó fel-/leiratkozása”** pop-up

ablak az alábbiak szerint:

    - Állandó értesítésfogadó esetén

**Kilépve tól-ig** mezők, ahol a rendszer ellenőrzést végez aszerint, hogy az
aktuálisan kitöltött értékek (ha vannak, mit tartalmaznak):

`o` amennyiben nincs aktuálisan beállított érték vagy múltbeli időpontra

mutat: új időintervallumot ad meg a felhasználó;

`o` amennyiben az aktuálisan beállított érték jövőbeli vagy folyamatban van: a

korábban beállított időintervallumot szerkeszti a felhasználó.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 16/136|



    - Feliratkozott (nem állandó) értesítésfogadó esetén

**Belépve tól-ig** mezők, ahol a rendszer ellenőrzést végez aszerint, hogy az
aktuálisan kitöltött értékek (ha vannak, mit tartalmaznak):

`o` amennyiben nincs aktuálisan beállított érték vagy múltbeli időpontra

mutat: új időintervallumot ad meg a felhasználó;

`o` amennyiben az aktuálisan beállított érték jövőbeli vagy folyamatban van: a

korábban beállított időintervallumot szerkeszti a felhasználó. [#89410 vége]

nyomógomb kezelése: Az < **Értesítési csoport kezelése**            nyomógomb kezelésekor a grid felett középen [#89356] pop-up ablakban megnyílik a
„ **H06_05 – HUBA – Értesítési csoportok** ” ablak. Egy GVK profillal egyszerre max. egy
H06_05 ablak megnyitása engedélyezett. [#89356 vége]

#89384 nyomógomb kezelése: Az < **Új**   - nyomógomb kezelésekor a grid
felett középen pop-up ablakban üres mezőkkel megnyílik a „ **H06_04 – HUBA –**
**Értesítésfogadó adatai** ” ablak. Egy GVK profillal egyszerre max. egy H06_04 ablak
megnyitása engedélyezett.

#89393 nyomógomb kezelése: A < **Szerkesztés**   - nyomógomb kezelésekor
a kliens ellenőrzi a kiválasztott értesítésfogadó szerkeszthetőségét, amihez meghívja a
**K_15_01 – Szerkeszthetőség ellenőrzése (GET_DATA_EDITABILITY)** eljárást, bemenő
paraméterként átadva a képernyő kódját **(H06_04)**, valamint az értesítésfogadó egyedi
azonosítóját **(ERTESITES_FOGADO_ID)** .

Az eljárástól válaszként egy numerikus érték érkezik. Amennyiben ez ’0’ (azaz nulla), a
képernyő szerkeszthető. Ettől eltérő érték a képernyőt aktuálisan szerkesztő
felhasználó GVK profil azonosítóját jelzi.

Szerkeszthetőség esetén a kliens megnyitja szerkesztésre a „ **H06_04 – HUBA –**
**Értesítésfogadó adatai** ” ablakot.

Ellenkező esetben az alábbi pop-up hibaüzenetet jeleníti meg a kliens:

Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot vagy megnyitja a kívánt
képernyőt megtekintési nézetben.

Egy GVK profillal egyszerre max. egy H06_04 ablak megnyitása engedélyezett.

nyomógomb kezelése: A < **Szerkesztés**          - nyomógomb kezelésekor a grid
felett középen pop-up ablakban megnyílik a „ **H06_04 – HUBA – Értesítésfogadó**


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 17/136|


**adatai** ” ablak, amelyben megjelennek a grid-en kijelölt értesítésfogadó adatai. Egy GVK
profillal egyszerre max. egy H06_04 ablak megnyitása engedélyezett. [#89393 vége]

#89405 nyomógomb kezelése: A < **Törlés**   - nyomógomb kezelésekor a
kliens ellenőrzi a kiválasztott értesítésfogadó szerkeszthetőségét, amihez a meghívja a
**K_15_01 – Szerkeszthetőség ellenőrzése (GET_DATA_EDITABILITY)** eljárást, bemenő
paraméterként átadva a képernyő kódját **(H06_04)**, valamint az értesítésfogadó egyedi
azonosítóját **(ERTESITES_FOGADO_ID)** .

Az eljárástól válaszként egy numerikus érték érkezik. Amennyiben ez ’0’ (azaz nulla), a
képernyő szerkeszthető. Ettől eltérő érték a képernyőt aktuálisan szerkesztő
felhasználó GVK profil azonosítóját jelzi.

Amennyiben kívánt adatelem nem szerkeszthető, abban az esetben a törlés sem
hajtható végre, ezért az alábbi hibaüzenet jelenik meg:

Az OK gombra kattintás után az bezárul a pop-up üzenet, a felhasználó tovább folytatja
a munkáját a H06_01 ablakban, a törlést nem hajtja végre a rendszer.

Szerkeszthetőség esetén a kliens először az alábbi megerősítést kérő pop-up üzenetet
jeleníti meg az ablak felett középen:

< **Igen**   - nyomógomb kezelése esetén a kliens az alábbi sorrendben meghívja felsorolt
szolgáltatásokat:

    - Az értesítésfogadó törlése céljából a kliens meghívja az „ **S_63 – Értesítésfogadó**

**adatainak mentése** ” szolgáltatást, melynek az alábbi bemenő paramétereket
adja át:

`o` Értesítésfogadó azonosítója (’ertFogadoId’)
`o` Aktív? (’aktiv’): ’I’

    - A mentést követően a kliens meghívja az „ **S_27 – Felhasználói aktivitás**

**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

`o` Ablakazonosító (’WINDOW_ID’): „H06_04”


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 18/136|


`o` Esemény (’ACTIVITY’): „Modify”
`o` AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója
`o` GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója
`o` Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON formában a

mentés részletei

`o` Bejegyzés azonosító (’MAIN_ID’): értesítés fogadó egyedi azonosítója

( **ERTESITES_FOGADO_ID** )
`o` Bejegyzés sub azonosító (’SUB_ID’): NULL
`o` Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

< **Nem**   - nyomógomb kezelésekor bezárul a pop-up üzenet, a felhasználó tovább
folytatja a munkáját a H06_01 ablakban.

#89405 vége

**Lapfülek közötti váltás**

HUBA első szakaszában még nem releváns.

**Lapfül bezárása**

**2.2.3.2.** **H06_01B – Értesítési mátrix**

**Lapfül betöltése**

HUBA első szakaszában még nem releváns.

**Grid és toolbar működése**

**Nyomógombok kezelése**

**Lapfülek közötti váltás**

**Lapfül bezárása**

**Ablak bezárása**

Az ablak bezárása a böngészőfülön lévő **<X>** nyomógombra kattintással lehetséges.

Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_01A’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 19/136|



    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 20/136|

### **2.2.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|---|
|Fejléc||||||||
||GVK profil megnevezés|GVK felhasználó||||||
|H06_01A – Értesítésfogadók beállításai #89269||||||||
|Grid||||||||
||(szűrés: Tartalmaz)|Oszlopszűrés||||||
||(szűrés: combobox)||combobox|||||
||(rendezés)|Sorbarendezés||||||
||Horizontális scrollbar|-|scrollbar|||-||
||Vertikális scrollbar|-|scrollbar|||-||
||Lapozó|-|pagination|||#92554 100||
|H06_01B – Értesítési mátrix||||||||
|||||||||
|||||||||

|Grid oszlopai az|alapértelmezett sorrendben|Col3|Col4|Col5|Col6|Col7|
|---|---|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Hossz|Maszk/Típus|Alapértelmezett érték|Törzstábla/ kódtábla|
|H06_01A – Értesítésfogadók beállításai #89269|||||||
|Név|Név|Név|AN50||-||
|Szakág|Szakág|Szakág|AN50||-||
|Értesítési szint|Értesítési szint|Értesítési szint|AN20||-||
|Munkakör|Munkakör|Munkakör|AN50||-||
|Feladat|Feladat|Feladat|AN50||-||
|Szervezet|Szervezet|Szervezet|AN50||-||
|Értesítési csoport|Értesítési csoport|Értesítési csoport|AN50||-||
|Külsős?|Külsős?|Külsős?|boolea n|I/N|-||
|Kilépve (-tól)|Kilépve (-tól)|Kilépve (-tól)|DATE|YYYY.MM.DD HH24:MI|-||
|Kilépve (-ig)|Kilépve (-ig)|Kilépve (-ig)|DATE|YYYY.MM.DD HH24:MI|-||
|Belépve (-tól)|Belépve (-tól)|Belépve (-tól)|DATE|YYYY.MM.DD HH24:MI|-||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 21/136|




|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Hossz|Maszk/Típus|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|
|SMS-ben értesítendő?|SMS-ben értesítendő?|SMS-ben értesítendő?|boolea n|I/N|-||
|Mobilszám|SMS telefonszám|SMS telefonszám|AN20||-||
|Email-ben értesítendő?|Email-ben értesítendő?|Email-ben értesítendő?|boolea n|I/N|-||
|E-mail cím|E-mail cím|E-mail cím|AN50||-||
|Állandó értesítésfogadó?|Állandó értesítésfogadó?|Állandó értesítésfogadó?|boolea n|I/N|-||
|Törzsszám|Törzsszám|Törzsszám|N10||-||
|Törölt|Törölt|Törölt|boolea n|I/N|-||
|H06_01B – Értesítési mátrix|||||||
||||||||
||||||||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 22/136|


**Nyomógombok, funkcionális ikonok**














|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/ nem nyomható meg]|Material ikon neve|
|---|---|---|---|---|
|Értesítési beállítások|||||
||Keresés|Bejegyzés keresése|Megnyomható|search|
||Keresés törlése|Bejegyzés keresési feltételek törlése|Megnyomható|search_off|
||Beállítás|Bejegyzés beállítások|Megnyomható|settings|
||Excel-export|Adatok letöltése Excel-be|Megnyomható|dxi dxi-file-excel|
||Összes szűrő törlése|Bejegyzés oszlop szűrés törlése|Megnyomható|filter-clear|
||Oszlopsorrend mentése|Bejegyzés oszlopsorrend mentése|Megnyomható|dxi dxi-content- save|
||Frissítés|Bejegyzés adatok frissítése|Megnyomható|refresh|
||Fel- /Leiratkozás|Fel-/Leiratkozás|Megnyomható|rss square|
||Értesítési csoportok|Értesítési csoportok|Megnyomható|users|
||Egyéb szervezetek|Egyéb szervezetek|Megnyomható||
||Új felvitel|Új felvitel|Megnyomható|plus|
||Szerkesztés|Szerkesztés|Nem nyomható meg|pencil|
||Megtekintés|Megtekintés|Nem nyomható meg|eye|
||Törlés|Törlés|Nem nyomható meg|trash|
|Értesítési mátrix|||||
||||||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 23/136|


**2.2.5.** **Hívott szolgáltatások**









|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés és egyúttal H01_01A lapfül betöltés|-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés|-|S_15 – Beállítások lekérdezése|
||H06_02 – HUBA – Értesítésfogadók lekérdezése|-|
||H06_03 – HUBA – Értesítésfogadók oszlopmegjelenítése|-|
||-|S_16 – Beállítások mentése|
||-|S_62 – Értesítésfogadók lekérdezése|
|#89410|H06_07 – HUBA – Értesítésfogadó fel-/leiratkozás|-|
|#89356|H06_05 – HUBA – Értesítési csoportok|-|
|#91979|H06_09 – HUBA – Egyéb szervezetek|-|
|#89384|H06_04 – HUBA – Értesítésfogadó adatai|-|
|#89393|H06_04 – HUBA – Értesítésfogadó adatai|K_15 - Konkurenskezelés|
|#89393|H06_04 – HUBA – Értesítésfogadó adatai|-|
|#89405|-|K_15 - Konkurenskezelés|
|#89405|-|S_63 – Értesítésfogadó adatainak mentése|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.2.6.** **Rendszerüzenetek**





|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|#89405 <Törlés> nyomógomb kezelésekor|Az értesítésfogadó nem törölhető, mert szerkesztés alatt áll <Felhasználó neve> által.|Információs|
|#89405 <Törlés> nyomógomb kezelésekor|Biztosan törölni kívánja az értesítésfogadót? (Igen/Nem)|Megerősítő|
|#92775 Az új rekord mentése sikeres|„A híváseredmény mentése sikeres volt.”|Információ|
|#92775 Az új rekord mentése sikertelen|„A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX”|Hibaüzenet|


**2.2.7.** **Kódtáblák, választási listák**

Nincs.




-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 24/136|


**2.2.8.** **Rendszerparaméterek**

Nincs.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 25/136|

##### 2.3. H06_02 – HUBA – Értesítésfogadók lekérdezése [ #89281]

**2.3.1.** **Ablak/lap feladatai**

A „ **H06_01 – HUBA – Értesítési beállítások** ” felületen az „ **Értesítésfogadók beállításai** ”
lapfülön megjelenő bejegyzések szűrési/keresési paramétereinek megadására szolgál.

**2.3.2.** **Ablak/lap megjelenése**


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 26/136|


**2.3.3.** **Ablak/lap működése**

Az ablak az alábbi nyomógombok kezelését követően nyílik meg:

     - „ **H01_01 – HUBA – Bejegyzések** ” ablakból az < **Értesítési beállítások**     
nyomógomb kezelésekor új böngésző fülön megnyíló „ **H06_01** **– HUBA –**
**Értesítési beállítások** ” felületen az „ **Értesítésfogadók beállításai** ” lapfül
betöltésekor automatikusan, valamint

     - a lapfülön található (Keresés) nyomógomb kezelését követően nyílik meg.

A (Keresés) nyomógomb csak azon GVK profil azonosítójú felhasználó
számára aktív, megnyomható, akihez az **OP_H06_02_ErtesitesFogadokKeres**
operandus hozzá van rendelve.

**Az ablak felépítése**

Az ablak a képernyő bal oldalán jelenik meg egy fix szélességű függőleges panelként.

Az ablak tartalmazza:

     - Az ablak azonosítóját, valamint megnevezését egy fehér hátterű sávban:

**H06_02 – HUBA – Értesítésfogadók lekérdezése**

     - Ez alatt találhatók a bejegyzések táblázatos megjelenítésének szűrésére

szolgáló kereső mezők:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 27/136|


`o` a kereső paraméter neve,
`o` a kereső paraméter neve alatt a kereső mező (legördülő lista chips-es

választási lehetőséggel vagy kapcsoló) halványszürke háttérszínnel,
`o` a kereső mezővel egy sorban tőle jobbra a megadott kereső értékek

törlésére szolgáló ikon ( ).

A kereső mezőbe kattintáskor a mező kék színű kerettel jelenik meg. A
minimálisan megadandó keresési feltételek alapján az üres értékkel rendelkező
(invalid) kereső mező piros színű kerettel jelenik meg.

A panel alsó részén találhatók a funkció gombok: az elsődleges **<Keresés>**, mellette a
másodlagos **<Alaphelyzet>** és tőle jobbra a másodlagos **<Bezárás>** nyomógomb. A
gombok mindig láthatók és kezelhetők a panel alsó részén.

**Ablakbetöltés**

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_02’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak első és minden további újbóli betöltésekor a kliens minden kereső
paraméterre vonatkozóan (kivétel dátum -tól és –ig mezők) meghívja az „ **S_08 -**
**Lekérdezési paraméterek értékkészletének lekérdezése** ” szolgáltatást, bemenő
paraméterként átadva neki az adatelem azonosítóját (AutosuggestId). [#92554] Az S_08

hívások során átadott értékek:

    - **Értesítésfogadó név** (’ErtesitesFogado_H06_02’): A szolgáltatástól visszakapott

érték a ’Név’ mezőben jelenik meg.

    - **Szervezet** (’Szervezet’)

    - **Munkakör** és **Feladat** (’MunkakorFeladat’): A ’Munkakör’ mezőben a

szolgáltatástól visszakapott ’M’ típusú, a ’Feladat’ mezőben az ’F’ típusú
munkakör/feladat neve (’szoveg’) jelenik meg.

    - **Hierarchia szint** (’HierarchiaSzint’): A szolgáltatástól visszakapott értékek közül

csak a következő szintek nevét (’szoveg’) jeleníti meg a kliens az ’Értesítési szint’

értékkészletében:

`o` ’H’ – ’Hálózat’

`o` ’T’ – ’Terület’
`o` ’FC’ – ’Forgalmi csomópont’ esetén [#94940] ’Szervezeti egység’ [#94940 vége]

jelenik meg a mezőben
`o` ’SZ’ – ’Szolgálati hely’

    - **Értesítési csoport** (’ErtesitesiCsoport’)


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 28/136|


A kliens az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ”
szolgáltatás hívások során visszakapott listaszerű adatokkal feltölti az autocomplete
(kiválasztási) funkcióval rendelkező szöveges beviteli mezők értékkészletét. A listákban
az S_08 szolgáltatás által visszaadott ’text’ paraméter értékei jelennek meg. A lenyíló
listában a töredékre keresés az 1. karakter beírása után történik. [#92554 vége]

**Kereső paraméterek megadása**

A felületen kereső paraméterenként kerül meghatározásra a keresést vezérlő elem.

    - **Autocomplete beviteli mező** : A mezőbe kattintáskor még nem jelenik meg a

lista, csak a paramétereknél megadott karakter beírása után vagy a lefelé nyíl
gomb kezelésekor. A beírt szövegtöredék alapján a rendszer folyamatosan
frissíti a lista tartalmát, melyben csak a megadott szövegtöredéket tartalmazó
értékek jelennek meg. A legördülő listából kiválasztva egy sort (egér kattintással
vagy az ENTER gomb megnyomásával) a mezőben chips-ként felvételre kerül a
kiválasztott érték, valamint a beírt szűrő értéket törli a rendszer, továbbá a lista
eltűnik. A listában nem szereplő, invalid (érvénytelen) értéket a kliens
automatikusan eltávolítja a mező elhagyásakor.

    - **Chips(ek):** Az autocomplete beviteli mezőbe kerülnek felvételre és a felvett

kereső paraméterek jelölésére szolgálnak. A bejegyzések szűrése mindig a
chips-ben felvett értékek alapján történik. Nincs maximuma meghatározva. A
chips jobb szélén található ’X’ segítségével a felvett kereső paraméter (chips)

törölhető.

    - **Kiválasztott kereső értékek törlése:** A gomb segítségével az eddig felvett
kereső értékek (chips-ek) törölhetők.

    - **Kapcsológomb:** A kapcsológomb (switch) alapértelmezetten kikapcsolt
állapotú. A kapcsológombra való kattintáskor annak állapota az éppen
aktuálisról az ellenkezőjére vált: kikapcsolt állapotról bekapcsoltra és fordítva.

A beállított (már keresés történt rájuk) kereső paramétereket a rendszer a
munkamenet idejére megőrzi, tehát az ablak (panel) bezárása, majd az „ **H06_01 -**
**HUBA – Értesítési beállítások** ” ablak „ **Értesítésfogadók beállításai** ” lapfülről való újra
megnyitása után is megmaradnak a korábban rögzített kereső paraméterek.

**Nyomógombok kezelése**

nyomógomb kezelése: A **<Keresés>** nyomógomb mindig kezelhető,
kezelésekor a rendszer meghívja az „ **S_62 – Értesítésfogadók lekérdezése** ”
szolgáltatást [#92554] az alábbi bemenő paraméterekkel:

    - #98672 **Értesítésfogadó azonosító** (’ertFogadoId’) (id)

`o` Paraméter (aaa; bbb; …)

    - **Szervezet** (’szervezet’) (id)

`o` Paraméter (aaa; bbb; …)

    - **Munkakör** (’munkakor’) (id)

`o` Paraméter (aaa; bbb; …))

    - **Feladat** (’feladat’) (id)


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 29/136|


`o` Paraméter (aaa; bbb; …)

    - **Értesítési szint** (’ertesitesiSzint’) (id)

`o` Paraméter (aaa; bbb; …)

    - **Értesítési csoport** (’ertesitesiCsoport’) (id)

`o` Paraméter (aaa; bbb; …)

    - **Töröltek is** (’aktiv’): kapcsoló alapértelmezetten kikapcsolt állapotú (false),

amelynek jelentése: a törölt értesítésfogadók alapértelmezetten nem jelennek
meg a grid-en (’aktiv’ = ’I’ a nem törölt; ’N’ a törölt). [#92554 vége]

A **<Keresés>** nyomógomb kezelésekor a kliens meghívja az „ **S_27 – Felhasználói**
**aktivitás naplózása** ” szolgáltatást is az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_02’

    - Esemény (’ACTIVITY’): ’Search’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): keresett azonosítók JSON

formában

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

#92554, #99383 A kliens az S_62 szolgáltatástól visszaadott adatok alapján frissíti az „ **H06_01**

**- HUBA – Értesítési beállítások** ” ablak „ **Értesítésfogadók beállításai** ” lapfülön
megjelenített értesítésfogadók adatait:

    - **Értesítésfogadó azonosító** (’ertFogadoId’): Nem jelenik meg a kliensen.

    - **Értesítésfogadó név** (’ertFogadoNev’): A kliensen a Név mezőben jelenik meg.

    - **GVK azonosító** (’gvkAzonosito’): A kliensen a GVK azonosító mezőben jelenik

meg.

    - **Törzsszám** (’torzsszam’): Amennyiben az értesítésfogadóhoz tartozik AD

azonosító, a HUBA.GLOBAL_AD_USERS táblából kiolvasott TORZSSZAM értékét
változatlan formában visszaadja az eljárás.

    - **Külsős** (’kulsos’): A HUBA.ERTESITES_FOGADO_V view-ból kiolvasott KULSOS

mező értékét (I/N) változatlan formában visszaadja az eljárás.

    - **Állandó értesítésfogadó** (’allando’): A HUBA.ERTESITES_FOGADO_V view-ból

kiolvasott ALLANDO mező értékét (I/N) változatlan formában visszaadja az
eljárás.

    - **Értesítési szint** (’ertSzint’): A HUBA.ERTESITES_FOGADO_V view-ból kiolvasott

ERTESITESI_SZINT alapján a GVK.K_HIERARCHIA_SZINT táblából kiolvasott
K_MEGNEVEZES értékét változatlan formában visszaadja az eljárás.

    - **Terület** (’terulet’): A kliensen a Terület mezőben jelenik meg.

    - **Szervezet** (’szervezet’): A kliensen a Szervezet mezőben jelenik meg.

    - **Értesítési csoportok** (’ertCsoportok’): A kliensen az Értesítési csoport mezőben

jelenik(-nek) meg az értesítési csoport megnevezés(ek) vesszővel elválasztva.

`o` **Értesítési csoport megnevezés** (’ertCsopNev’)

    - **Szakágak** (’szakagak’): A kliensen a Szakág mezőben jelenik(-nek) meg a szakág

megnevezés(ek) vesszővel elválasztva.

`o` **Szakág megnevezés** (’szakagNev’)


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 30/136|



    - **Munkakör** (’munkakor’):

`o` **Munkakör megnevezés** (’nev’)
`o` **Munkakör típus** (’tipus’): Lehetséges értéke ’M’ – Munkakör vagy ’F’ –

Feladat.

Amennyiben a munkakör típusa ’M’, a munkakör megnevezése a Munkakör
mezőben jelenik meg.
Amennyiben a munkakör típusa ’F’, a munkakör megnevezése a Feladat
mezőben jelenik meg.

    - **Szűkítés főkódra** (’szukitesFokodra’): A kliensen a Terület mezőben jelenik meg.

    - **Bővítés főkódra** (’bovitesFokodra’): A kliensen a Terület mezőben jelenik meg.

    - **Kilépve (-tól)** (’kilepveTol’): A kliensen a Kilépve (-tól) mezőben jelenik meg.

    - **Kilépve (-ig)** (’kilepveIg’): A kliensen a Kilépve (-ig) mezőben jelenik meg.

    - **Belépve (-tól)** (’belepveTol’): A kliensen a Belépve (-tól) mezőben jelenik meg.

    - **Belépve (-ig)** (’belepveIg’): A kliensen a Belépve (-ig) mezőben jelenik meg.

    - **Telefonon értesíthető** (’telefonErt’): A kliensen a Telefonon értesíthető?

mezőben jelenik meg.

    - **SMS-ben értesíthető** (’smsErt’): A kliensen az SMS-ben értesíthető? mezőben

jelenik meg.

    - **E-mail-ben értesíthető** (’emailErt’): A kliensen az Email-ben értesíthető?

mezőben jelenik meg.

    - **Mobilszám** (’mobilszam’): A kliensen a Mobilszám mezőben jelenik meg.

    - **E-mail cím** (’email’): A kliensen az E-mail cím mezőben jelenik meg.

    - **Aktív** (’aktiv’): A kliensen a Törölt mezőben jelenik meg. ’I’ érték esetén nem

törölt, ’N’ érték esetén törölt.

#92554, #99383 vége

Keresés után a rendszer automatikusan bezárja a H06_02 ablakot.

A kliens az alábbi hibaüzeneteket jeleníti meg pop-up ablakban a megnyitott ablak
felett a < **Keresés**   - nyomógomb kezelésekor:

    - Amennyiben nincs a keresési paramétereknek megfelelő értesítésfogadó

rekord, az alábbi üzenet jelenik meg:

    - Amennyiben a lekérdezés túllépi a megengedett időt (5 perc), akkor az alábbi

üzenet jelenik meg:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 31/136|


Az üzenetek az < **OK**   - vagy < **X**   - nyomógomb kezelésével zárhatók be, a H06_02 ablak a
beállított kereső paraméterekkel nyitva marad.

nyomógomb kezelése: Az **<Alaphelyzet>** nyomógomb mindig
kezelhető, kezelésekor a rendszer kiüríti a keresőmezőket, a kapcsológombot
visszaállítja kikapcsolt állapotra. Az **<Alaphelyzet>** gomb hatására nem történik
szolgáltatás hívás. Az ablak nyitva marad.

nyomógomb kezelése: A **<Bezárás>** nyomógomb mindig kezelhető,
kezelésekor a rendszer bezárja az ablakot, de a munkamenet befejezéséig
megmaradnak a bezárás előtt felvett kereső paraméterek és a kapcsológomb állapota

is.

**Ablak bezárása**

Az ablak bezárása a **<Bezárás>** nyomógombra kattintással vagy mellékattintással
lehetséges.

Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_02’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 32/136|

### **2.3.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Név||||||||
||Név|-|combobox + chips||||HUBA.ERTESITES_FO GADO_V|
|Szervezet||||||||
||Szervezet|-|combobox + chips||||HUBA.SZERVEZET_V|
|Munkakör||||||||
||Munkakör|-|combobox + chips||||HUBA.K_MUNKAKOR|
|Feladat||||||||
||Feladat|-|combobox + chips||||HUBA.K_MUNKAKOR|
|Értesítési szint||||||||
||Értesítési szint|-|combobox + chips||||GVK.K_HIERARCHIA|
|Értesítési csoport||||||||
||Értesítési csoport|-|combobox + chips||||HUBA.ERTESITESI_CS OPORT|
|Töröltek is?||||||||
||Töröltek is?|-|||||-|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 33/136|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Törlés|-|megnyomható|search off|
||Keresés|-|megnyomható||
||Alaphelyzet|-|megnyomható||
||Bezárás|-|megnyomható||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 34/136|


**2.3.6.** **Hívott szolgáltatások**







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés|-|S_08 - Lekérdezési paraméterek értékkészletének lekérdezése|
||-|S_62 – Értesítésfogadók lekérdezése|
|||S_27 – Felhasználói aktivitás naplózása|
|||S_27 – Felhasználói aktivitás naplózása|
|Ablakbezárás||S_27 – Felhasználói aktivitás naplózása|


**2.3.7.** **Rendszerüzenetek**





|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|Nincs a megadott keresési paramétereknek megfelelő értesítésfogadó.|„Nincs a megadott keresési paramétereknek megfelelő értesítésfogadó.”|Információs|
|TimeOut exception|„A lekérdezés túllépte a megengedett időt. Kérjük próbálja újra!”|Információs|


**2.3.8.** **Kódtáblák, választási listák**

Nincs.

**2.3.9.** **Rendszerparaméterek**

Nincs.



-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 35/136|

##### 2.4. H06_03 – HUBA – Értesítésfogadók oszlopmegjelenítése [#89331]

**2.4.1.** **Ablak/lap feladatai**

Az ablak a „ **H06_01** **– HUBA – Értesítési beállítások** ” ablak „ **Értesítésfogadók**
**beállításai** ” lapfülön a grid-en megjelenített mezők beállításainak megadására (ki/bekapcsolására) és mentésére szolgál.

**2.4.2.** **Ablak/lap megjelenése**


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 36/136|


**2.4.3.** **Ablak/lap működése**

Az ablak megnyitása az „ **H06_01** **- HUBA – Értesítési beállítások** ” ablak

„ **Értesítésfogadók beállításai** ” lapfül toolbar-ban található ( **Beállítások** )

nyomógomb megnyomását követően történik. A ( **Beállítások** ) nyomógomb csak
azon GVK profil azonosítójú felhasználó számára jelenik meg, megnyomható, akihez az
**OP_H06_03_ErtesitesFogadoBeallitasokOszlopokMegjelenitMent** operandus hozzá

van rendelve.

**Az ablak felépítése**

Az ablak a képernyő bal oldalán jelenik meg egy fix szélességű függőleges panelként.

Az ablak tartalmazza:

     - Az ablak címét: **H06_03 - HUBA – Értesítésfogadók oszlopmegjelenítése**

     - Ez alatt található a grid oszlopainak nevét és a nevek mellett jobbra - velük egy

vonalban – az oszlopok megjelenítésére szolgáló kapcsológombokat tartalmazó

szekció.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 37/136|



    - A panel legalsó részén jobbra igazítva található a kék hátterű < **Alkalmazás**    
gomb, melyre kattintáskor az ablakot bezárja a rendszer.

    - A panel legalsó részén az < **Alkalmazás**    - nyomógombtól jobbra található a fehér

hátterű < **Alaphelyzet**      - gomb, melyre kattintáskor minden oszlopnevet
bekapcsol a rendszer.

**Ablakbetöltés**

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_03’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’Modify’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak betöltésekor a kliens az alábbi bemenő paraméterekkel meghívja az **„S_15 -**
**Beállítások lekérdezése** ” szolgáltatást:

    - Beállítás azonosító (’azonosito’): ’H06_03’

A GVK profil azonosítót a webAPI réteg adja át.

A kliens az alábbi, szolgáltatástól visszakapott értékek alapján megjeleníti az
oszlopokat:

    - Beállítás neve (’SETTING_NAME’): az oszlop neve

    - Megjelenítési jelző (’DISPLAY_FLAG’): 0 - nem jelenik meg az oszlop, 1 
megjelenik az oszlop

    - Sorszám (’SERIAL_NUMBER’): az oszlop sorszáma a griden

Ha nincs ilyen eltárolt adat (S_15 szolgáltatás nem ad vissza adatot), akkor
alapértelmezetten minden oszlop bekapcsoltnak tekintendő.

Az ablak megnyitásakor az ’Aktuális napi’ kapcsoló bekapcsolt állapotú.

**Switch (kapcsológomb) működése**

    - A switch-re (kapcsológombra) való kattintáskor annak állapota az éppen

aktuálisról az ellenkezőjére vált: bekapcsolt állapotról kikapcsoltra és fordítva.

    - A kapcsológombok alapértelmezett állapotba állítása (összes kapcsológomb

bekapcsolása egyszerre az < **Alaphelyzet**      - nyomógombra kattintással
lehetséges.

    - A kapcsológombok változása esetén a változás az < **Alkalmazás**    - nyomógombra

kattintáskor kerül mentésre. A kliens az < **Alkalmazás**       - nyomógomb kezelésekor
meghívja az „ **S_16 - Beállítások mentése** ” szolgáltatást, melynek az alábbi
bemenő paramétereket adja át:

`o` Beállítás azonosítója (’code’): ’H06_03’
`o` Beállítások (’settings’):


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 38/136|



          - Beállítás neve (’name’): mezőnév

          - Megjelenítési jelző (’display’): 0 - kikapcsolt vagy 1 - bekapcsolt.
A GVK profil azonosítót a webAPI réteg adja át.

A szolgáltatás elmenti a kapott paraméterek alapján a GVK profil azonosítójú
felhasználóhoz tartozó oszlopbeállításokat.

Valamely kapcsoló állapotának módosítása esetén a kliens meghívja az „ **S_27 –**
**Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_03’

    - Esemény (’ACTIVITY’): ’Modify’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): módosítás adatok (mit mire

módosított a felhasználó) JSON formában

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

**Ablakbezárás**

Az **<Alkalmazás>** gomb kezelésekor, ill. mellékattintáskor a rendszer bezárja az
ablakot. Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás**
**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_03’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’Modify’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 39/136|

### **2.4.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **








|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Név|Név|-|switch|||Bekapcsolt||
|GVK azonosító|GVK azonosító|-|switch|||Bekapcsolt||
|Terület|Terület|-|switch|||Bekapcsolt|GVK.K_TERULET|
|Szakág|Szakág|-|switch|||Bekapcsolt|GVK.K_|
|Értesítési szint|Értesítési szint|-|switch|||Bekapcsolt|GVK.K_HIERARCHIA|
|Munkakör|Munkakör|-|switch|||Bekapcsolt|GVK.|
|Feladat|Feladat|-|switch|||Bekapcsolt|GVK.|
|Szervezet|Szervezet|-|switch|||Bekapcsolt|GVK.|
|Értesítési csoport|Értesítési csoport|-|switch|||Bekapcsolt|GVK.|
|Külsős?|Külsős?|-|switch|||Bekapcsolt||
|Kilépve (-tól)|Kilépve (-tól)|-|switch|||Bekapcsolt||
|Kilépve (-ig)|Kilépve (-ig)|-|switch|||Bekapcsolt||
|Belépve (-tól)|Belépve (-tól)|-|switch|||Bekapcsolt||
|Belépve (-ig)|Belépve (-ig)|-|switch|||Bekapcsolt||
|Szűkítés főkódra|Szűkítés főkódra|-|switch|||Bekapcsolt|GVK.K_KESESFOKOD|
|Bővítés főkódra|Bővítés főkódra|-|switch|||Bekapcsolt|GVK.K_KESESFOKOD|
|Telefonon értesítendő?|Telefonon értesítendő?|-|switch|||Bekapcsolt||
|SMS-ben értesítendő?|SMS-ben értesítendő?|-|switch|||Bekapcsolt||
|Mobilszám|Mobilszám|-|switch|||Bekapcsolt||
|Email-ben értesítendő?|Email-ben értesítendő?|-|switch|||Bekapcsolt||
|Email cím|Email cím|-|switch|||Bekapcsolt||
|Állandó értesítésfogadó?|Állandó értesítésfogadó?|-|switch|||Bekapcsolt||
|Törzsszám|Törzsszám|-|switch|||Bekapcsolt||
|Törölt|Törölt|-|switch|||Bekapcsolt||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 40/136|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Alkalmazás|-|megnyomható|-|
||Alaphelyzet|-|megnyomható|-|


**2.4.5.** **Hívott szolgáltatások**







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_15 - Beállítások lekérdezése|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
|- kapcsoló állapotának módosulásakor|-|S_16 - Beállítások mentése|
||-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.4.6.** **Rendszerüzenetek**

Nincs.

**2.4.7.** **Kódtáblák, választási listák**

Nincs.

**2.4.8.** **Rendszerparaméterek**

Nincs.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 41/136|

##### 2.5. H06_04 – HUBA – Értesítésfogadó adatai [#89347]

**2.5.1.** **Ablak/lap feladatai**

A HUBA bejegyzéshez rögzített értesítéseknél kiválasztható értesítésfogadó
alapadatainak rögzítése, ill. módosítása.

**2.5.2.** **Ablak/lap megjelenése**


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 42/136|


**2.5.3.** **Ablak/lap működése**

Az ablak a „ **H06_01** **– HUBA – Értesítési beállítások** ” felületen az „ **Értesítésfogadók**

**beállításai** ” lapfülön található (Új), (Szerkesztés), ill.

(Megtekintés) nyomógomb kezelését követően nyílik meg.

A nyomógombok csak azon GVK profil azonosítójú felhasználó számára aktív,
megnyomható, akihez az alábbi operandus hozzá van rendelve:

     -, ill. nyomógomb:
**OP_H06_04_ErtesitesFogadoSzerkeszt** operandus

     - nyomógomb: **OP_H06_04_ErtesitesFogadoMegtekint** operandus.

**Az ablak felépítése**

Az ablak a képernyő közepén jelenik meg a H06_01A felett.

Az ablak tartalmazza:

     - Az ablak azonosítóját, valamint megnevezését egy fehér hátterű sávban:

**H06_04 – HUBA – Értesítésfogadó adatai**

     - Beviteli és megjelenítő mezők:

`o` Lenyíló listás beviteli mező autocomplete (kiválasztási) funkcióval: Név,

GVK azonosító, Értesítési szint, Terület, [#94940] Szervezeti [#94940 vége] egység,
Szolgálati hely, Szervezet, Munkakör, Feladat

`o` Lenyíló listás chips-es beviteli mezők autocomplete (kiválasztás)

funkcióval: Értesítési csoport, Szűkítés főkódra, Bővítés főkódra

`o` Egysoros szöveges beviteli mezők: Törzsszám, Mobilszám, E-mail cím

     - Checkbox-ok: Külsős, Állandó értesítésfogadó, Telefonon értesítendő, SMS-ben

értesítendő, E-mailben értesítendő

     - Nyomógombok:

`o` nyomógomb: A < **Mentés és bezárás**       - nyomógomb
alapértelmezetten kezelhető (megnyomható), amennyiben a GVK profil
azonosítójú felhasználóhoz hozzá van rendelve az
**OP_H06_04_ErtesitesFogadoSzerkeszt** operandus.

`o` nyomógomb: A < **Mégsem**       - nyomógomb
alapértelmezetten kezelhető (megnyomható).

     - nyomógomb az ablak jobb felső sarkában az ablak bezárásához.

**Ablak működési módok:**

A képernyő három különböző módon nyitható meg:

     - **Rögzítés** : A „ **H06_04** **- HUBA - Értesítésfogadó** ” ablak mentésével jön létre az

értesítésfogadó, a konkurenskezelés aktív.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 43/136|



        - **Szerkesztés** : Az ablak betöltésekor feltöltődnek a mezők a korábban mentett

tartalommal, a szerkeszthető mezők aktívak, a konkurenskezelés aktív.

        - **Megtekintés** : Az ablak betöltésekor feltöltődnek a mezők a korábban mentett

tartalommal, minden mező inaktív, nincs konkurenskezelés.

**Ablakbetöltés és működés megnyitási módonként**

Összefoglaló táblázat a mezők szerkeszthetőségéről:




















|Mező neve|Kötelező? (ha nem törölt)|Rögzítés|Szerkesztés|Megtekintés|
|---|---|---|---|---|
|Név|I|szerkeszthető, ha nincs AD azonosító|nem szerkeszthető|nem szerkeszthető|
|GVK azonosító|I, ha van|szerkeszthető, ha több GVK azonosító van|nem szerkeszthető|nem szerkeszthető|
|Törzsszám|N|nem szerkeszthető|nem szerkeszthető|nem szerkeszthető|
|Külsős|N|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|
|Állandó értesítésfogadó|N|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|
|Értesítési szint|I|szerkeszthető, ha nincs GVK azonosító|szerkeszthető, ha nem törölt és ha nincs GVK azonosító|nem szerkeszthető|
|Terület|I, ha Értesítési szint = Terület|szerkeszthető, ha nincs GVK azonosító|szerkeszthető, ha nem törölt és ha nincs GVK azonosító|nem szerkeszthető|
|#94940 Szervezeti #94940 vége egység|I, ha Értesítési szint = #94940 Szervezeti #94940 vége egység|szerkeszthető, ha nincs GVK azonosító|szerkeszthető, ha nem törölt és ha nincs GVK azonosító|nem szerkeszthető|
|Szolgálati hely|I, ha Értesítési szint = Szolgálati hely|szerkeszthető, ha nincs GVK azonosító|szerkeszthető, ha nem törölt és ha nincs GVK azonosító|nem szerkeszthető|
|Értesítési csoport|N|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|
|Szervezet|I|szerkeszthető, ha nincs GVK azonosító|szerkeszthető, ha nem törölt és ha nincs GVK azonosító|nem szerkeszthető|
|Szakág|#99383 N|szerkeszthető, ha nincs GVK azonosító|szerkeszthető, ha nem törölt és ha nincs GVK azonosító|nem szerkeszthető|
|Munkakör|I|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|
|Feladat|I|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|
|Szűkítés főkódra|N|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|
|Bővítés főkódra|N|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|
|Telefonon értesíthető|N|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 44/136|











|SMS-ben értesíthető|N|szerkeszthető|szerkeszthető, ha nem törölt|nem szerkeszthető|
|---|---|---|---|---|
|Mobilszám|I, ha Telefonon vagy SMS-ben értesíthető|szerkeszthető, ha nincs AD azonosító ÉS (Telefonon VAGY SMS- ben értesíthető)|szerkeszthető, ha nem törölt ÉS nincs AD azonosító ÉS (Telefonon VAGY SMS- ben értesíthető)|nem szerkeszthető|
|E-mailben értesíthető|N|szerkeszthető, ha nem törölt|szerkeszthető, ha nem törölt|nem szerkeszthető|
|E-mail cím|I, ha E-mailben értesíthető|szerkeszthető, ha nincs AD azonosító ÉS E- mailben értesíthető|szerkeszthető, ha nem törölt ÉS nincs AD azonosító ÉS E-mailben értesíthető|nem szerkeszthető|


Az értesítésfogadó törlése a „ **H06_01 – HUBA - Értesítés** ” ablakban indítható.

**2.5.3.1.** **Rögzítés mód** **[#89384]**

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H06_04”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Create”

  - Bejegyzés azonosító (’MAIN_ID’): NULL

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

A kliens minden kereső paraméterre vonatkozóan meghívja az „ **S_08 - Lekérdezési**
**paraméterek értékkészletének lekérdezése** ” szolgáltatást, bemenő paraméterként
átadva neki az adatelem azonosítóját (AutosuggestId).

Az S_08 hívások és az átadott értékek:

  - GVK Azonosító (’GvkUserId’)

  - Értesítésfogadó (’ErtesitesFogado’)

  - Értesítési szint (’HierarchiaSzint’)

  - Terület (’Terulet_A20’)

  - #94940 Szervezeti #94940 vége egység (’ForgalmiCsomopont_A20’)

  - Szolgálati hely (’SzolgalatiHely_A20’)

  - Értesítési csoport (’ErtesitesiCsoport’)

  - Szervezet (’Szervezet’)

  - Szakág (’Szakag_H08_01’)

  - Munkakör/Feladat (’MunkakorFeladat’)

  - Főkód (’KesesFokod’)

A kliens az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ”
szolgáltatás hívások során visszakapott listaszerű adatokkal az alábbiak szerint feltölti
az autocomplete (kiválasztási) funkcióval rendelkező szöveges beviteli mezők

értékkészletét az alábbiak szerint.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 45/136|


**Az ablak az alábbi adatbeviteli mezőket tartalmazza**, amelyek az alábbi funkciókkal és
szabályokkal bírnak. A kliens az alábbi sorrendben teszi lehetővé a mezők töltését.

1. **Név** : A mező kitöltése kötelező, az ablak betöltésekor piros kerettel és felirattal

jelenik meg. Az S_08 szolgáltatástól visszakapott Értesítésfogadó
(’Értesítésfogadó’) ’text’ mezőben kapott Global AD felhasználók nevei közül
lehet választani vagy a ’Create’ lehetőséget választva szövegesen beírt név
rögzíthető. A szolgáltatástól visszakapott értékekben 3 karakter beírását
követően indul [[#98613 ]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/96564) a név elejében történőt [[#98613 vége]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/96564) keresés. Kötelező mező.

Global AD felhasználó választása esetén a kliens a GVK profilok lekérdezése
céljából meghívja az „ **S_05 - Felhasználói beállítások lekérdezése** ”
szolgáltatást, bemenő paraméterként átadva a kiválasztott AD azonosítót
(’AD_USER_ID’).

2. **GVK azonosító** : Az ablak betöltésekor a mező disabled státuszú. Amennyiben

az S_06 szolgáltatás

       - nem ad vissza egy GVK azonosítót sem, a mező disabled státuszú marad;

       - egy GVK azonosítót ad vissza, akkor az S_06-tól visszakapott GVK profil

neve (’gvk_user_name’) megjelenik a mezőben, a mező disabled
státuszú marad (kötelező mező);

       - több GVK azonosítót ad vissza, az S_06_tól visszakapott GVK profil nevek

(’gvk_user_name’) megjelenik választható értékként a mezőben. A
mező szerkeszthetővé és kötelezővé válik, alapértelmezetten üres.
Kötelező egy GVK azonosító választása.
Egy GVK azonosító, ill. több GVK azonosító esetén a kiválasztott GVK
azonosító esetén a kliens a GVK profilhoz rendelt további adatok
lekérdezése céljából meghívja az „ **S_37 - Felhasználó adatok lekérdezése** ”
szolgáltatást, bemenő paraméterként átadva a GVK azonosítót.

3. **Global AD-ból kapott adatok megjelenítése:**

       - **Törzsszám** : A mező disabled státuszú. A Név mezőben Global AD

felhasználó választása esetén kitöltődik az S_08 szolgáltatástól
visszakapott Értesítésfogadó (’Értesítésfogadó’) ’torzsszam’ mező

értékével.

       - **Mobilszám** : A mező alapértelmezetten disabled státuszú. A Név

mezőben Global AD felhasználó választása esetén kitöltődik az S_08
szolgáltatástól visszakapott Értesítésfogadó (’Értesítésfogadó’) ’mobil’

mező értékével.

A Név mezőben manuálisan rögzített új értesítésfogadó név rögzítése

esetén a mező szerkeszthető.

A Telefonon értesíthető vagy SMS-ben értesíthető checkbox-ok
valamelyikének kezelése (bepipálása) esetén a Mobilszám kötelező

mező.

       - **E-mail cím** : A mező alapértelmezetten disabled státuszú. A Név

mezőben Global AD felhasználó választása esetén kitöltődik az S_08


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 46/136|


szolgáltatástól visszakapott Értesítésfogadó (’Értesítésfogadó’) ’email’

mező értékével.

A Név mezőben manuálisan rögzített új értesítésfogadó név rögzítése

esetén a mező szerkeszthető.

Az E-mailben értesíthető checkbox kezelése (bepipálása) esetén az E
mail cím kötelező mező.

4. **GVK profil adatok megjelenítése** :

       - **Értesítési szint** : A mező szerkeszthető és kötelező mező.

A mezőben az S_08 szolgáltatástól visszakapott Értesítési szint
(’HierarchiaSzint') ’text’ mező értékei jelennek meg a következő kódok
esetén: ’H’ – Hálózat, ’T’ – Terület, ’FC’ – Forgalmi csomópont, ’SZ’ –
Szolgálati hely. Kötelező mező.

Kitöltött GVK azonosító mező esetén kitöltődik az S_37 szolgáltatástól
visszakapott Hierarchia szint (’hierarchia_szint’) mező értékével, a mező

ebben az esetben nem szerkeszthető.

Amennyiben a Külsős checkbox-ot kezeli (bepipálja) a felhasználó, az
Értesítési szint értéke alapértelmezetten kitöltődik a ’H’ – Hálózati

értékkel.

’H’ – Hálózati értesítési szint esetén a Terület, [#94940] Szervezeti [#94940 vége]
egység, Szolgálati hely mezők disabled státuszúak.

          - **Terület** : A mező alapértelmezetten disabled státuszú.
Amennyiben az Értesítési szint értéke ’T’ – Terület, a Terület mező
kötelezővé válik. A mezőben az S_08 szolgáltatástól visszakapott
Terület (’Terulet_A20') ’text’ mező értékei jelennek meg,
amelyekből egyet kell választani.

Kitöltött GVK azonosító mező esetén kitöltődik az S_37
szolgáltatástól visszakapott Terület (’terulet’) mező értékével, a

mező ebben az esetben nem szerkeszthető.

          - #94940 **Szervezeti** #94940 vége **egység** : A mező alapértelmezetten
disabled státuszú. Amennyiben az Értesítési szint értéke ’FC’ –
Forgalmi csomópont, a [#94940] Szervezeti [#94940 vége] egység mező
kötelezővé válik. A mezőben az S_08 szolgáltatástól visszakapott
#94940 Szervezeti #94940 vége egység (’ForgalmiCsomopont_A20')
’text’ mező értékei jelennek meg, amelyekből egyet kell

választani.

Kitöltött GVK azonosító mező esetén kitöltődik az S_37
szolgáltatástól visszakapott Forgalmi csomópont
(’forgalmi_csomopont’) mező értékével, a mező ebben az esetben

nem szerkeszthető.

          - **Szolgálati hely** : A mező alapértelmezetten disabled státuszú.

Amennyiben az Értesítési szint értéke ’SZ’ – Szolgálati hely, a
Szolgálati hely mező kötelezővé válik. A mezőben az S_08


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 47/136|


szolgáltatástól visszakapott Szolgálati hely (’SzolgalatiHely_A20')
’text’ mező értékei jelennek meg, amelyekből egyet kell

választani.

Kitöltött GVK azonosító mező esetén kitöltődik az S_37
szolgáltatástól visszakapott Szolgálati hely (’szolgalati_hely’) mező
értékével, a mező ebben az esetben nem szerkeszthető.

       - **Szervezet** : A mező alapértelmezetten disabled státuszú.

A mezőben az S_08 szolgáltatástól visszakapott Szervezet (’Szervezet')
’text’ mező értékei jelennek meg, melyekből egyet kell választani.

Kitöltött GVK azonosító mező esetén kitöltődik az S_37 szolgáltatástól
visszakapott Vasútvállalat (’Vasutvallalat’) mező értékével, a mező
ebben az esetben nem szerkeszthető. GVK azonosító hiányában a mező

szerkeszthető. Kötelező mező.

       - **Szakág** : A mező alapértelmezetten disabled státuszú.

A mezőben az S_08 szolgáltatástól visszakapott Szakág (’Szakag') mező
értékei jelennek meg, melyekből több érték is választható.

Kitöltött GVK azonosító mező esetén kitöltődik az S_37 szolgáltatástól
visszakapott Szakágak (’szakagak’) mező értékével/értékeivel, a mező
ebben az esetben nem szerkeszthető. GVK azonosító hiányában a mező
szerkeszthető. Opcionális mező.

5. **Egyéb adatok megadása** :

       - **Külsős** : A checkbox alapértelmezetten nem kezelhető. A Név mező

kiválasztásakor válik kezelhetővé. Alapértelmezetten nincs bepipálva.
Opcionális mező.

       - **Állandó értesítésfogadó** : A checkbox alapértelmezetten nem kezelhető.

A Név mező kiválasztásakor válik kezelhetővé. Alapértelmezetten nincs
bepipálva. Opcionális mező.

       - **Értesítési csoport** : A mező alapértelmezetten disabled státuszú. A Név

mező kiválasztásakor válik kezelhetővé. A mezőben az S_08
szolgáltatástól visszakapott Értesítési csoport (’ErtesitesiCsoport') ’text’
mező értékei jelennek meg, amelyekből több is választható. Opcionális

mező

       - A Munkakör és Feladat mezők közül az egyik mező kitöltése kötelező.

          - **Munkakör** : A mező alapértelmezetten disabled státuszú. A Név

mező kiválasztásakor válik kezelhetővé. A mezőben az S_08
szolgáltatástól visszakapott azon Munkakör/Feladat
(’Munkakor/Feladat’) ’text’ mező értékei jelennek meg, amelyek
típusa (’tipus’) ’M’ (= munkakör). Egyet kell választani,
amennyiben a Feladat mező nem kerül kitöltésre.

          - **Feladat** : A mező alapértelmezetten disabled státuszú. A Név mező

kiválasztásakor válik kezelhetővé. A mezőben az S_08


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 48/136|


szolgáltatástól visszakapott azon Munkakör/Feladat
(’Munkakor/Feladat’) ’text’ mező értékei jelennek meg, amelyek
típusa (’tipus’) ’F’ (= feladat). Egyet kell választani, amennyiben a

Munkakör mező nem kerül kitöltésre.

       - **Szűkítés főkódra** és **Bővítés főkódra** : A mező alapértelmezetten

disabled státuszú. A Név mező kitöltésekor válik kezelhetővé. A

mezőben az S_08 szolgáltatástól visszakapott Késés főkód
(’KesesFokod') ’text’ mező értékei jelennek meg, amelyekből több is
választható. Opcionális mező

       - **Telefonon értesíthető** : A checkbox alapértelmezetten nem kezelhető. A

Név mező kiválasztásakor válik kezelhetővé. Alapértelmezetten nincs
bepipálva. Opcionális mező. A checkbox kezelésekor a Mobilszám mező

kötelezővé válik.

       - **SMS-ben értesíthető** : A checkbox alapértelmezetten nem kezelhető. A

Név mező kiválasztásakor válik kezelhetővé. Alapértelmezetten nincs
bepipálva. Opcionális mező. A checkbox kezelésekor a Mobilszám mező

kötelezővé válik.

       - **E-mailben értesíthető** : A checkbox alapértelmezetten nem kezelhető. A

Név mező kiválasztásakor válik kezelhetővé. Alapértelmezetten nincs
bepipálva. Opcionális mező. A checkbox kezelésekor az E-mail cím mező

kötelezővé válik.

**2.5.3.2.** **Szerkesztés mód** [#89393]

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): „H06_04”

    - Esemény (’ACTIVITY’): „WindowOpen”

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Modify”

    - Bejegyzés azonosító (’MAIN_ID’): értesítésfogadó egyedi azonosítója
( **ERTESITES_FOGADO_ID** )

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

A kliens az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól visszakapott
„ **ACTIVITY_ID** ”-val elindítja a konkurenskezelés életjelküldés funkcióját (meghívja a
**„K_15_02** **–** **Életjel** **küldés”** függvényt 20mp-ént (rendszerparaméterben
meghatározott) történő meghívásával.

Az életjelküldés funkció minden esetben ellenőrzi a munkamenet érvényességét, és

eszerint választ küld a kliensnek az alábbiak szerint:

    - „OK” – a függvény frissítette a munkamenetet, a szerkesztés folytatható;


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 49/136|



    - „CEASED_ACTIVITY” – Valamilyen esemény folytán a munkamenet megszakadt,

de a munkamenet még nem került a háttérben lezárásra. A felhasználó dönthet,
hogy folytatja-e a munkát. Ez az eset akkor fordulhat elő, ha az életjelküldés
legutóbb 1 percnél korábban futott le, de még nem érte el a 10 percet
(rendszerparaméterben meghatározott időzítések).

A kliens az alábbi üzenetet jeleníti meg:

`o` Amennyiben a felhasználó azt választja, hogy folytatja a munkamenetet

(< **Igen**         - nyomógombot kezeli), a rendszer úgy kezeli, mintha a munkamenet
folyamatos lett volna. A kliens meghívja a **„K_15_03 – Életjel küldés**
**ellenőrzés nélkül”** eljárást az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatástól ’WindowOpen’ eseménykor visszakapott „ **ACTIVITY_ID** ”-val,
amely ellenőrzés nélkül végrehajtja az életjelküldés funkciót, így a
továbbiakban folytatható a munkamenet.

`o` Amennyiben a felhasználó úgy dönt, hogy a munkamenetet lezárja (< **Nem**     
nyomógombot kezeli), ami egy < **Mégsem**       - gomb megnyomásával
egyenértékű, azaz a kliens mentés nélkül bezárja a képernyőt. Ebben az
esetben a < **Mégsem**       - gomb megnyomása esetén leírt folyamatok
hajtódnak végre.

    - „CLOSED_ACTIVITY” – Valamilyen esemény folytán a munkamenet megszakadt

és a munkamenet a háttérben már lezárásra került, a szerkesztés NEM
folytatható. A kliens mentés nélkül bezárja az ablakot. Ilyen akkor fordulhat elő,
ha hosszabb kihagyás (rendszerparaméterben meghatározandó –
alapértelmezetten 10 perc) után küldött a kliens újra életjelet.

A kliens az alábbi üzenetet jeleníti meg:

Az < **OK**       - nyomógomb kezelése után a < **Mégsem**       - nyomógomb kezelése esetén
leírt folyamatokat hajtja végre a kliens.

    - „ERROR:MISSING_ACTIVITY” – Valamilyen hiba folytán a munkamenet nem

található, a kliens az alábbi üzenetet jeleníti meg:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 50/136|


Az < **OK**       - nyomógomb kezelése után a < **Mégsem**       - nyomógomb kezelése esetén
leírt folyamatokat hajtja végre a kliens.

A kliens minden kereső paraméterre vonatkozóan meghívja az „ **S_08 - Lekérdezési**
**paraméterek értékkészletének lekérdezése** ” szolgáltatást, bemenő paraméterként
átadva neki az adatelem azonosítóját (AutosuggestId).

Az S_08 hívások és az átadott értékek:

    - GVK Azonosító (’GvkUserId’)

    - Értesítési szint (’HierarchiaSzint’)

    - Terület (’Terulet_A20’)

    - #94940 Szervezeti #94940 vége egység (’ForgalmiCsomopont_A20’)

    - Szolgálati hely (’SzolgalatiHely_A20’)

    - Értesítési csoport (’ErtesitesiCsoport’)

    - Szervezet (’Szervezet’)

    - Szakág (’Szakag_H08_01’)

    - Munkakör/Feladat (’MunkakorFeladat’)

    - Főkód (’KesesFokod’)

A kliens az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ”
szolgáltatás hívások során visszakapott listaszerű adatokkal az alábbiak szerint feltölti
az autocomplete (kiválasztási) funkcióval rendelkező szöveges beviteli mezők

értékkészletét az alábbiak szerint.

A kliens ezután meghívja az [#99383] **„S_80 – Értesítésfogadó adatainak lekérdezése”**
szolgáltatást, amelynek bemenő paraméterként az értesítésfogadó azonosítóját
(’ertFogadoId’) adja át. A kliens megjeleníti a szolgáltatástól visszakapott adatokat a
mezőkben és az alábbiak szerint engedélyezi az értékek módosítását:

    - Értesítésfogadó azonosító (’ertFogadoId’): Nem jelenik meg a kliensen.

    - Értesítésfogadó név (’ertFogadoNev’): A Név mezőben jelenik meg.

    - AD azonosító (’adAzonosito’): Nem jelenik meg a kliensen.

    - GVK azonosító (’gvkAzonosito’): A GVK Azonosító mezőben jelenik meg az S_08
tól visszakapott GVK profil név (’GvkUserId’) ’value’ értéke.

    - Törzsszám (’torzsszam’): A Törzsszám mezőben jelenik meg.

    - Külsős (’kulsos’): ’I’ érték esetén a Külsős checkbox bepipálódik; egyébként

nem.

    - Állandó értesítésfogadó (’allando’): ’I’ érték esetén az Állandó értesítésfogadó

checkbox bepipálódik; egyébként nem.

    - Értesítési szint (’ertSzint’): Az Értesítési szint mezőben jelenik meg az S_08-tól

visszakapott Értesítési szint (’HierarchiaSzint’) ’text’ értéke.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 51/136|



    - Terület (’terulet’): A Terület mezőben jelenik meg az S_08-tól visszakapott

Terület (’Terulet_A20’) ’text’ értéke.

    - Egység (’egyseg’): A Szervezeti egység mezőben jelenik meg az S_08-tól

visszakapott Szervezeti egység (’ForgalmiCsomopont_A20’) ’text’ értéke.

    - Szolgálati hely (’szolgHely’): A Szolgálati hely mezőben jelenik meg az S_08-tól

visszakapott Szolgálati hely (’SzolgalatiHely_A20’) ’text’ értéke.

    - Értesítési csoportok (’ertCsoportok’): Az Értesítési csoport mezőben jelenik

(-nek) meg az S_08-tól visszakapott Értesítési csoport (’ErtesitesiCsoport’) ’text’
értéke(i).

`o` Értesítési csoport (’ertCsopId’)

    - Szervezet (’szervezet’): A Szervezet mezőben jelenik meg az S_08-tól

visszakapott Szervezet (’Szervezet’) ’text’ értéke.

    - Szakágak (’szakagak’): A Szakág mezőben jelenik(-nek) meg az S_08-tól

visszakapott Szakágak (’Szakag_H08_01’) ’text’ értéke(i).

`o` Szakág (’szakagId’)

    - Munkakör (’munkakor’):

Az S_08-tól visszakapott Munkakör (’Munkakor’) ’text’ értéke a Munkakör
mezőben jelenik meg, ha a munkakör típusa ’M’ és a Feladat mezőben, ha a
munkakör típusa ’F’.

`o` Munkakör megnevezés (’id’)
`o` Munkakör típus (’tipus’): Lehetséges értéke ’M’ – Munkakör vagy ’F’ –

Feladat.

    - Feladat (’feladat’): A Feladat mezőben jelenik meg az S_08-tól visszakapott

Munkakör/Feladat (’MunkakorFeladat’) ’text’ értéke.

    - Szűkítés főkódokra (’szukitesFokodok’): A Szűkítés főkódra mezőben jelenik

(-nek) meg az S_08-tól visszakapott Főkód (’KesesFokod’) ’text’ értéke(i).

`o` Szűkítés főkódra (’szukitesFokodKod’)

    - Bővítés főkódokra (’bovitesFokodok’): A Bővítés főkódra mezőben jelenik

(-nek) meg az S_08-tól visszakapott Főkód (’KesesFokod’) ’text’ értéke(i).

`o` Bővítés főkódra (’bovitesFokodKod’)

    - Telefonon értesíthető (’telefonErt’): ’I’ érték esetén a Telefonon értesíthető

checkbox bepipálódik; egyébként nem.

    - SMS-ben értesíthető (’smsErt’): ’I’ érték esetén az SMS-ben értesíthető

checkbox bepipálódik; egyébként nem.

    - Email-ben értesíthető (’emailErt’): ’I’ érték esetén az Email-ben értesíthető

checkbox bepipálódik; egyébként nem.

    - Mobilszám (’mobilszam’): A Mobilszám mezőben jelenik meg.

    - E-mail cím (’email’): Az E-mail cím mezőben jelenik meg.

    - Aktív (’aktiv’): Nem jelenik meg a kliensen.
#99383 vége

**2.5.3.3.** **Megtekintés mód** [#89393]

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): „H06_04”

    - Esemény (’ACTIVITY’): „WindowOpen”


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 52/136|



    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): „View”

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

A kliens ezután meghívja az [#99383] **„S_80 – Értesítésfogadó adatainak lekérdezése”**
szolgáltatást #99383 vége, amelynek bemenő paraméterként az értesítésfogadó
azonosítóját (’ertFogadoId’) adja át. A kliens megjeleníti a szolgáltatástól visszakapott
adatokat a mezőkben (ld. Szerkesztés mód leírásában), egyik mező sem szerkeszthető.

**Nyomógombok működése** [#89384]

nyomógomb kezelése: A < **Mentés és bezárás**           - nyomógomb csak
rögzítés, ill. szerkesztés mód esetén kezelhető. A nyomógomb kezelésekor a kliens
először ellenőrzi a kötelező mezők kitöltöttségét.

Amennyiben valamelyik kötelező mezőben nem szerepel érték, a kliens az alábbi popup üzenetet jeleníti meg az ablak felett középen (az üzenetben írt e-mail cím linkként
jelenik meg, rákattintva megnyílik a felhasználó alapértelmezett e-mail kezelő
alkalmazása, új e-mail üzenetet megnyitva, ahol a címzett: [helpdesk@mav](mailto:helpdesk@mav-szk.hu)   - szk.hu ).

Amennyiben minden kötelező mező ki van töltve, a kliens az alábbi sorrendben hívja
meg a szolgáltatásokat:

    - Az ablak szerkesztési módban történt megnyitása esetén a kliens az **„S_27 –**

**Felhasználói aktivitás naplózása** ” szolgáltatástól (WindowOpen eseménykor)
visszakapott **„ACTIVITY_ID** ”-val, soron kívül elindítja a Konkurenskezelés
életjelküldés funkcióját, a **„K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)”**
függvény meghívásával.

    - #98672 Amennyiben a Név mezőben AD user választása nélkül manuálisan adja
meg a felhasználó az értéket, a <Mentés és bezárás> nyomógomb kezelésekor
a kliens a név foglaltság ellenőrzése céljából meghívja az „ **S_18 – Azonosító**
**foglaltság lekérdezése** ” szolgáltatást, bemenő paraméterként átadva a beírt
Értesítésfogadó nevet (’ErtesitesFogadoNev’). A szolgáltatástól visszakapott

érték:

`o` ’true’: A kliens az alábbi pop-up üzenetet jeleníti meg és nem hívja meg

az „ **S_63 – Értesítésfogadó adatainak mentése** ” szolgáltatást:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 53/136|


`o` ’false’: A kliens továbblép, meghívja az „ **S_63 – Értesítésfogadó**

**adatainak mentése** ” szolgáltatást. [#98672 vége]

    - Az ablakban berögzített/módosított mezők értékének elmentése céljából a

kliens meghívja az „ **S_63 – Értesítésfogadó adatainak mentése** ” szolgáltatást,
melynek az alábbi bemenő paramétereket adja át:

`o` Értesítésfogadó azonosítója (’ertFogadoId’): Rögzítési módban NULL,

egyébként az értesítésfogadó azonosítója.
`o` Aktív? (’aktiv’) (I/N): Rögzítési, ill. szerkesztési módban ’I’.
`o` AD azonosító (’adAzonosito’)
`o` GVK azonosító (’gvkAzonosito’)
`o` Értesítésfogadó név (’ertFogadoNev’)
`o` Külsős? (’kulsos’) (I/N)
`o` Állandó értesítésfogadó? (’allando’) (I/N)
`o` Értesítési szint (’ertSzint’): értesítési szint azonosító (max. 1 érték).

Lehetséges értékei:

           - 1 – Hálózat

           - 2 – Terület

           - 3 – Forgalmi csomópont (kliensen: [#94940] Szervezeti [#94940 vége]

egység)

           - 5 – Szolgálati hely
`o` Terület (’terulet’): terület azonosító (max. 1 érték)
`o` #94940 Szervezeti #94940 vége egység (’egyseg’): azonosító (max. 1 érték)
`o` Szolgálati hely (’szolgHely’): azonosító (max. 1 érték)
`o` Értesítési csoport (’ertCsoportok’): több érték is lehet

           - Értesítési csoport azonosító (’ertCsopId’)

           - Értesítési csoport neve (’ertCsopNev’)

lehetséges értékei:

           - V[id] esetén a szervezet vasútvállalat,

           - E[id] esetén a szervezet egyéb szervezet.
`o` Szakág (’szakagak’): lehet több érték is

           - Szakág azonosító (’szakagId’)

           - Szakág neve (’szakagNev’)
`o` Munkakör (’munkakor’): munkakör/feladat azonosító (max. 1 érték).
`o` Feladat (’feladat’): munkakör/feladat azonosító (max. 1 azonosító

lehet).
`o` Szűkítés főkódra (’szukitesFokodra’): főkód kódja (több érték esetén ;
vel elválasztva).
`o` Bővítés főkódra (’bovitesFokodra’): főkód kódja (több érték esetén ;-vel

elválasztva).
`o` Telefonon értesíthető? (’telefonErt’) (I/N)
`o` SMS-ben értesíthető? (’smsErt’) (I/N)
`o` E-mail-ben értesíthető? (’emailErt’) (I/N)
`o` Mobilszám (’mobil’)
`o` E-mail cím (’email’)



-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 54/136|


**Mentés eredménye** (’status’):

`o` 200 – **Sikeres mentés esetén** a kliens az alábbi pop-up üzenetet jeleníti meg:

#99440 eleje

#99440 vége

       - Az ablak szerkesztési módban történt megnyitása esetén a kliens lezárja

a munkamenetet a **„K_15_04** **–** **Munkamenet** **lezárás**
**(SET_DATA_CLOSE)”** eljárás meghívásával, amelynek bemenő
paraméterként az **„S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatástól (WindowOpen eseménykor) visszakapott
**„ACTIVITY_ID** ”-t adja át.

       - A mentést követően a kliens egymás után kétszer meghívja az „ **S_27 –**

**Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő
paraméterekkel:

Első hívás:

`o` Ablakazonosító (’WINDOW_ID’): „H06_04”
`o` Esemény (’ACTIVITY’): „Create”, ill. „Modify” a megnyitás módjától

függően
`o` AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD

azonosítója
`o` GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója
`o` Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON formában a

mentés részletei

`o` Bejegyzés azonosító (’MAIN_ID’): szerkesztési mód esetén az

értesítés fogadó egyedi azonosítója ( **ERTESITES_FOGADO_ID** ),
egyéb esetekben NULL
`o` Bejegyzés sub azonosító (’SUB_ID’): NULL
`o` Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A

WindowOpen eseménykor kapott ACTIVITY_ID.

Második hívás: ld. Ablak bezárása


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 55/136|


Ebben az esetben a < **Mentés és bezárás**      - nyomógomb újra kezelhető.

nyomógomb kezelése: A < **Mégsem**        - nyomógomb minden módban
kezelhető. A nyomógomb kezelésekor rögzítési, ill. szerkesztési módban a kliens az
alábbi pop-up üzenetet jeleníti meg az ablak felett középen:

#99440 eleje

#99440 vége

    - < **Igen**    - nyomógomb kezelésekor bezárul a pop-up üzenet és a H06_04 ablak is.

Szerkesztési módban a kliens meghívja a **„K_15_04 – Munkamenet lezárás**
**(SET_DATA_CLOSE)”** eljárást, amelynek bemenő paraméterként az **„S_27 –**
**Felhasználói aktivitás naplózása** ” szolgáltatástól (WindowOpen eseménykor)
visszakapott **„ACTIVITY_ID** ”-t adja át. Ezzel zárja a munkamenetet.

Ezután meghívja az S_27 szolgáltatást: ld. Ablak bezárása.

    - < **Nem**    - nyomógomb kezelésekor bezárul a pop-up üzenet, a felhasználó tovább

folytatja a munkáját a H06_04 ablakban.

#99383 A nyomógomb kezelésekor megtektinési módban a kliens bezárja az ablakot.
#99383 vége

**Ablak bezárása**

A képernyő bezárásakor, valamint mellékattintáskor a kliens meghívja az „ **S_27 –**
**Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): „H06_04”

    - Esemény (’ACTIVITY’): WindowClose

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Create”, „Modify” vagy

„View” a megnyitás módjától függően


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 56/136|



    - Bejegyzés azonosító (’MAIN_ID’): szerkesztési mód esetén az értesítés fogadó

egyedi azonosítója, egyéb esetekben NULL.

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID **.**


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 57/136|

### **2.5.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **

















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Név:|Név|-|combobox|AN50||-||
|GVK azonosító:|GVK azonosító|-|combobox|||-|GVK.GVK_USERS|
|Törzsszám:|Törzsszám|-|szöveges megjelenítő mező|||-|HUBA.GLOBAL_AD_ USERS|
|Külsős:|Külsős|-|checkbox|||-||
|Állandó értesítésfogadó:|Állandó értesítésfogadó|-|checkbox|||-||
|Értesítési szint:|Értesítési szint|-|combobox|||-|GVK.K_HIERARCHIA_ SZINT|
|Terület:|Terület|-|combobox|||-|GVK.K_TERULET|
|#94940 Szervezeti #94940 vége egység:|#94940 Szervezeti #94940 vége egység|-|combobox|||-|GVK_GIS.RAILWAY_ OBJECTS_ALLOMASO K_V|
|Szolgálati hely:|Szolgálati hely|-|combobox|||-|GVK_GIS.RAILWAY_ OBJECTS_ALLOMASO K_V|
|Értesítési csoport:|Értesítési csoport|-|combobox (chips-es)|||-|HUBA.ERTESITESI_CS OPORT|
|Szervezet:|Szervezet|-|combobox|||-|HUBA.SZERVEZETEK_ V|
|Szakág:|Szakág|-|combobox|||-|HUBA.K_SZAKAG|
|Munkakör:|Munkakör|-|combobox|||-|HUBA.K_MF|
|Feladat:|Feladat|-|combobox|||-|HUBA.K_MF|
|Szűkítés főkódra:|Szűkítés főkódra|-|combobox (chips-es)|||-|GVK.K_KESESFOKOD|
|Bővítés főkódra:|Bővítés főkódra|-|combobox (chips-es)|||-|GVK.K_KESESFOKOD|
|Telefonon értesíthető:|Telefonon értesíthető|-|checkbox|||-||
|SMS-ben értesíthető:|SMS-ben értesíthető|-|checkbox|||-||
|Mobilszám:|Mobilszám|-|szöveges beviteli mező|AN50|+00 (00) 123 4567|-|HUBA.GLOBAL_AD_ USERS|

#### E-mailben E-mailben - checkbox - értesíthető: értesíthető


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 58/136|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Mentés és bezárás|-|megnyomható||
||Mégsem|-|megnyomható||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 59/136|


**2.5.6.** **Hívott szolgáltatások**










|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés|-|K_15 – Konkurenskezelés|
|Ablakbetöltés|-|S_08 - Lekérdezési paraméterek értékkészletének lekérdezése|
|Ablakbetöltés|-|#99383 S_80 – Értesítésfogadó adatainak lekérdezése|
|Új értesítésfogadó rögzítésekor AD felhasználó választását követően|-|S_05 - Felhasználói beállítások lekérdezése|
||-|S_27 – Felhasználói aktivitás naplózása|
|||K_15 – Konkurenskezelés|
|||S_63 – Értesítésfogadó adatainak mentése|
||-|S_27 – Felhasználói aktivitás naplózása|
|||K_15 – Konkurenskezelés|
|||S_27 – Felhasználói aktivitás naplózása|
|Ablakbezárás||S_27 – Felhasználói aktivitás naplózása|


**2.5.7.** **Rendszerüzenetek**





|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|#98672 <Mentés és bezárás> nyomógomb kezelésekor rögzítési módban|„A beírt Értesítésfogadó név már létezik. Kérem módosítsa.”|Hiba|
|<Mentés és bezárás> nyomógomb kezelésekor rögzítési, ill. szerkesztési módban|„Nincs minden kötelező mező kitöltve. AD-ban létező felhasználó esetén a mobilszám, ill. e-mail cím javítását/pótlását kérjük igényelje a Helpdesk-től (helpdesk@mav-szk.hu).”|Hiba|
|<Mégsem> nyomógomb kezelésekor rögzítési, ill. szerkesztési módban|„Biztosan elveti a módosításait?”|Figyelmeztető|
|#92775 Az új rekord mentése sikeres|„A híváseredmény mentése sikeres volt.”|Információ|
|#92775 Az új rekord mentése sikertelen|„A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX”|Hibaüzenet|


**2.5.8.** **Kódtáblák, választási listák**

Nincs.




-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 60/136|


**2.5.9.** **Rendszerparaméterek**

Nincs.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 61/136|

##### 2.6. H06_05 – HUBA – Értesítési csoportok [#89356]

**2.6.1.** **Ablak/lap feladatai**

Az ablak az értesítésfogadóhoz beállítható értesítési csoportok karbantartására
(rögzítésére, módosítására, törlésére) szolgál.

**2.6.2.** **Ablak/lap megjelenése**

**2.6.3.** **Ablak/lap működése**

Az ablak a „ **H06_01** **– HUBA – Értesítési beállítások** ” felületen az „ **Értesítésfogadók**

**beállításai** ” lapfülön található (Értesítési csoportok) nyomógomb

kezelését követően nyílik meg. A (Értesítési csoportok) nyomógomb


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 62/136|


csak azon GVK profil azonosítójú felhasználó számára aktív, megnyomható, akihez az
**OP_H06_05_ErtesitesiCsoportokMegjelenitMent** operandus hozzá van rendelve.

**Az ablak felépítése**

Az ablak a képernyő közepén jelenik meg a H06_01A felett, vertikálisan dinamikusan
(ld. értesítési csoport név megadása).

Az ablak tartalmazza:

    - Az ablak azonosítóját, valamint megnevezését egy fehér hátterű sávban:

**H06_05 – HUBA – Értesítési csoportok**

    - Kapcsoló:

A kétállású kapcsoló ki-bekapcsolható. Bekapcsolt állapotban a kapcsoló
háttérszíne sötétebb szürke, kikapcsolt állapotban világosszürke.

A kapcsoló alapértelmezetten kikapcsolt állapotú. Bekapcsolt állapotban a griden megjelennek a törölt értesítési csoportok is.

    - Lista:

`o` Táblázatban jelenik meg az összes kért információ.

`o` Fejléc:

Amennyiben az oszlopcím nem fér ki, az **Oszlopcím…** jelenik meg. Tooltipben olvasható a teljes oszlopcím.

*Sorbarendezés* : Az oszlopcím jobb oldalán található (Sorbarendezés)
ikonra kattintva rendezhető a táblázat megjelenített tartalma. Az
alapértelmezett rendezés az értesítési csoport neve szerint történik ABC

sorrendben.

Az oszlopcím mellett egy felfelé (növekvő) vagy lefelé (csökkenő) mutató
nyíl jelzi, hogy mi szerint van rendezve. Egyszerre egy oszlop szerint

rendezhető a táblázat.

*Oszlopszűrés* : Az oszlopcím bal oldalán található (Oszlopszűrés) ikonra
kattintva az alábbi pop-up ablak segítségével a megjelenített találati lista
adott oszlopa szerinti további szűrésre van lehetőség:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 63/136|


Az alábbi szűrési feltételek alkalmazhatók: Tartalmaz (ez az
alapértelmezett) / Egyezik / Kisebb / Kisebb, egyenlő / Nagyobb / Nagyobb,
egyenlő / Üres / Nem üres. Egymást követően több oszlopon is beállítható
oszlopszűrés.

`o` Adatok:

Ablakbetöltéskor a grid-ben megjelennek az „ **S_57 – Értesítési csoportok**
**lekérdezése** ” szolgáltatástól visszakapott adatok az ott definiált feltételek
alapján.

`o` Alsó vízszintes gördítősáv (horizontális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt oszlopa,
akkor az alsó vízszintes gördítősáv segítségével lehet megtekinteni a
táblázat többi oszlopát.

`o` Oldalsó függőleges gördítősáv (vertikális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt sora,
akkor az oldalsó (jobb oldalon) függőleges gördítősáv segítségével lehet
megtekinteni a táblázat többi sorát.

    - Nyomógombok:

`o` nyomógomb: Az < **Új**      - nyomógomb alapértelmezetten
kezelhető (megnyomható).

`o` nyomógomb: A < **Szerkesztés**      - nyomógomb
alapértelmezetten nem kezelhető (nem megnyomható). Abban az


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 64/136|


esetben válik kezelhetővé (megnyomhatóvá), ha a grid-en van kijelölve

egy sor.

`o` nyomógomb: A < **Törlés**      - nyomógomb alapértelmezetten
nem kezelhető (nem megnyomható). Abban az esetben válik
kezelhetővé (megnyomhatóvá), ha a grid-en van kijelölve egy sor.

    - Értesítési csoport neve:

Az Értesítési csoport neve és a szövegesen megadható szerkesztő mező
alapértelmezetten nem jelenik meg. A mezőnév és a szerkesztő mező az < **Új**      vagy < **Szerkesztés**      - nyomógomb kezelésekor jelenik meg az ablakban.

    - Nyomógombok:

`o` nyomógomb: A < **Mentés**      - nyomógomb
alapértelmezetten nem kezelhető (nem megnyomható). Az < **Új**         - vagy
< **Szerkesztés**         - nyomógomb kezelésekor jelenik meg az ablakban, ekkor

válik kezelhetővé.

`o` nyomógomb: A < **Mégsem**      - nyomógomb
alapértelmezetten nem kezelhető (nem megnyomható). Az < **Új**         - vagy
< **Szerkesztés**         - nyomógomb kezelésekor jelenik meg az ablakban, ekkor

válik kezelhetővé.

    - nyomógomb az ablak jobb felső sarkában az ablak bezárásához.

**Ablakbetöltés**

Az ablak betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens meghívja
az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő
paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_05’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak megnyitásakor a ’Töröltek is’ kapcsoló kikapcsolt állapotú.

Az ablak betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens bemenő
paraméter nélkül meghívja az „ **S_57 – Értesítési csoportok lekérdezése** ” szolgáltatást.

A kliens a szolgáltatástól visszakapott értékeket megjeleníti a grid-en:

    - Értesítési csoport egyedi azonosítója: A kliensen nem jelenik meg.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 65/136|



    - Értesítési csoport megnevezése: A kliensen az ’Értesítési csoport neve’

mezőben jelenik meg.

    - Aktív? (I/N): A kliensen a ’Törölve’ mezőben jelenik meg.

**Grid és kapcsoló működése**

A kapcsoló kezelésekor a kapcsoló bekapcsolt állapotra vált. A grid-en
megjelennek az ablakbetöltéskor meghívott S_57 szolgáltatástól visszakapott inaktív
értesítési csoportok is. A kapcsoló újbóli kezelésekor a kapcsoló kikapcsolt állapotra
vált és a grid-ből eltűnnek az inaktív értesítési csoportok.

**Nyomógombok kezelése**

    - nyomógomb kezelése:

Az < **Új**      - nyomógomb kezelésekor a nyomógomb alatt megjelenik az alábbi

szekció:

Az ’Értesítési csoport neve’ kötelezően kitöltendő mező.

A < **Mentés**      - nyomógomb kezelésekor a kliens vizsgálja a mező kitöltöttségét:

`o` Nem üres mező esetén a kliens az új értesítési csoport elmentése

céljából az alábbi bemenő paraméterekkel meghívja az „ **S_58 –**
**Értesítési csoport adatainak mentése** ” szolgáltatást:

          - Értesítési csoport azonosítója: NULL

          - Értesítési csoport megnevezése

          - Aktív? (I/N): ’I’

A kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

          - Ablakazonosító (’WINDOW_ID’): ’H06_05’

          - Esemény (’ACTIVITY’): ’Create’

          - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD

azonosítója

          - GVK felhasználó (’GVK_USER’): GVK felhasználói profil
azonosítója

          - Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON

formában a mentés részletei

          - Bejegyzés azonosító (’MAIN_ID’): NULL

          - Bejegyzés sub azonosító (’SUB_ID’): NULL

          - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’):

NULL

Mentést követően a kliens a grid frissítése céljából meghívja az „ **S_57 –**
**Értesítési csoportok lekérdezése** ” tartalmát. Az ’Értesítési csoport neve’


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 66/136|


mező, a < **Mentés**        - és < **Mégsem**        - nyomógombok visszaváltanak

disabled státuszúra.

`o` Üres mező esetén a kliens az alábbi pop-up üzenetet jeleníti meg az

ablak felett:

A < **Mégsem**      - nyomógomb kezelésekor a kliens nem menti el a beírt értéket. Az
’Értesítési csoport neve’ mező, a < **Mentés**      - és < **Mégsem**      - nyomógombok
visszaváltanak disabled státuszúra. [#99440 eleje] A kliens az alábbi pop-up üzenetet
jeleníti meg:

#99440 vége

    - nyomógomb kezelése:

A < **Szerkesztés**      - nyomógomb kezelésekor a nyomógomb alatt megjelenik az

alábbi szekció:

Az ’Értesítési csoport neve’ mezőben megjelenik a grid-en kijelölt sorban
szereplő név értéke. Kötelezően kitöltendő mező, módosítást követően sem

lehet üres.

A < **Mentés**      - nyomógomb kezelésekor a kliens vizsgálja a mező kitöltöttségét:

`o` Nem üres mező esetén a kliens az értesítési csoport nevének

módosítása céljából az alábbi bemenő paraméterekkel meghívja az
„ **S_58 – Értesítési csoport adatainak mentése** ” szolgáltatást:

          - Értesítési csoport azonosítója

          - Értesítési csoport megnevezése

          - Aktív? (I/N): ’I’


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 67/136|


`o` Amennyiben módosításkor a mező üres marad, a kliens az alábbi pop
up üzenetet jeleníti meg az ablak felett:

A < **Mégsem**      - nyomógomb kezelésekor a kliens nem menti el a módosítást. Az
’Értesítési csoport neve’ mező, a < **Mentés**      - és < **Mégsem**      - nyomógombok

visszaváltanak disabled státuszúra.

#92775 **Mentés eredménye** (’status’):

`o` 200 – **Sikeres mentés esetén** a kliens az alábbi pop-up üzenetet jeleníti meg:

#99440 eleje
```
      o

```
#99440 vége

       - A mentést követően a kliens meghívja az „ **S_27 – Felhasználói aktivitás**

**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

          - Ablakazonosító (’WINDOW_ID’): ’H06_05’

          - Esemény (’ACTIVITY’): ’Modify’

          - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD

azonosítója

          - GVK felhasználó (’GVK_USER’): GVK felhasználói profil
azonosítója

          - Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON

formában a mentés részletei

          - Bejegyzés azonosító (’MAIN_ID’): NULL

          - Bejegyzés sub azonosító (’SUB_ID’): NULL

          - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’):

NULL

Mentést követően a kliens a grid frissítése céljából meghívja az „ **S_57 –**
**Értesítési csoportok lekérdezése** ” tartalmát. Az ’Értesítési csoport neve’


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 68/136|


mező, a < **Mentés**        - és < **Mégsem**        - nyomógombok visszaváltanak

disabled státuszúra.

`o` 599 vagy 400 – **Sikertelen mentés esetén** a kliens az alábbi popup üzenetet

jeleníti meg a kapott RequiestId-val:

Sikertelen a mentés, ha az értesítési csoport valamelyik adatának mentése

nem volt sikeres az adatbázisba.

Ebben az esetben a < **Mentés és bezárás**      - nyomógomb újra kezelhető. [#92775 vége]

    - nyomógomb kezelése:

A < **Törlés**      - nyomógomb kezelésekor a kliens a grid-en kijelölt értesítési csoport
inaktívra módosítása céljából az alábbi bemenő paraméterekkel meghívja az
„ **S_58 – Értesítési csoport adatainak mentése** ” szolgáltatást:

`o` Értesítési csoport azonosítója
`o` Értesítési csoport megnevezése
`o` Aktív? (I/N): ’N’

A kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

`o` Ablakazonosító (’WINDOW_ID’): ’H06_05’
`o` Esemény (’ACTIVITY’): ’Modify’
`o` AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója
`o` GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója
`o` Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON formában a

mentés részletei

`o` Bejegyzés azonosító (’MAIN_ID’): NULL
`o` Bejegyzés sub azonosító (’SUB_ID’): NULL
`o` Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Törlést követően a kliens a grid frissítése céljából meghívja az „ **S_57 – Értesítési**
**csoportok lekérdezése** ” tartalmát. A törölt értesítési csoport már nem jelenik
meg a grid-en. [#99440 eleje] A kliens az alábbi pop-up üzenetet jeleníti meg:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 69/136|


#99440 vége

**Ablak bezárása**

Az ablak bezárása a böngészőfülön lévő **<X>** nyomógombra kattintással lehetséges.

Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_05’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 70/136|

### **2.6.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **









|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|---|
|Toolbar - Kapcsolók||||||||
||Törölt értesítési csoportok|-|two-state- button|||kikapcsolt||
|Grid||||||||
||(szűrés: Tartalmaz)|Oszlopszűrés||||||
||(szűrés: combobox)||combobox|||||
||(rendezés)|Sorbarendezés||||||
||Horizontális scrollbar|-|scrollbar|||-||
||Vertikális scrollbar|-|scrollbar|||-||
|Értesítési csoport neve||||||||
|Értesítési csoport neve:|Értesítési csoport neve:|-|label|||nem jelenik meg||
|-|(Értesítési csoport neve)|-|szöveges mező|AN50||nem jelenik meg|HUBA.ERTESITESI_CSOP ORT|

### **Grid oszlopai az alapértelmezett sorrendben **





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Hossz|Maszk/ Típus|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|
|Értesítési csoport neve|Értesítési csoport neve|Értesítési csoport neve|AN50||-|HUBA.ERTESITESI_CSOPORT|
|Törölt|Törölt|Törölt|boolean|I/N|-|HUBA.ERTESITESI_CSOPORT|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 71/136|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Új felvitel|-|megnyomható||
||Szerkesztés|-|nem nyomható meg||
||Törlés|-|nem nyomható meg||
||Mentés|-|nem nyomható meg||
||Mégsem|-|nem nyomható meg||


**2.6.5.** **Hívott szolgáltatások**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés|-|S_57 – Értesítési csoportok lekérdezése|
||-|S_58 – Értesítési csoport adatainak mentése|
|||S_27 – Felhasználói aktivitás naplózása|
|||S_58 – Értesítési csoport adatainak mentése|
||-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.6.6.** **Rendszerüzenetek**





|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|<Új> nyomógomb kezelését követően üres értesítési csoport névvel <Mentés> nyomógomb kezelésekor|„Nincs minden kötelező mező kitöltve.”|Hiba|
|<Szerkesztés> nyomógomb kezelését követően üres értesítési csoport névvel <Mentés> nyomógomb kezelésekor|„Nincs minden kötelező mező kitöltve.”|Hiba|
|#92775 Az új rekord mentése sikeres|„A híváseredmény mentése sikeres volt.”|Információ|
|#92775 Az új rekord mentése sikertelen|„A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX”|Hibaüzenet|


**2.6.7.** **Kódtáblák, választási listák**

Nincs.




-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 72/136|


**2.6.8.** **Rendszerparaméterek**

Nincs.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 73/136|

##### 2.7. H06_06 – HUBA – Értesítések kezelése [ #89448]

**2.7.1.** **Ablak feladatai**

A MÁV Zrt. vasúti pályahálózatán keletkezett üzemzavarok és nem tervezett
korlátozások adatait tartalmazó bejegyzésekhez kapcsolódó értesítések kezelése:

     - hálózati és területi értesítések rögzítése és kezelése,

     - az értesítéshez értesítési mátrix alapján telefonon, sms-ben, ill. e-mailben

értesítendők automatikus kikeresése,

     - az értesítéshez további értesítendő(k) manuális hozzáadási lehetősége,

     - sms és e-mail értesítések kiküldése az kiválasztott értesítendők részére,

     - kiküldött értesítések áttekintése értesítési naplóban,

     - telefonos értesítés sikerességének indítása.

**2.7.2.** **Ablak megjelenése** [#89448]

**Értesítések:**

     - Megtekintés:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 74/136|



    - Új értesítés rögzítése

Üres mezőkből feltöltésével:

Másolással:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 75/136|


**Értesítési napló:**

**2.7.3.** **Ablak működése** [#89448]

Az ablak az alábbi nyomógombok kezelését követően nyílik meg új böngésző lapon
alapértelmezetten megtekintés módban:

     - a „ **H01_01 - HUBA - Bejegyzések** ” felületen a grid-/kártyanézeten egy bejegyzés

kijelölését követően az nyomógomb kezelésekor az
alapértelmezett „ **H06_06A – HUBA - Értesítések** ” lapfül, amennyiben a GVK
profilú felhasználó rendelkezik az **OP_H06_06_ErtesitesiMegtekint** vagy
**OP_H06_06_ErtesitesSzerkeszt** vagy **OP_H06_06_ErtesitesiNaploMegtekint**
operandussal;


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 76/136|



    - a „ **H02_01 – HUBA – Bejegyzés kezelése** ” felületen az Értesítések csempén

található, ill. nyomógomb kezelésekor az alapértelmezett „ **H06_06A –**
**HUBA - Értesítések** ” lapfül, amennyiben a GVK profilú felhasználó rendelkezik
az **OP_H06_06_ErtesitesiNaploMegtekint** vagy
**OP_H06_06_ErtesitesSzerkeszt** operandussal;

    - a „ **H02_01 – HUBA – Bejegyzés kezelése** ” felületen az Értesítések csempén

található nyomógomb kezelésekor a „ **H06_01B – HUBA – Értesítési napló** ”
lapfül nyílik meg, [#89704] amennyiben a GVK profilú felhasználó rendelkezik az
**OP_H06_06_ErtesitesiNaploMegtekint** operandussal. [#89704 vége]

Az ablak tehát azon GVK profil azonosítójú felhasználó számára nyílik meg, akihez az
alábbi operandusok közül legalább az egyik hozzá van rendelve:

    - **OP_H06_06_ErtesitesMegtekint**

    - **OP_H06_06_ErtesitesSzerkeszt**

    - **OP_H06_06_ErtesitesiNaploMegtekint**

Az „ **A01 - GVK - Térkép** ”, „ **H01_01 – HUBA - Bejegyzések** ” vagy „ **H02_01 – HUBA –**
**Bejegyzés kezelése** ” ablak bezárása esetén automatikusan bezáródik a H06_06 ablak

is.

**Az ablak felépítése** [#89448]

    - Az ablak kitölti a teljes képernyőt.

    - *Fejléc:*

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet
használatakor a fejléc háttérszíne középszürke (7F7F7F).

Üzemi (PROD)

Élesítéskor frissítendő

Felhasználói teszt (QA)

QA-ra kihelyezéskor

Belső teszt (TEST)

TEST-re kihelyezéskor

Fejlesztői (DEV)

DEV-re kihelyezéskor

`o` Középen az ablak azonosítóját és megnevezését: „ **H06_06 - HUBA –**

**Értesítések kezelése** ”

`o` Jobbszélen:

          - Rendszer neve és logója, valamint a rendszer neve alatt a

frontend verziószáma jelenik meg.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 77/136|



          - A logó előtt a GVK környezet neve:

              - üzemi (PROD): Nem jelenik meg a kliensen.

              - felhasználói teszt (QA): „ **QA** ”

              - teszt (TEST): „ **TEST** ”

              - fejlesztői (DEV): „ **DEV** ”

          - GVK profil név:

A GVK-ba történt bejelentkezéskor érvényes GVK profil név
megjelenítésére szolgál.

    - *Bejegyzés azonosító:* A fejléc alatt jelenik meg a bejegyzés HUBA azonosítója,

háttérszíne megegyezik a „ **H02_01 – HUBA – Bejegyzés kezelése** ” ablakban az
Értesítések csempe feliratának háttérszínével.

    - *Tabbar (fülmegjelenítő sáv):*

A fejléc alatt az alábbi nézetek jelennek meg:

`o` **Értesítések**      - alapértelmezetten ez az aktív tab/fül

          - A tabfül technikai elnevezése: „H06_06A – Értesítések”

              - Az „ **A** ” betű nem jelenik meg a felületen, csak az

ablakazonosítóban.
`o` **Értesítési napló**

          - A tabfül technikai elnevezése: „H06_06B – Értesítési napló”

              - A „ **B** ” betű nem jelenik meg a felületen, csak az

ablakazonosítóban.

`o` Az aktív tab/fül aláhúzva jelenik meg.

**Ablakbetöltés** [#89448]

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_06A’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): Bejegyzés azonosítója

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Ezután az alapértelmezett H06_06A – Értesítések lapfül betöltésekor a kliens meghívja
az „ **S_64 – Bejegyzés értesítések lista lekérdezése** ” szolgáltatást, amelynek bemenő


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 78/136|


paraméterként a bejegyzés azonosítóját adja át. A kliens a szolgáltatástól visszakapott
adatokat a Megtekintés módnál leírtak szerint jeleníti meg.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 79/136|


**Lapfülek működése**

**2.7.3.1.** **H06_06A** **– Értesítések**

**Lapfül betöltés** [#89479]

Az ablak megnyitásakor alapértelmezetten, egyébként lapfülek közötti váltáskor a
kliens meghívja az „ **S_64 – Bejegyzés értesítéseinek lekérdezése** ” szolgáltatást,
amelynek bemenő paraméterként a bejegyzés azonosítóját adja át. A kliens a
szolgáltatástól visszakapott adatokat a Megtekintés módnál leírtak szerint jeleníti meg.

**Lapfül felépítése** [#89479]

**1.** **Értesítések listája és kezelése**

       - *Listadoboz*

A lapfülön a bal oldali blokk tetején jelenik meg a bejegyzés értesítéseit

tartalmazó listadoboz.

`o` Címe: Értesítések

`o` Fejléce:

`o` Tartalma:

`o` Azonosító megléte esetén:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 80/136|



                 - Azonosító: Értesítés egyedi azonosítója

                 - Szint: Értesítést rögzítő GVK profil azonosítójú

felhasználó hierarchia szintje

                 - Állapot: Értesítés állapota

                 - Rögzítés dátuma: Értesítés rögzítésének
időpontja

`o` Azonosító még nem áll rendelkezésre:

       - *Nyomógombok*

A lapfülön a bal oldali blokk alján a listadoboz alatt jelennek meg a
bejegyzés egy értesítésének kezelésére szolgáló nyomógombok.

`o` Új nyomógomb: Célja új értesítés rögzítése üres
mezők feltöltésével. Az < **Új**             - nyomógomb alapértelmezetten
kezelhető (aktív), ha a bejegyzés ’Minősített’ állapotú és az
Értesítések listadobozban nincs kijelölve értesítés és a GVK profil
azonosítójú felhasználó rendelkezik az
**OP_H06_06_ErtesitesSzerkeszt** operandussal.

Ha a bejegyzés nem ’Minősített’ állapotú vagy az Értesítések
listadobozban ki van jelölve értesítés vagy a GVK profil
azonosítójú felhasználó nem rendelkezik az operandussal, a
nyomógomb disabled állapotú.

`o` Másolás nyomógomb: Célja új értesítés rögzítése

már létező értesítés adatainak lemásolásával. A < **Másolás**             
nyomógomb alapértelmezetten disabled állapotú, csak abban az
esetben válik kezelhetővé, ha a listadobozban kijelölésre kerül
egy értesítés és a GVK profil azonosítójú felhasználó rendelkezik
az **OP_H06_06_ErtesitesSzerkeszt** operandussal.

Ha a bejegyzés nem ’Minősített’ állapotú vagy az Értesítések
listadobozban nincs kijelölve értesítés vagy a GVK profil
azonosítójú felhasználó nem rendelkezik az operandussal, a
nyomógomb disabled állapotú.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 81/136|


**2.** **Egy értesítés kezelése**

       - *Beviteli mezők:*

`o` Értesítési szint:

A lapfülön a jobb oldali blokk bal oldalán elsőként megjelenő
lenyíló listás beviteli mező autocomplete (kiválasztási
funkcióval). Alapértelmezetten disabled állapotú.

`o` Terület:

A lapfülön a jobb oldali blokk bal oldalán az ’Értesítési szint’ mező
alatt megjelenő lenyíló listás chips-es beviteli mező
autocomplete (kiválasztás) funkcióval. Alapértelmezetten
disabled állapotú.

`o` #94940 Szervezeti #94940 vége egység:

A lapfülön a jobb oldali blokk bal oldalán a ’Terület’ mező alatt
megjelenő lenyíló listás chips-es beviteli mező autocomplete
(kiválasztás) funkcióval. Alapértelmezetten disabled állapotú.

`o` Szolgálati hely:

A lapfülön a jobb oldali blokk bal oldalán az [#9494] [0] ~~’Egység’~~
’Szervezeti egység’ [#94940 vége] mező alatt megjelenő lenyíló listás
chips-es beviteli mező autocomplete (kiválasztás) funkcióval.
Alapértelmezetten disabled állapotú.

`o` Értesítés szövege:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 82/136|


`o` A lapfülön a jobb oldali blokk bal oldalán a ’Szolgálati

hely’ mező alatt megjelenő többsoros szöveges beviteli
mező az értesítés szövegének beviteléhez.
Alapértelmezetten disabled állapotú.
`o` A szöveges beviteli mező alatt bal oldalon aláírás. Az

aláíró az értesítést rögzítő AD felhasználó neve.

`o` A szöveges beviteli mező alatt jobb oldalon (értesítési
szöveg másolás) nyomógombos ikon, mely az értesítési
szöveg másolását végzi (a másolt szöveg máshol
beilleszthető). A nyomógombos ikon minden módban

kezelhető.

`o` A szöveges beviteli mező alatt jobb oldalon a ikontól
jobbra a beviteli mezőbe írt szöveg karaktereinek és a
mezőbe írható maximális karakterszám jelenik meg,
melynek formátuma: [#97450] 1/480 [#97450 vége] .

`o` /ha T értesítési mód kezelése (ld. értesítési mátrix):

’Az esemény nagysága kihatása miatt telefonos értesítés
szükséges.’

A lapfülön a jobb oldali blokk bal oldalán az értesítés szövegét
képező aláírás alatt megjelenő checkbox, mely
alapértelmezetten disabled és egyúttal kikapcsolt állapotú.
Kezelésekor a checkbox bepipálódik.

`o` Értesítési csoportok:

`o` A lapfülön a jobb oldali blokk jobb oldalán megjelenő

lenyíló listás chips-es beviteli mező autocomplete
(kiválasztás) funkcióval.

`o` Értesítési csoport hozzáadása: A lenyíló
listától jobbra jelenik meg a nyomógomb.
Az Értesítési csoportok lenyíló lista és a hozzá tartozó
< **Hozzáadás**            - nyomógomb alapértelmezetten disabled állapotú.
Csak rögzítés módban kezelhető.

`o` Értesítendő kiválasztása: (További értesítendő hozzáadása)


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 83/136|


`o` A lapfülön a jobb oldali blokk jobb oldalán az ’Értesítési

csoport’ mező alatt megjelenő lenyíló listás chips-es
beviteli mező autocomplete (kiválasztás) funkcióval.

`o` Értesítendő hozzáadása: A lenyíló listától
jobbra jelenik meg a nyomógomb.
Az Értesítendő kiválasztása lenyíló lista és a hozzá tartozó
< **Hozzáadás**             - nyomógomb alapértelmezetten disabled
állapotú. Csak rögzítés módban kezelhető.

`o` Értesítendők:

A lapfülön a jobb oldali blokk jobb oldalán az ’Értesítendő
hozzáadása’ mező alatt jelenik meg az értesítés értesítendőit

tartalmazó listadoboz.

`o` Címe: Értesítendők

`o` Tartalma:

                 - Értesítendő felhasználó adatai:

➢ Az értesítendő felhasználó neve a

listaelem első sorában vastagított
betűtípussal jelenik meg.
➢ Az értesítendő felhasználó e-mail címe a

listaelem első sorában a név alatt jelenik

meg.
➢ Az értesítendő felhasználó mobilszáma a

listaelem első sorában az e-mail cím

mellett jelenik meg.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 84/136|



                 - Értesítési mód(ok): Az értesítendő felhasználó

adatai mellett jelenik/jelennek meg az értesítési
módot jelölő (nem kezelhető) ikonok:

➢ E-mail értesítés esetén:

➢ SMS értesítés esetén:

➢ Telefonos értesítés esetén:

                 - Értesítendő törlése: Az értesítési módot jelölő

ikonoktól jobbra jelenik meg a a
megjelenített értesítendő sorában.
Alapértelmezetten disabled állapotú. Csak
rögzítés módban kezelhető.

                 - Értesítendők lista törlése: Az Értesítendők

listadoboz felett jobb oldalon jelenik meg a

Lista törlése nyomógomb.
Alapértelmezetten disabled állapotú. Csak
rögzítés módban kezelhető.

       - Nyomógombok:

`o` Értesítendők betöltése nyomógomb: A
lapfülön a jobb oldali blokk bal oldalán balra lent jelenik meg az
automatikusan kikereshető értesítendők listájának frissítésére
szolgáló nyomógomb. Alapértelmezetten disabled állapotú. Csak
rögzítés módban kezelhető.

`o` Küldés nyomógomb: A lapfülön a jobb oldali
blokk alatt jelenik meg jobb oldalon az értesítés adatainak
mentésére és egyúttal az értesítendőknek küldendő értesítések
küldésére, értesítési napló frissítésére szolgáló nyomógomb.
Alapértelmezetten disabled állapotú. Csak rögzítés módban

kezelhető.

`o` Mégsem nyomógomb: A lapfülön a jobb oldali
blokk alatt jelenik meg jobb oldalon a < **Küldés**             - nyomógomb
mellett. Az értesítés adatainak mentésének és egyúttal az
értesítendőknek küldendő értesítések küldésének, értesítési
napló frissítésének elvetésére szolgáló nyomógomb. Az
Értesítések listadobozban egy értesítés sorának kijelölését
követően kezelhető.Alapértelmezetten kezelhető
(megnyomható).

**Lapfül betöltése** [#89479]

A H06_06A lapfül csak akkor érhető el a GK profil azonosítójú felhasználó számára, ha
rendelkezik az **OP_H06_06_ErtesitesMegtekint** vagy az


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 85/136|


**OP_H06_06_ErtesitesSzerkeszt** operandussal. A megfelelő operandus hiányában a
lapfül nem választható ki (inaktív) a GVK profil azonosítójú felhasználó számára.

#96101 Mivel a bejegyzés állapota változhat az értesítés rögzítése közben, a kliens a lapfül
betöltésekor meghívja az „ **S_50 – Bejegyzés részletek adatainak betöltése** ”
szolgáltatást, bemenő paraméterként átadva neki a bejegyzés egyedi azonosítóját
(’bejegyzesId’). Amennyiben a szolgáltatástól visszakapott bejegyzés állapot
megnevezése (’allapotNev’):

    - ’Minősített’: A H06_06 ablakban az Értesítések lapfülön betöltődik az

Értesítések lista és aktív az < **Új**       - nyomógomb.

*„A bejegyzés nem ’Minősített’ állapotú. Nem rögzíthető új értesítés.”*

#96101 vége

A lapfül alapértelmezetten Megtekintés módban nyílik meg. A lapfülön csak a
kiválasztott bejegyzés értesítéseit tartalmazó listadoboz, valamint az értesítés
kezelésére szolgáló < **Új**   - és < **Másolás**   - nyomógomb jelenik meg az alábbi módon:

**Lapfül működése** [#89479]

A képernyő az alábbi módokon kezelhető:

    - Megtekintés

    - Rögzítés

**2.7.3.1.** **Megtekintés mód** [#89483]



-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 86/136|


Ez az alapértelmezett mód. Az ablak, ill. lapfül betöltésekor a kliens az „ **S_64 –**
**Bejegyzés értesítéseinek lekérdezése** ” szolgáltatástól visszakapott adatokkal feltölti az
Értesítések listadobozt.

Az S_64 szolgáltatástól visszakapott adatok az alábbiak szerint jelennek meg az
Értesítések listadobozban:

    - Értesítés egyedi azonosítója(’ertesitesId’): A kliensen nem jelenik meg.

    - Értesítés sorszám (’ertSorszam’): A kliensen a listadoboz ’Ssz.’ mezőjében

jelenik meg.

    - Értesítés szintje (’ertSzint’): A kliensen a listadoboz ’Szint’ mezőjében jelenik

meg.

    - Értesítési állapot (’ertAllapot’): A kliensen a listadoboz ’Állapot’ mezőjében

jelenik meg.

    - Rögzítés dátuma (’ertRogzitesIdo’): Formátuma: ’YYYY.MM.DD HH24:MM’

A listadobozban egy értesítés sorának kijelölésekor a kliens meghívja az „ **S_65 –**
**Bejegyzés értesítés adatainak lekérdezése** ” szolgáltatást bemenő paraméterként
átadva az értesítés egyedi azonosítóját (’ertesitesId’).

Az értesítés kijelölésekor aktiválódik az értesítés adatait tartalmazó jobb oldali blokk,
feltöltődnek a mezők a szolgáltatástól visszakapott adatokkal. A jobb oldali blokkban
minden mező és nyomógomb inaktív (kivétel: értesítés szövegének másolása ikon),

nincs konkurenskezelés.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 87/136|


Az S_65 szolgáltatástól visszakapott adatok az alábbiak szerint jelennek meg a kliensen:

    - Értesítési szint (’ertSzint’)

    - Terület (’ertTerulet’)

    - Szervezeti egység (’ertEgyseg’)

    - Szolgálati hely (’ertSzolgHely’)

    - Értesítés szövege (’ertSzoveg’)

A kapott szöveg alapján a szövegdoboz alatt jobb oldalon frissül a karakterek
száma [#97450] ([szöveg karaktereinek száma]/480) [#97450 vége] .

    - #99167 Aláíró neve (’ertAlairo’) #99167 vége

    - Kötelező telefonos értesítés (’telefonErtKotelezo’): ’I’ esetén a checkbox

bepipálva jelenik meg, ’N’ esetén nem.

    - Értesítendők (’ertesitendok’): Az értesítés egyedi azonosítója alapján az eljárás

visszaadja az értesítendő felhasználó(k) alábbi adatait:

`o` #99030 Értesítendő azonosítója (’ertesitendoId’)

`o` Értesítendő neve (’ertesitendoNev’)

`o` Email (’ertesitendoEmail’)

`o` Mobilszám (’ertesitendoMobil’)

`o` Telefonon értesítendő (’telefonErt’): ’I’ esetén megjelenik a telefon

ikon.

`o` SMS-ben értesítendő (’smsErt’): ’I’ esetén megjelenik a chat ikon.

`o` Email-ben értesítendő (’emailErt’): ’I’ esetén megjelenik a boríték ikon.

**Nyomógombok kezelése**


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 88/136|


Küldés nyomógomb kezelése: A < **Küldés**           - nyomógomb megtekintés
módban disabled állapotú.

Mégsem nyomógomb kezelése: A < **Mégsem**        - nyomógomb
kezelésekor megtekintés módban inaktívvá válik (bezárul) az értesítés adatait
tartalmazó jobb oldali blokk, az Értesítések listában megszűnik az értesítés kijelölése.

**2.7.3.2.** **Rögzítés mód** [#89480]

Új értesítés rögzítése lehetséges az üres mezők kitöltésével, mentésével vagy egy már
létező értesítés adatainak másolását követően az új értesítés véglegesítésével.

    - Az (Új) nyomógomb kezelésekor a listadobozban megjelenik új
sorban az ’Új értesítés’ felirat, az új listaelem kijelölődik és ezzel párhuzamosan
aktiválódik az értesítés adatait tartalmazó jobb oldali blokk üres mezőkkel. A
jobb oldali blokkban a leírt szabályok szerint minden mező aktív, nincs

konkurenskezelés.

    - A listadobozban egy értesítés kijelölését követően a (Másolás)
nyomógomb kezelésekor a listadobozban megjelenik új sorban az ’Új értesítés’
felirat és ezzel párhuzamosan aktiválódik az új értesítés adatait tartalmazó jobb
oldali blokk, ahol a mezők a listadobozban kijelölt értesítés adataival töltődnek
fel. Az új értesítés adatai a másolást követően módosíthatóak. A jobb oldali
blokkban a leírt szabályok szerint minden mező aktív, nincs konkurenskezelés.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 89/136|


< **Új**   - és < **Másolás**   - nyomógomb kezelésekor a kliens meghívja az „ **S_50 – Bejegyzés**
**részletek adatainak betöltése** ” szolgáltatást, bemenő paraméterként átadva neki a
bejegyzés egyedi azonosítóját (’bejegyzesId’). Amennyiben a szolgáltatástól
visszakapott bejegyzés állapot megnevezése (’allapotNev’):

    - ’Minősített’: Új értesítés rögzíthető, azaz az < **Új**    - és < **Másolás**    - nyomógomb

kezelhető (ld alább).

*„A bejegyzés nem ’Minősített’ állapotú. Nem rögzíthető új értesítés.”*

A kliens minden kereső paraméterre vonatkozóan meghívja az „ **S_08 - Lekérdezési**
**paraméterek értékkészletének lekérdezése** ” szolgáltatást, bemenő paraméterként
átadva neki az adatelem azonosítóját (AutosuggestId).

Az S_08 hívások és az átadott értékek:

    - Értesítési szint (’HierarchiaSzint’)

    - Terület (’Terulet_A20’)

    - Értesítési csoport (’ErtesitesiCsoport’)

    - Értesítésfogadó (’ErtesitesFogado_H06_02’)
#98217 < **Másolás**   - nyomógomb kezelésekor a kliens összehasonlítja az értesítést rögzítő
GVK profilú felhasználó hierarchia szint beállítását és az Értesítések listadobozban
másolásra kijelölt értesítés megtekintés módban meghívott „ **S_65 - Bejegyzés értesítés**
**adatainak lekérdezése** ” szolgáltatástól visszakapott értesítési szint (’ertSzint’), ettől
függően történik másolás esetén az új értesítés mezőinek értékkel feltöltése. [#98217 vége]

**Mezők kezelése**

    - **Értesítési szint** : A mező szerkeszthető és kötelező mező.



-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 90/136|


A mezőben az S_08 szolgáltatástól visszakapott Értesítési szint
(’HierarchiaSzint') ’text’ mező értékei közül csak a következők jelennek meg:

’H’ – Hálózat

’T’ – Terület

’H’ – Hálózati értesítési szint esetén a Terület, [#94940] Szervezeti [#94940 vége] egység,
Szolgálati hely mezők disabled státuszúak.

’T’ – Terület értesítési szint esetén a Terület mező kezelhető, az [#94940] Szervezeti
#94940 vége egység és Szolgálati hely mezők disabled státuszúak.

*Alapértelmezett értéke* :

`o` < **Új**     - nyomógomb kezelésekor: Az értesítést rögzítő (egyúttal a H06_06

ablakot megnyitó) GVK profilú felhasználó „ **S_37 - Felhasználó adatok**
**lekérdezése** ” szolgáltatástól visszakapott hierarchia szintje
(’hierarchia_szint’), amennyiben ez ’H’ – Hálózat vagy ’T’ – Terület;
egyébként a mező üres. [#94940 ] Az érték a fenti szabály szerint módosítható.
#94940 vége

`o` < **Másolás**     - nyomógomb kezelésekor: [#98217] Ha az értesítést rögzítő GVK

profilú felhasználó hierarchia szintje és a másolásra kijelölt értesítés
értesítési szintje:

        - megegyezik: az Értesítési szint mező értéke a másolásra kijelölt

értesítés értesítési szintjével egyezik meg;

        - ha nem egyezik meg: az Értesítési szint üres. [#98217 vége]

#94940 Az érték a fenti szabály szerint módosítható. #94940 vége

*Érték kiválaszthatóságának ellenőrzése:*

`o` Amennyiben az értesítést rögzítő GVK profilú felhasználó hierarchia szintje

’H’ – Hálózat, [#95363] csak Hálózat értesítési szintet választhat. [#95363 vége]

`o` Amennyiben az értesítést rögzítő GVK profilú felhasználó hierarchia szintje

’T’– Terület, csak ’Terület’ értesítési szintet választhat.

    - **Terület** : Alapértelmezetten disabled státuszú. Amennyiben az Értesítési szint

értéke ’T’ – Terület, a Terület mező szerkeszthetővé és kötelezővé válik.

*Alapértelmezett értéke* :

`o` < **Új**     - nyomógomb kezelésekor: Az értesítést rögzítő (egyúttal a H06_06

ablakot megnyitó) GVK profilú felhasználó „ **S_37 - Felhasználó adatok**
**lekérdezése** ” szolgáltatástól visszakapott terület (’terulet’) értéke.

`o` < **Másolás**     - nyomógomb kezelésekor: [#98217] Ha az értesítést rögzítő GVK

profilú felhasználó hierarchia szintje és a másolásra kijelölt értesítés
értesítési szintje:

        - megegyezik: a Terület mező értéke a másolásra kijelölt értesítés

területével egyezik meg;

        - ha nem egyezik meg: a Terület mező üres. [#98217 vége]

    - #94940 **Szervezeti** #94940 vége **egység** : Alapértelmezetten disabled státuszú.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 91/136|



    - **Szolgálati hely** : Alapértelmezetten disabled státuszú.

    - **Értesítés szövege** : A mező szerkeszthető és kötelező mező.

*Alapértelmezett értéke* :

`o` < **Új**     - nyomógomb kezelésekor: A mező üres.

`o` < **Másolás**     - nyomógomb kezelésekor: Az Értesítések listadobozban

másolásra kijelölt értesítés szövege.

    - **Aláírás** : Az értesítést rögzítő (egyúttal a H06_06 ablakot megnyitó) GVK profilú

felhasználó „ **S_37 - Felhasználó adatok lekérdezése** ” szolgáltatástól
visszakapott AD teljes neve (’AD_user_name’).

    - **’/ha T értesítési mód’ kezelése** : A checkbox (’Az esemény nagysága kihatása

miatt telefonos értesítés szükséges!’) kezelhető és opcionális.

*Alapértelmezett értéke:*

`o` < **Új**     - nyomógomb kezelésekor: A checkbox nincs bepipálva.

`o` < **Másolás**     - nyomógomb kezelésekor: [#98217] Ha az értesítést rögzítő GVK

profilú felhasználó hierarchia szintje és a másolásra kijelölt értesítés
értesítési szintje:

        - megegyezik: a checkbox értéke a másolásra kijelölt értesítés

checkboxának értéke;

        - ha nem egyezik meg: a checkbox nincs bepipálva. [#98217 vége]

    - **Értesítési csoportok** : A mező szerkeszthető és opcionális mező. A mezőben az

S_08 szolgáltatástól visszakapott Értesítési csoport (’ErtesitesiCsoport') ’text’
mező értékei jelennek meg. Több érték is választható. A kiválasztott értékeket
a rendszer a kliensen listában (collection) tárolja az Értesítési csoportok mezőtől
jobbra található < **Hozzáadás**       - nyomógomb kezeléséig.

    - **Értesítendő kiválasztása** : A mező szerkeszthető és opcionális mező. A mezőben

az S_08 szolgáltatástól visszakapott Értesítésfogadó
(’ErtesitesFogado_H06_02’) ’text’ mező értékei jelennek meg. Egy érték
választható ’tartalmaz’ típusú kereséssel. A kiválasztott érték az Értesítendő
kiválasztása mezőtől jobbra található < **Hozzáadás**      - nyomógomb kezeléséig
látható a képernyőn.

    - **Értesítendők** :

*Alapértelmezett értéke* :

`o` < **Új**     - nyomógomb kezelésekor: A listadoboz üres.

`o` < **Másolás**     - nyomógomb kezelésekor: [#98217] Ha az értesítést rögzítő GVK

profilú felhasználó hierarchia szintje és a másolásra kijelölt értesítés
értesítési szintje:

       - megegyezik: a listadoboz tartalma a másolásra kijelölt értesítés

’Értesítendők’ listadoboz tartalma, tehát az „ **S_65 - Bejegyzés értesítés**
**adatainak lekérdezése** ” szolgáltatástól visszakapott értesítendők
(’ertesitendok’) adatai:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 92/136|



           - #99030 Értesítendő azonosítója (’ertesitendoId’)

           - Értesítendő neve (’ertesitendoNev’)

           - Értesítendő e-mail címe (’ertesitendoEmail’)

           - Értesítendő mobilszáma (’ertesitendoMobil’)

        - ha nem egyezik meg: a listadoboz üres. [#98217 vége]

**Nyomógombok kezelése**

Értesítendők betöltése nyomógomb kezelése:

*Ha az ’Értesítendők’ listadoboz üres*, az < **Értesítendők betöltése**   - nyomógomb
kezelésekor a listadoboz feltöltése céljából meghívja az „ **S_66 - Automatikusan**
**kikereshető értesítendők lekérdezése** ” szolgáltatást, melynek az alábbi bemenő
paramétereket adja át:

    - Bejegyzés egyedi azonosítója (’bejegyzesId’)

    - Értesítési szint (’ertSzint’): S_08 szolgáltatástól kapott ’id’ értéke.

    - Terület (’ertTerulet’): S_08 szolgáltatástól kapott ’id’ értéke.

`o` Paraméter (aaa; bbb; …)

    - Kötelező telefonos értesítés (’telefonErtKotelezo’) (I/N)

A kliens a szolgáltatástól visszakapott értékekkel az alábbiak szerint feltölti az
Értesítendők listadobozt (a kliens collection-ben tárolja a < **Küldés**   - nyomógomb
kezeléséig):

    - Értesítendők (’ertesitendok’)

`o` #89642 Értesítendő azonosító (’ertesitendoId’): Nem jelenik meg a
kliensen. [#89642 vége]

`o` Értesítendő neve (’ertesitendoNev’)

`o` Email (’ertesitendoEmail’)

`o` Mobilszám (’ertesitendoMobil’)

`o` Telefonon értesítendő (’telefonErt’): ’I’ esetén megjelenik a telefon

ikon.

`o` SMS-ben értesítendő (’smsErt’): ’I’ esetén megjelenik a chat ikon.

`o` Email-ben értesítendő (’emailErt’): ’I’ esetén megjelenik a boríték ikon.

*Ha az ’Értesítendők’ listadoboz nem üres*, a kliens megerősítést kérő pop-up üzenetet

ad a felhasználónak:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 93/136|



    - < **Nem**    - nyomógomb kezelésekor az üzenet bezáródik és az ’Értesítendők’

listadobozban maradnak a korábbi értesítendők, nem törlődnek az értékek.

    - < **Igen**    - nyomógomb kezelésekor az üzenet bezáródik, az ’Értesítendők’

listadobozból törlődnek az értesítendők. A listadoboz újbóli feltöltése céljából
a kliens meghívja az „ **S_66 - Automatikusan kikereshető értesítendők**
**lekérdezése** ” szolgáltatást (ld. fent).

#89642 Amennyiben az S_66 szolgáltatás nem ad vissza egy megjeleníthető értesítendő
felhasználót sem, a kliens az alábbi popup üzenetet jeleníti meg:

„ *Az értesítési mátrix alapján nincs megjeleníthető értesítendő. Kérjük válasszon*
*értesítési csoportot vagy értesítendőt* .” (Rendben)

[#89642 vége]

#89642 Értesítési csoport nyomógomb kezelése: Az **Értesítési csoport**
< **Hozzáadás**   - nyomógomb kezelésekor a kliens ellenőrzi az ’Értesítési csoport’ mező
kitöltöttségét.

    - Amennyiben a mező üres, a kliens az alábbi pop-up üzenetet jeleníti meg:

    - Amennyiben a mező nem üres, a kliens meghívja az „ **S_67 – Értesítendők**

**lekérdezése értesítési csoport alapján** ” szolgáltatást, bemenő paraméterként
átadva az értesítési csoport(ok) egyedi azonosítóját.

A kliens a duplikáció elkerülése céljából ellenőrzi az S_67 szolgáltatástól
visszakapott értesítendő meglétét az ’Értesítendők’ listadobozban (a kliens
összehasonlítja a szolgáltatástól visszakapott értesítendő (itt: értesítésfogadó)
azonosítóját az ’Értesítendők’ listadobozban szereplő értesítendő (itt:
értesítésfogadó) azonosítójával):

`o` Amennyiben a szolgáltatástól visszakapott értesítendő már szerepel az

’Értesítendők’ listadobozban, a kliens nem adja hozzá az értesítendőt a

listához.:

`o` Amennyiben a hozzáadni kívánt értesítendő még nem szerepel az

’Értesítendők’ listadobozban, a kliens hozzáadja a listához a kiválasztott
értesítendőt az S_67 szolgáltatástól visszakapott értesítési mód értékek
alapján. Az újonnan hozzáadott értesítendő a lista utolsó sorában jelenik

meg.

A kliens a fentiek szabály szerint a visszakapott értékekkel az alábbiak szerint feltölti az
Értesítendők listadobozt (a kliens collection-ben tárolja a < **Küldés**   - nyomógomb
kezeléséig):

    - Értesítendők (’ertesitendok’)

`o` Értesítendő azonosító (’ertesitendoId’): Nem jelenik meg a kliensen.

`o` Értesítendő neve (’ertesitendoNev’)



-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 94/136|


`o` Telefonon értesítendő (’telefonErt’): ’I’ esetén megjelenik a telefon

ikon.

`o` SMS-ben értesítendő (’smsErt’): ’I’ esetén megjelenik a chat ikon.

`o` Email-ben értesítendő (’emailErt’): ’I’ esetén megjelenik a boríték ikon.

`o` E-mail cím (’ertesitendoEmail’)

`o` Mobilszám (’ertesitendoMobil’)

Amennyiben az S_67 szolgáltatás nem ad vissza egy megjeleníthető értesítendő
felhasználót sem, a kliens az alábbi popup üzenetet jeleníti meg:

„ *Az értesítési csoport alapján nincs megjeleníthető értesítendő. Kérjük válasszon*
*értesítendőt, amennyiben szükséges* .” (Rendben)

#89642 vége

Értesítendő hozzáadása nyomógomb kezelése: Az **Értesítendő**
< **Hozzáadás**   - nyomógomb kezelésekor a kliens ellenőrzi az ’Értesítendő kiválasztása’
mező kitöltöttségét.

    - Amennyiben a mező üres, a kliens az alábbi pop-up üzenetet jeleníti meg:

    - Amennyiben a mező kitöltött, #89642 a kliens meghívja az „ **S_62 –**
**Értesítésfogadók lekérdezése** ” szolgáltatást, bemenő paraméterként átadva az
értesítésfogadó azonosítóját (’ertFogadoId’) [#89642 vége] . A kliens a duplikáció
elkerülése céljából ellenőrzi a hozzáadni kívánt értesítendő meglétét az
’Értesítendők’ listadobozban (a kliens összehasonlítja a kiválasztott értesítendő
(itt: értesítésfogadó) azonosítóját az ’Értesítendők’ listadobozban szereplő
értesítendő (itt: értesítésfogadó) azonosítójával):

`o` Amennyiben a hozzáadni kívánt értesítendő már szerepel az

’Értesítendők’ listadobozban, a kliens az alábbi pop-up üzenetet adja:

`o` Amennyiben a hozzáadni kívánt értesítendő még nem szerepel az

’Értesítendők’ listadobozban, a kliens hozzáadja a listához a kiválasztott
értesítendőt [#89642 ] az S_62 szolgáltatástól visszakapott értékek alapján:

          - **Telefonon értesíthető** (’telefonErt’): ’I’ érték esetén megjelenik

a telefon ikon.

          - **SMS-ben értesíthető** (’smsErt’): ’I’ esetén megjelenik a chat

ikon.

          - **E-mail-ben értesíthető** (’emailErt’): ’I’ esetén megjelenik az e
mail ikon.

          - **E-mail cím** (’email’)

          - **Mobilszám** (’mobilszam’)




-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 95/136|


Az újonnan hozzáadott értesítendő a lista utolsó sorában jelenik meg.
#89642 vége

Lista törlése nyomógomb kezelése:

A < **Lista törlése**   - nyomógomb rögzítési módban nem üres ’Értesítendők’ lista esetén
kezelhető. A nyomógomb kezelésekor a kliens megerősítést kérő pop-up üzenetet ad a

felhasználónak:

    - < **Nem**    - nyomógomb kezelésekor az üzenet bezáródik és az ’Értesítendők’

listadobozban maradnak a korábbi értesítendők, nem törlődnek az értékek.

    - < **Igen**    - nyomógomb kezelésekor az üzenet bezáródik, az ’Értesítendők’

listadobozból törlődnek az értesítendők (a kliensen a collection kiürül).

Törlés nyomógomb kezelése: [#89651] Az Értesítendők listában egy értesítendőre
vonatkozik a törlés. A < **Törlés**   - nyomógomb kezelésekor [#89642] a kliens az alábbi popup üzenetet jeleníti meg:

    - < **Nem**    - nyomógomb kezelésekor az üzenet bezáródik és a kiválasztott

értesítendő az ’Értesítendők’ listadobozban marad, nem törlődik.

    - < **Igen**    - nyomógomb kezelésekor az üzenet bezáródik, a kiválasztott értesítendő

törlődik az ’Értesítendők’ listadobozból (a kliensen a collection kiürül).

#89651, #89642 vége

Küldés nyomógomb kezelése:

#96101 Mivel a bejegyzés állapota változhat az értesítés rögzítése közben, a kliens ismét
meghívja az „ **S_50 – Bejegyzés részletek adatainak betöltése** ” szolgáltatást, bemenő
paraméterként átadva neki a bejegyzés egyedi azonosítóját (’bejegyzesId’).
Amennyiben a szolgáltatástól visszakapott bejegyzés állapot megnevezése
(’allapotNev’):

    - ’Minősített’: Új értesítés rögzíthető (menthető), azaz a kliens továbblép a

következő ellenőrzésre (ld. alább).

*„A bejegyzés nem ’Minősített’ állapotú. Nem rögzíthető új értesítés.”*

#96101 vége

#89644 A kliens ellenőrzi az ’Értesítendők’ listadobozban megjelenített értesítendő

felhasználók számát:

    - Amennyiben egy értesítendő felhasználó sincs az ’Értesítendők’ listadobozban,

a kliens az alábbi üzenetet jeleníti meg:






-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 96/136|



    - Amennyiben van legalább egy értesítendő felhasználó az ’Értesítendők’

listadobozban, a kliens az alábbiak szerint jár el. [#89644 vége]

A nyomógomb kezelésekor az új értesítés adatainak mentése céljából a kliens meghívja
az „ **S_68 – Bejegyzés értesítés adatainak mentése** ” szolgáltatást, amelynek az alábbi
bemenő paramétereket adja át:

#89644 A szolgáltatás hívásával párhuzamosan az elhalványított H06_06A – Értesítések
lapfül felett töltést jelző overlay jelenik meg. [#89644 vége]

    - Bejegyzés egyedi azonosítója (’bejegyzesId’)

    - Értesítési szint (’ertSzint’): S_08 szolgáltatástól kapott ’id’ értéke (max. 1 érték):

`o` 1 – Hálózat

`o` 2 – Terület

    - Terület (’ertTerulet’): S_08 szolgáltatástól kapott ’id’ értéke (több érték is

lehet).

`o` Paraméter (aaa; bbb; …)

`o` Paraméter (aaa; bbb; …)

    - Értesítés szövege (’ertSzoveg’)

    - Kötelező telefonos értesítés (’telefonErtKotelezo’) (I/N)

    - Értesítendők (’ertesitendok’)

`o` Értesítendő neve (’ertesitendoNev’)

`o` Email (’ertesitendoEmail’)

`o` Mobilszám (’ertesitendoMobil’)

`o` Telefonon értesítendő (’telefonErt’) (I/N)

`o` SMS-ben értesítendő (’smsErt’) (I/N)

`o` Email-ben értesítendő (’emailErt’) (I/N)

#89644 Az adatok mentése során a háttérben a következő történik:




-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 97/136|


A háttérben adatbázis oldalon az S_68 szolgáltatást megvalósító tárolt eljárás az

értesítés és értesítendő felhasználó adatok sikeres elmentését követően adatbázis

oldalon meghívja az „ **BS_69 – SMS-ben vagy email-ben értesítendő felhasználók**
**lekérdezése küldendő értesítéshez** ” szolgáltatást megvalósító tárolt eljárást. Az SMSben, ill. email-ben értesítendő felhasználóknak küldendő üzenetek letárolása céljából
a BS_69 meghívja az „ **BS_70 - Küldendő SMS értesítés mentése** ”, ill. a **BS_71 -**
**Küldendő e-mail értesítés mentése** ” szolgáltatásokat megvalósító tárolt eljárásokat.
Az SMS üzenetek ütemezett küldését a „ **K_17 – SMS üzenetek küldése** ”, az e-mail
üzenetek ütemezett küldését a „ **K_18 – E-mail üzenetek küldése** ” szolgáltatást
megvalósító adatbázis oldali SQL job végzi. Az SMS értesítendő felhasználó
mobiltelefonjára történő kézbesítésének státuszát a „ **K_18 – SMS kézbesítés**
**fogadása** ” szolgáltatást megvalósító eljárás adja vissza.

**Az értesítés mentése akkor sikeres**, ha mind az értesítés, mind az értesítendő
felhasználó, mind a küldendő sms/e-mail üzenet adatainak letárolása sikeres.
Amennyiben ezen adatok közül már egy is sikertelen (akár egy darab sms/email üzenet
is), a mentés sikertelen. **A sikertelen mentés oka** lehet pl. táblatér elfogyása, nem
megfelelő adat letárolása egy mezőben, egyéb technikai ok.

A bejegyzés értesítés(ei)nek státuszát a „ **K_20 – Bejegyzés értesítések értesítési**
**státuszának frissítése** ” szolgáltatás végzi ütemezetten.

A bejegyzéshez kapcsolódó értesítés(ek), ezen belül az elküldött SMS, ill. e-mail üzenet
státusza a „ **H06_06B** **– Értesítési napló** ” lapfülön látható. [#89644 vége]

Az S_68 szolgáltatás az alábbi értékeket adja vissza:

    - Mentés eredménye (’status’):

`o` 200 – **Sikeres mentés esetén** a kliens az alábbi pop-up üzenetet jeleníti meg:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 98/136|


A kliens az Értesítések lista frissítése céljából újra meghívja az „ **S_64 – Bejegyzés**
**értesítések lista lekérdezése** ” szolgáltatást, bemenő paraméterként átadva
bejegyzés egyedi azonosítóját (’bejegyzesId’).

A fenti pop-up üzenet bezárásával inaktívvá válik (bezárul) az értesítés adatait
tartalmazó jobb oldali blokk, az Értesítések lista frissül az S_64 szolgáltatástól
visszakapott adatokkal és nincs kijelölve értesítés.

Az S_68 szolgáltatástól visszakapott sikeres mentési eredményt követően kliens
meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi
bemenő paraméterekkel:

         - Ablakazonosító (’WINDOW_ID’): ’H06_06A’

         - Esemény (’ACTIVITY’): ’Create’

         - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD

azonosítója

         - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

         - Esemény kiegészítő információk (’ACTIVITY_EXT’): Az értesítés

adatai json-ben.

         - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

         - Bejegyzés sub azonosító (’SUB_ID’): Értesítés azonosítója

         - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’):

NULL

`o` 599 vagy 400 – **Sikertelen mentés esetén** a kliens az alábbi popup üzenetet

jeleníti meg a kapott RequiestId-val:

Sikertelen a mentés, ha az értesítés alapadatainak vagy az értesítendő
felhasználóknak vagy a küldendő sms, ill. email üzenetek valamilyekének

mentése nem volt sikeres az adatabázisban.

Ebben az esetben a < **Küldés**      - nyomógomb újra kezelhető.

#89644 vége

Mégsem nyomógomb kezelése: A nyomógomb kezelésekor rögzítési
módban a kliens az alábbi üzenetet jeleníti meg:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 99/136|



    - < **Nem**    - nyomógomb kezelésekor az üzenet bezáródik és a felhasználó folytatja

az adatok rögzítését, nem törlődnek az értékek.

    - < **Igen**    - nyomógomb kezelésekor a mezőkben kiválasztott, beírt adatok

törlődnek, az ’Értesítendők’ listadobozból törlődnek az értesítendők (a kliensen
a collection kiürül). Inaktívvá válik (bezárul) az értesítés adatait tartalmazó jobb
oldali blokk, az Értesítések listában eltűnik az ’Új értesítés’ listaelem, nincs
kijelölve értesítés.

**2.7.3.3.** **H06_06B** **– Értesítési napló** [#89704]

**Lapfül betöltése**

A H06_0BA lapfül csak akkor érhető el a GK profil azonosítójú felhasználó számára, ha
rendelkezik az **OP_H06_06_ErtesitesiNaploMegtekint** operandussal. A megfelelő
operandus hiányában a lapfül nem választható ki (inaktív) a GVK profil azonosítójú

felhasználó számára.

A lapfülre váltáskor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást elsőként az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_06A’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): Bejegyzés azonosítója

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.

Másodszor az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_06B’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): Bejegyzés azonosítója

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 100/136|


A lapfül betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens az alábbi
bemenő paraméterekkel meghívja az **„S_15 - Beállítások lekérdezése** ” szolgáltatást:

    - Beállítás azonosító: ’H06_06B’

A GVK profil azonosítót a webAPI réteg adja át.

A kliens az alábbi, szolgáltatástól visszakapott értékek alapján megjeleníti az
oszlopokat:

    - Beállítás neve: az oszlop neve

    - Megjelenítési jelző: 0 - nem jelenik meg az oszlop, 1 - megjelenik az oszlop

    - Sorszám: az oszlop sorszáma a griden

Ha nincs ilyen eltárolt adat (S_15 szolgáltatás nem ad vissza adatot), akkor
alapértelmezetten minden oszlop megjelenítendőnek tekintendő a grid-en.

A kliens az ’Értesítési napló’ lapfülre váltáskor meghívja az „ **S_48 – Bejegyzés értesítési**
**naplójának lekérdezése** ” szolgáltatást, amelynek bemenő paraméterként a bejegyzés
azonosítóját adja át. A kliens a szolgáltatástól visszakapott adatokat megjeleníti a grid
ben.

**Lapfül felépítése**

  - *Felső eszközsor (Toolbar):*

Itt jelenik meg az összes, a táblázathoz kapcsolódó nyomógomb. Az adott funkció
leírása tooltip-ben jelenik meg.

`o` Excel-export:

Rákattintva kezdeményezhető az összes találat grid-en látható összes
oszloppal letöltése Excel-be a keresési feltételeknek megfelelően.

`o` Oszlopsorrend mentése:

Rákattintva kezdeményezhető a táblázat oszlop sorrendjének mentése a
GVK profil azonosítójú felhasználóhoz.

`o` Frissítés:

Rákattintva kezdeményezhető a táblázat adatainak frissítése a keresési
feltételek beállításainak megfelelően.

`o` Kapcsolók:

Az alábbi kétállású kapcsolók ki-bekapcsolhatók. Bekapcsolt állapotban a
kapcsoló háttérszíne sötétebb szürke, kikapcsolt állapotban. világosszürke.

           - Területi értesítések:

A ’Terület’ hierarchia szinttel rendelkező GVK profilú
felhasználónak alapértelmezetten bekapcsolt, egyébként


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 101/136|


kikapcsolt állapotú. Bekapcsolt állapotban a ’Terület’ értesítési
szintű értesítések jelennek meg az „ **S_48 – Bejegyzés értesítési**
**naplójának lekérdezése** ” szolgáltatástól visszakapott Értesítési
szint értéke alapján (ahol ’ertSzint’: ’T’).

           - Hálózati értesítések:

A ’Hálózat’ hierarchia szinttel rendelkező GVK profilú
felhasználónak alapértelmezetten bekapcsolt, egyébként
kikapcsolt állapotú. Bekapcsolt állapotban a ’Hálózat’ értesítési
szintű értesítések jelennek meg az „ **S_48 – Bejegyzés értesítési**
**naplójának lekérdezése** ” szolgáltatástól visszakapott Értesítési
szint értéke alapján (ahol ’ertSzint’: ’H’).

  - *Lista:*

`o` Táblázatban jelenik meg az összes kért információ.

`o` Fejléc:

Amennyiben az oszlopcím nem fér ki, az **Oszlopcím…** jelenik meg. Tooltipben olvasható a teljes oszlopcím.

`o` Adatok:

Ablakbetöltéskor megjelennek meg az „ **S_48 – Bejegyzés értesítési**
**naplójának lekérdezése** ” szolgáltatástól visszakapott adatok.

`o` Alsó vízszintes gördítősáv (horizontális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt oszlopa,
akkor az alsó vízszintes gördítősáv segítségével lehet megtekinteni a
táblázat többi oszlopát.

`o` Oldalsó függőleges gördítősáv (vertikális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt sora,
akkor az oldalsó (jobb oldalon) függőleges gördítősáv segítségével lehet
megtekinteni a táblázat többi sorát.

  - *Lábléc:*

`o` Oldallapozó: A lekérdezett adatok a grid alatti lapozó funkcióval

jeleníthetők meg (legelső/legutolsó, valamint előző/következő oldalra
ugrás). Megjelenik a megjelenített/összes oldal száma. Az egy oldalon


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 102/136|


megjelenített rekordok száma listából választható (25/50/100), az
alapértelmezett érték 100 rekord.

**Grid és toolbar működése**

Az (Excel-export) ikonra kattintva a kliens a grid-en az összes lapon található
adatot kiexportálja Excel fájlba (.xlsx kiterjesztéssel) (kapcsolónként külön-külön
fájlban).

Fájlnév: *HUBA értesítési napló_[HUBA azonosító]_[exportálás időpontja].xlsx*

A griden drag&drop módszerrel módosítható a megjelenített oszlopok sorrendje és a

(Mentés) ikonra kattintva menthető el. Az ikonra kattintva a kliens az alábbi
bemenő paraméterekkel meghívja az „ **S_16 –Beállítások mentése”** szolgáltatást:

    - GVK profil azonosító

    - beállítás azonosítója: ’H06_06B’

    - beállítás neve: oszlop neve

    - oszlop sorszáma

A (Frissítés) ikonra kattintva manuálisan frissíthetőek a H06_06B gridben

megjelenített adatok. A kliens a (Frissítés) ikonra történő kattintáskor meghívja
az „ **S_48 – Bejegyzés értesítési naplójának lekérdezése** ” szolgáltatást, bemenő
paraméterként átadva a bejegyzés egyedi azonosítóját (’bejegyzesId’).

A kliens az „ **S_48 – Bejegyzés értesítési naplójának lekérdezése** ” szolgáltatástól
visszakapott adatokat az alábbiak szerint jeleníti meg **a grid-ben TreeGrid módban** :

Egy bejegyzéshoz tartozhat több értesítés. A telefonon értesítésendő felhasználók a
szolgáltatástól visszakapott adatok alapján a lista elején szerepelnek.

    - **Értesítés egyedi azonosítója** (’ertesitesId’): Nem jelenik meg a kliensen.

    - **Értesítés sorszáma és szintje** (’group’): Az ’Értesítés azonosítója’ mezőben

jelenik meg.

    - **Értesített felhasználó egyedi azonosítója** (’ertesitettId’): Nem jelenik meg a

kliensen.

    - **Értesített felhasználó neve** (’ertesitettNev’): A ’Név’ mezőben jelenik meg.

    - **SMS-ben értesítve** (’smsErtesitve’): ’I’ érték esetén az ’SMS elküldve’ checkbox

bepipált állapotú; egyébként nem.

    - **SMS kézbesítve** (’smsKezbesitve’): ’I’ érték esetén az ’SMS kézbesítve’

checkbox bepipált állapotú; egyébként nem.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 103/136|



    - **Email-ben értesítve** (’emailErtesitve’): ’I’ érték esetén az ’E-mail elküldve’

checkbox bepipált állapotú; egyébként nem.

    - **Mobilszám** (’mobilszam’): A ’Telefon’ mezőben a checkbox után jelenik meg:

`o` Amennyiben a bejelentkezett GVK profilú felhasználóhoz hozzá van

rendelve az **OP_H06_08_HivasEredmenyMent** operandus, a mobilszám
linkként jelenik meg.

`o` Amennyiben a bejelentkezett GVK profilú felhasználóhoz nincs

hozzárendelve a fenti operandus, a mobilszám szövegként jelenik meg.

A linkre kattintáskor a számítógéphez bluetooth kapcsolaton keresztül
párosított telefonkészüléken keresztül indítható telefonhívás, amennyiben az
alábbi feltételek teljesülnek:

`o` MyPhone Explorer alkalmazás telepítve van a GVK-t futtató

számítógépen
`o` Van párosított telefon a MyPhone Explorer alkalmazáson keresztül
`o` A megfelelő registry beállítások rendelkezésre állnak

A program telepítésére és beállítására vonatkozó részletes információkat az
alábbi helyen található dokumentumcsomag tartalmazza:

https://ituzletag.mav        [szk.hu/projekt/gvk/Megosztott%20dokumentumok/06_R%C3%A9szletes%20tervez%C3%A9s](https://ituzletag.mav-szk.hu/projekt/gvk/Megosztott%20dokumentumok/06_R%C3%A9szletes%20tervez%C3%A9s/Haszn%C3%A1lati%20esetek/H%C3%A1tt%C3%A9ranyagok)
[/Haszn%C3%A1lati%20esetek/H%C3%A1tt%C3%A9ranyagok](https://ituzletag.mav-szk.hu/projekt/gvk/Megosztott%20dokumentumok/06_R%C3%A9szletes%20tervez%C3%A9s/Haszn%C3%A1lati%20esetek/H%C3%A1tt%C3%A9ranyagok)       - CallMobile2.zip

#89705 A linkre kattintáskor pop-up ablakban megnyílik a „ **H06_08** **– HUBA –**
**Hívás eredménye** ” ablak. [#89705 vége]

    - **Hívás eredménye** (’hivasEredmeny’): ’I’ érték esetén a ’Hívás sikeres’ checkbox

bepipált állapotú; egyébként nem.

    - **Telefonos értesítés ideje** (’telefonErtIdo’): A ’Telefonos értesítés időpontja’

mezőben jelenik meg.

Formátuma: YYYY.MM.DD. HH24:MI

    - **Hívás megjegyzés** (’hivasMegjegyzes’): A ’Hívás megjegyzés’ mezőben jelenik

meg.

**Ablak/Lapfül bezárása**

Az ablak/lapfül bezárása a böngészőfülön lévő **<X>** nyomógombra kattintással
lehetséges.

Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_06A’ [#89704] vagy ’H06_06B’ (aktuális

lapfül) [#89704 vége]

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): Bejegyzés azonosító

    - Bejegyzés sub azonosító (’SUB_ID’): NULL


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 104/136|



    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 105/136|

### **2.7.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **












|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|---|
|Fejléc||||||||
||GVK profil megnevezés|GVK felhasználó||||||
||HUBA azonosító|-||||||
|H06_06A – Értesítések #92554||||||||
|Értesítések||||||||
|Értesítések|Értesítések|-|label|||||
|-|(Értesítések)||listbox|||||
|Azonosító|Azonosító|-||||||
|Szint|Szint|-||||||
|Állapot|Állapot|-||||||
|Rögzítés dátuma|Rögzítés dátuma|-|||YYYY.MM.DD HH24:MM|||
|(Értesítés adatai)||||||||
|Értesítési szint||||||||
|Értesítési szint:|Értesítési szint:|-|label|||||
|-|(Értesítési szint)|-|combobox|AN50||részletterv alapján|GVK.K_HIERAR CHIA_SZINT|
|Terület||||||||
|Terület:|Terület:|-|label|||||
|-|(Terület)|-|combobox (chips-es)|AN50|||GVK.K_TERULE T|
|#94940 Szervezeti #94940 vége egység||||||||
|#94940 Szervezeti #94940 vége egység:|#94940 Szervezeti #94940 vége egység:|-|label|||||
|-|(#94940 Szervezeti #94940 vége egység)|-|combobox (chips-es)|AN50|||GVK_GIS.RAIL WAY_OBJECTS _ALLOMASOK_ V|
|Szolgálati hely||||||||
|Szolgálati hely:|Szolgálati hely:|-|label|||||

#### combobox - (Szolgálati hely) - AN50 (chips-es)

#### GVK_GIS.RAIL WAY_OBJECTS _ALLOMASOK_ V


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 106/136|












|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|---|
|-|(AD felhasználó név)|-|szöveges megjelenít ő|AN50||||
|-|(beírt/max karakterszám)|-|szöveges megjelenít ő|AN10||||
|/ha T kapcsoló||||||||
|Az esemény nagysága kihatása miatt telefonos értesítés szükséges!|Az esemény nagysága kihatása miatt telefonos értesítés szükséges!|-|label|||||
|-|-|-|checkbox|||N (kikapcsolt)||
|Értesítési csoportok||||||||
|Értesítési csoportok:|Értesítési csoportok:|-|label|||||
||(Értesítési csoportok)|-|combobox (chips-es)|AN50|||GVK_HUBA.ER TESITESI_CSOP ORT|
|Értesítendő kiválasztása||||||||
|Értesítendő kiválasztása:|Értesítendő kiválasztása:|-|label|||||
|-|(Értesíthető felhasználók)|-|combobox (chips-es)|AN50|||GVK_HUBA.ER TESITES_FOGA DO|
|Értesítendők||||||||
|Értesítendők|Értesítendők||label|||||
|-|(Értesítendő felhasználó neve)||szöveges megjelenít ő|||||
||(Értesítendő felhasználó e- mail címe)||szöveges megjelenít ő|||||
|-|(Értesítendő felhasználó mobilszáma)||szöveges megjelenít ő|||||
|-|(E-mail értesítés)||ikon|||||
|-|(SMS értesítés)||ikon|||||
|-|(Telefon értesítés)||ikon|||||

#### H0606B–Értesítésinapló [ #89704]


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 107/136|





|Grid oszlopai az|alapértelmezett sorrendben|Col3|Col4|Col5|Col6|Col7|
|---|---|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Hossz|Maszk/Típus|Alapértelmezett érték|Törzstábla/ kódtábla|
|H06_06B – Értesítési napló #89704|||||||
|Értesítés azonosító|Értesítés azonosító|Értesítés azonosító|AN10|[sorszám] – [értesítés szintje]|-||
|Név|Név|Név|AN200||-||
|SMS elküldve|SMS elküldve|SMS elküldve|checkb ox||-||
|SMS kézbesítve|SMS kézbesítve|SMS kézbesítve|checkb ox||-||
|E-mail elküldve|E-mail elküldve|E-mail elküldve|checkb ox||-||
|Telefon|Telefon|Telefon|AN20|link|-||
|Hívás sikeres|Hívás sikeres|Hívás sikeres|checkb ox||-||
|Telefonos értesítés időpontja|Telefonos értesítés időpontja|Telefonos értesítés időpontja|DATE|YYYY.MM.DD HH24:MI|||
|Hívás megjegyzés|Hívás megjegyzés|Hívás megjegyzés|AN100||||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 108/136|


**Nyomógombok, funkcionális ikonok**









|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/ nem nyomható meg]|Material ikon neve|
|---|---|---|---|---|
|H06_06A – Értesítések|||||
||Új|-|megnyomható|plus|
||Másolás||nem nyomható meg|copy|
||Értesítési csoport értesítendőinek hozzáadása|-|nem nyomható meg|plus|
||Értesítendő hozzáadása|-|nem nyomható meg|plus|
||Értesítendő törlése|-|nem nyomható meg|delete|
||Értesítendő lista törlése|-|nem nyomható meg|delete|
||Értesítendők betöltése|-|nem nyomható meg|plus|
||Küldés|-|nem nyomható meg||
||Mégsem|-|megnyomható|close|
|H06_06B – Értesítési napló|||||
||||||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 109/136|


**2.7.5.** **Hívott szolgáltatások**












|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|#89479 Ablakbetöltés és egyúttal H06_06A lapfül betöltés|-|S_27 – Felhasználói aktivitás naplózása|
|H06_06A – Értesítések|||
|#89479 Lapfül betöltés|-|S_64 – Bejegyzés értesítéseinek lekérdezése|
|#89483 Értesítések listában egy értesítés kijelölése|-|S_65 – Bejegyzés értesítés adatainak lekérdezése|
|#89480|-|S_50 – Bejegyzés részletek adatainak betöltése|
|#89480|-|S_08 – Lekérdezési paraméterek értékkészletének lekérdezése|
|#89480|-|S_27 – Felhasználói aktivitás naplózása|
|#89480|-|S_50 – Bejegyzés részletek adatainak betöltése|
|#89480|-|S_08 – Lekérdezési paraméterek értékkészletének lekérdezése|
|#89480|-|S_27 – Felhasználói aktivitás naplózása|
||-|S_50 - Bejegyzés részletek adatainak betöltése|
||-|S_27 – Felhasználói aktivitás naplózása|
|#89480|-|S_66 - Automatikusan kikereshető értesítendők lekérdezése|
|#89642 (Értesítési csoport értesítendőinek hozzáadása)|-|S_67 – Értesítendők lekérdezése értesítési csoport alapján|
|#96101|-|S_50 – Bejegyzés részletek adatainak betöltése|
|#89480|-|S_68 – Bejegyzés értesítés adatainak mentése|
|#89480 (Sikeres mentés esetén)|-|S_27 – Felhasználói aktivitás naplózása|
||-|S_64 – Bejegyzés értesítéseinek lekérdezése|
|H06_06B – Értesítési napló #89704|||
|Lapfül betöltés|-|S_27 – Felhasználói aktivitás naplózása|
|Lapfül betöltés|-|S_15 – Beállítások lekérdezése|
|Lapfül betöltés||S_48 – Bejegyzés értesítési naplójának lekérdezése|
||-|S_16 – Beállítások mentése|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 110/136|





|Col1|-|S_48 – Bejegyzés értesítési naplójának lekérdezése|
|---|---|---|
|Telefonszám linkre kattintás|#89705 H06_08 – HUBA – Hívás eredménye #89705 vége; Mobile Phone Explorer|-|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.7.6.** **Rendszerüzenetek**







|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|H06_06A – Értesítések|||
|#89480 <Új> és <Másolás> nyomógomb kezelésekor, ha a bejegyzés már ’Elvetett’, ’Befejezett’ vagy ’Lezárt’ állapotú|„A bejegyzés nem ’Minősített’ állapotú. Nem rögzíthető új értesítés.”|Hiba|
|#89480 <Értesítendők feltöltése> nyomógomb kezelésekor, ha az ’Értesítendők’ lista nem üres|„Az ’Értesítendők’ lista tartalma törlődni fog, majd újra feltöltődik. Kívánja folytatni?” (Igen/Nem)|Figyelmeztető|
|#89642 <Értesítendők feltöltése> nyomógomb kezelésekor, ha nincs megjeleníthető értesítendő|„Az értesítési mátrix alapján nincs megjeleníthető értesítendő. Kérjük válasszon értesítési csoportot vagy értesítendőt.” (Rendben)|Figyelmeztető|
|#89642 Értesítendő <Hozzáadás> nyomógomb kezelésekor, ha az Értesítendő mező üres|„Kérem válasszon értesítendőt!” (Rendben)|Figyelmeztető|
|#89642 Értesítendő <Hozzáadás> nyomógomb kezelésekor, ha a hozzáadni kívánt Értesítendő már szerepel az Értesítendők listában|„A hozzáadni kívánt értesítendő már szerepel az Értesítendők listában.” (Rendben)|Információs|
|#89642 Értesítési csoport <Hozzáadás> nyomógomb kezelésekor, ha az Értesítési csoport mező üres|„Kérem válasszon értesítési csoportot!” (Rendben)|Figyelmeztető|
|#89642 Értesítési csoport <Hozzáadás> nyomógomb kezelésekor, ha nincs megjeleníthető értesítendő|„Az értesítési csoport alapján nincs megjeleníthető értesítendő. Kérjük válasszon értesítendőt, amennyiben szükséges.” (Rendben)|Figyelmeztető|
|#89480 <Lista törlése> nyomógomb kezelésekor, ha az ’Értesítendők’ lista nem üres|„Az ’Értesítendők’ lista tartalma törlődni fog. Kívánja folytatni?” (Igen/Nem)|Figyelmeztető|
|#89642 <Törlés> nyomógomb kezelésekor|„Biztosan törölni szeretné az értesítendőt?” (Igen/Nem)|Figyelmeztető|
|#89644 <Küldés> nyomógomb kezelésekor, ha nincs legalább egy értesítendő|„Adjon hozzá legalább egy értesítendő felhasználót!” (Rendben)|Hiba|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 111/136|


|felhasználó az ’Értesítendők’ listában|Col2|Col3|
|---|---|---|
|#89480 <Mégsem> nyomógomb kezelésekor rögzítés módban|„Biztosan elveti a módosításait?” (Igen/Nem)|Figyelmeztető|
|#89480 <Küldés> nyomógomb kezelésekor, az értesítés alapadatainak sikeres mentésekor|„Az értesítés mentése sikeres volt” (Rendben)|Információs|
|#89480 <Küldés> nyomógomb kezelésekor, az értesítés sikertelen mentésekor|„A mentés során hiba történt. Kérem próbálja újra később. RequiestId: [RequirestId]” (Rendben)|Információs|


**2.7.7.** **Kódtáblák, választási listák**

Nincs.

**2.7.8.** **Rendszerparaméterek**

Nincs.




-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 112/136|

##### 2.8. H06_07 – HUBA – Értesítésfogadó fel-/leiratkozás [#89410]

**2.8.1.** **Ablak/lap feladatai**

Az ablak a „ **H06_01** **– HUBA – Értesítési beállítások** ” ablak „ **Értesítésfogadók**
**beállításai** ” lapfülön található **„Fel-/Leiratkozás”** nyomógomb kezelésére nyílik meg,
és segítségével értesítésekre lehet feliratkozni, illetve leiratkozni.

**2.8.2.** **Ablak/lap megjelenése**

**2.8.3.** **Ablak/lap működése**

Az ablak megnyitása az „ **H06_01** **- HUBA – Értesítési beállítások** ” ablak
„ **Értesítésfogadók beállításai** ” lapfülön található „ **Fel-/Leiratkozás** ” nyomógombjának
megnyomását követően történik. A < **Fel-/Leiratkozás**    - nyomógomb azon GVK profil
felhasználók számára érhető el, akik rendelkeznek az


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 113/136|


**OP_H06_07_ErtFogFelLeIratkozás** **–** **Értesítés** **fogadók** **fel-** **/** **leiratkozása**
operandussal. Az operandus hiánya esetén a nyomógomb inaktív.

**Az ablak felépítése**

**Ablakbetöltés**

Ablakbetöltés előtt eldöntendő, hogy a felhasználó meglévő időintervallumot szerkeszt
vagy újat vesz fel. Ezt már a „ **H06_01** **- HUBA – Értesítési beállítások** ” ablak „ **Fel-**
**/Leiratkozás** ” nyomógombjának megnyomásakor el kell döntenie a rendszernek,
ennek megfelelően a **„** **H06_07** **– HUBA – Értesítésfogadó fel-/leiratkozása”** ablak új
felvitel vagy szerkesztés módban nyílik meg.

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_07’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’Create’ vagy ’Modify’ attól

függően, hogy új időintervallumot vesz fel a felhasználó, vagy a meglévőt
módosítja

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Amennyiben a **„** **H06_07** **– HUBA – Értesítésfogadó fel-/leiratkozása”** ablakot
szerkesztés módban nyitották meg, a „ **H06_01** **- HUBA – Értesítési beállítások** ”
képernyőn kiválasztott értesítésfogadó fel-/leiratkozás adatai átadásra kerülnek kliens

oldalon.

**Ablak működése**

A **„** **H06_07** **– HUBA – Értesítésfogadó fel-/leiratkozása”** ablak eltérően működik attól
függően, hogy a bejelentkezett GVK profil felhasználó állandó értesítésfogadó vagy
feliratkozott értesítésfogadó.

**Feliratkozott értesítésfogadó esetén:**

Feliratkozott értesítésfogadó esetén az ablak célja, hogy meghatározassa a felhasználó,
hogy milyen időszakban fogad értesítéseket a rendszertől. Ennek érdekében számára
a Belépve tól-ig mezők jelennek meg, és azt kell beállítania, hogy mely időszakban
fogad értesítéseket.

A képernyő megnyitásakor az alábbiak láthatók:

    - Kiválasztott értesítésfogadó neve (mivel megfelelő jogosultsággal nem csak

saját magának tud mindenki ilyen adatot beállítani)

    - Állandó értesítésfogadó? Nem


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 114/136|



    - **Belépve tól-ig** mezők, ahol a rendszer ellenőrzést végez aszerint, hogy az

aktuálisan kitöltött értékek (ha vannak, mit tartalmaznak):

`o` amennyiben nincs aktuálisan beállított érték, vagy múltbeli időpontra

mutat: új időintervallumot ad meg a felhasználó, a **Belépve tól** rész
kitöltődik automatikusan a rendszerdátummal (óra-perc pontosságig),
a **Belépve** **ig** rész pedig a **RECIPIENT_WORKING_HOURS**
rendszerparaméterrel megnövelt időpontot.

`o` amennyiben az aktuálisan beállított érték jövőbeli, vagy folyamatban

van: a korábban beállított időintervallumot szerkeszti a felhasználó,
nem lesz automatikus kitöltés, a korábbi értékek jelennek meg a

mezőkben.

A felhasználó a **Belépve tól** értéket csak jövőbeli értékre módosíthatja, a **Belépve ig**
érték pedig nem lehet kisebb, mint a **Belépve tól** érték.

A **Kilépve tól-ig** mezők ebben az esetben nem láthatók.

Mindkét időpont mező (Belépve tól-ig) kitöltése kötelező!

**Állandó értesítésfogadó esetén:**

Állandó értesítésfogadó esetén az ablak célja, hogy meghatározassa a felhasználó,
hogy milyen időszakban **nem** fogad értesítéseket a rendszertől. Ennek érdekében
számára a Kilépve tól-ig mezők jelennek meg, és azt kell beállítania, hogy mely
időszakban nem fogad értesítéseket.

A képernyő megnyitásakor az alábbiak láthatók:

    - Kiválasztott értesítésfogadó neve (mivel megfelelő jogosultsággal nem csak

saját magának tud mindenki ilyen adatot beállítani)

    - Állandó értesítésfogadó? Igen

    - **Kilépve tól-ig** mezők, ahol a rendszer ellenőrzést végez aszerint, hogy az

aktuálisan kitöltött értékek (ha vannak, mit tartalmaznak):

`o` amennyiben nincs aktuálisan beállított érték, vagy múltbeli időpontra

mutat: új időintervallumot ad meg a felhasználó, **Kilépve tól** rész
kitöltődik automatikusan a rendszerdátummal, a **Kilépve ig** rész pedig

üresen marad.

`o` amennyiben az aktuálisan beállított érték jövőbeli, vagy folyamatban

van: a korábban beállított időintervallumot szerkeszti a felhasználó,
nem lesz automatikus kitöltés, a korábbi értékek jelennek meg a

mezőkben.

A felhasználó a **Kilépve tól** értéket csak jövőbeli értékre módosíthatja, a **Kilépve ig**
érték pedig nem lehet kisebb, mint a **Kilépve tól** érték.

A **Belépve tól-ig** mezék ebben az esetben nem láthatók.

Mindkét dátum mező (Kilépve tól-ig) kitöltése kötelező!

**Nyomógombok**


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 115/136|


A **<Mentés>** nyomógomb csak akkor kezelhető, ha a kötelező mezők kitöltésre
kerültek, addig inaktív.

A felhasználó a **<Mentés>** gombra kattintva kezdeményezi a beállított időintervallum
mentését, amelyhez a kliens meghívja az **S_24 – Értesítésfogadó fel-/leiratkozás**
**mentése** eljárást az alábbi bemenő paraméterekkel:

    - GVK profil azonosító

    - Fel-/leiratkozás azonosítója (amennyiben szerkesztést ment az eljárás, új

felvitel esetén üresen marad)

    - Időintervallum adatok (csak a relevánsak, a többi üresen marad):

`o` Belépve tól

`o` Belépve ig

`o` Kilépve tól

`o` Kilépve ig

    - Létrehozó felhasználó, amennyiben új időintervallum került megadásra (a GVK

profil azonosítót a webapi réteg adja át). Módosítás esetén üresen marad.

    - Módosító felhasználó, amennyiben meglévő időintervallum került módosításra

(a GVK profil azonosítót a webapi réteg adja át). Új felvitel esetén üresen marad.

#99440 eleje Sikeres mentéskor az alábbi felugró pop-up ablak jelenik meg:

#99440 vége

A **<Mégsem>** gombra vagy az ablak jobb felső sarkában látható **<X>** gombra kattintva,
továbbá mellékattintás esetén a **„** **H06_07** **– HUBA – Értesítésfogadó fel-/leiratkozása”**

ablak mentés nélkül bezáródik.

Valamely adat módosítása esetén a kliens meghívja az „ **S_27 – Felhasználói aktivitás**
**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_07’

    - Esemény (’ACTIVITY’): ’Create’ vagy ’Modify’ attól függően, hogy új

időintervallumot vesz fel a felhasználó, vagy a meglévőt módosítja

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’):

`o` Create esetén: felvett adatok (mit adott meg a felhasználó) JSON

formában

`o` Modify esetén: módosítás adatok (mit mire módosított a felhasználó)

JSON formában


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 116/136|



    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

**Ablakbezárás**

A **<Mentés>** / **<Mégsem>** nyomógombok kezelésekor, ill. az **<X>** -re kattintáskor,
továbbá mellékattintáskor a rendszer bezárja a popup ablakot. Az ablak bezárásakor a
kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi
bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_07’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’Create’ vagy ’Modify’ attól

függően, hogy új időintervallumot vesz fel a felhasználó, vagy a meglévőt
módosítja

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 117/136|

### **2.8.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **








|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Értesítésfogadó|Értesítésfogadó|-|Szabad szöveges megjelenítő||||ERTESITES_FOGADO. NEV|
|Állandó értesítésfogadó?|Állandó értesítésfogadó?|-|Szabad szöveges megjelenítő||||ERTESITES_FOGADO. ALLANDO (I – Igen, N – Nem)|
|Belépve tól-ig|Belépve tól|-|Dátum és időpont kiválasztó||||ERTFOGADO_FEL_LEI RATKOZAS.BELEPVE_ TOL|
||Belépve ig|-|Dátum és időpont kiválasztó||||ERTFOGADO_FEL_LEI RATKOZAS.BELEPVE_ IG|
|Kilépve tól-ig|Kilépve tól|-|Dátum kiválasztó||||ERTFOGADO_FEL_LEI RATKOZAS.KILEPVE_ TOL|
||Kilépve ig|-|Dátum kiválasztó||||ERTFOGADO_FEL_LEI RATKOZAS.KILEPVE_I G|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 118/136|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Ment|-|nem nyomható meg|check|
||Mégsem|-|megnyomható|close|


**2.8.5.** **Hívott szolgáltatások**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
||-|S_24 – Értesítésfogadó fel- /leiratkozás mentése|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.8.6.** **Rendszerüzenetek**

Nincs.

**2.8.7.** **Kódtáblák, választási listák**

Nincs.

**2.8.8.** **Rendszerparaméterek**



|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
|---|---|---|
|RECIPIENT_WORKING_HOURS|Feliratkozott értesítésfogadó alapértelmezett munkaideje órában meghatározva.|12|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 119/136|

##### 2.9. H06_08 – HUBA – Hívás eredménye [#89698]

**2.9.1.** **Ablak/lap feladatai**

Az ablak a bejegyzés egy értesítésének egy telefonon értesítendő felhasználójához a
telefonhívás eredményének rögzítésére szolgál.

**2.9.2.** **Ablak/lap megjelenése**

**2.9.3.** **Ablak/lap működése**

Az ablak a „ **H06_06** **– HUBA – Értesítések kezelése** ” felületen az „ **Értesítési napló** ”
lapfülön egy értesítéshez tartozó valamely telefonon értesítendő felhasználónál
megjelenített telefonszám link kezelését követően nyílik meg. A link csak azon GVK
profil azonosítójú felhasználó számára aktív, megnyomható, akihez az
**OP_H06_08_HivasEredmenyMent** operandus hozzá van rendelve (ld. H06_06B
lapfülön kezelve).


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 120/136|


**Az ablak felépítése**

Az ablak a képernyő közepén jelenik meg a H06_06B felett.

Az ablak tartalmazza:

    - Az ablak azonosítóját, valamint megnevezését egy fehér hátterű sávban:

**H06_08 – HUBA – Hívás eredménye**

    - Új hívás eredmény rögzítéséhez a mezőket:

`o` Hívó: Nem módosítható.

`o` Hívás időpontja: Nem módosítható.

`o` Hívás sikeres?: Alapértelmezetten kikapcsolt állapotú.
Kezelésekor bekapcsolt állapotra vált.

`o` Megjegyzés: Szöveges mező, alapértelmezetten szerkeszthető és

kötelező (piros betűszínnel és kerettel jelenik meg, amíg üres a mező).
Amennyiben a Hívás sikeres? kapcsoló bekapcsolt állapotú, a
Megjegyzés mező opcionális.

    - Nyomógombok:

`o` nyomógomb: A < **Mentés**      - nyomógomb
alapértelmezetten kezelhető (megnyomható).

`o` nyomógomb: A < **Mégsem**      - nyomógomb
alapértelmezetten kezelhető (megnyomható).

    - nyomógomb az ablak jobb felső sarkában az ablak bezárásához.

**Ablakbetöltés**

Az ablak megnyitásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_08’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens az alábbi

módon tölti fel a mezők értékét:

    - Hívó: A bejelentkezett AD felhasználó neve

    - Hívás időpontja: Rendszerdátum és időpont. Formátuma: YYYY.MM.DD.

HH24:MI

    - Hívás sikeres?: Kikapcsolt állapotú

    - Megjegyzés: üres


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 121/136|


**Nyomógombok kezelése**

    - nyomógomb kezelése:

A < **Mentés**      - nyomógomb kezelésekor a kliens vizsgálja a ’Megjegyzés’ mező
kitöltöttségét, ha a ’Hívás sikeres?’ kapcsoló kikapcsolt állapotú:

`o` Amennyiben a fenti esetben a ’Megjegyzés’ mező kötelezően

kitöltendő, de üres, a kliens az alábbi pop-up üzenetet jeleníti meg az

ablak felett:

`o` Amennyiben a fenti esetben a ’Megjegyzés’ mező kötelezően

kitöltendő, de nem üres vagy opcionális mező, a kliens az új
híváseredmény elmentése céljából az alábbi bemenő paraméterekkel
meghívja az „ **S_72 – Hívás eredményének mentése** ” szolgáltatást:

          - Értesítés egyedi azonosítója (’ertesitesId’)

          - Értesítendő felhasználó egyedi azonosítója (’ertFelhId’)

          - Hívás időpontja (’hivasIdo’)

          - Hívás eredménye (’hivasEredmeny’): Lehetséges értéke I/N.

          - Megjegyzés (’megjegyzes’)

**Mentés eredménye** (’status’):

          - 200 – **Sikeres mentés esetén** a kliens az alábbi pop-up üzenetet

jeleníti meg:

A kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

             - Ablakazonosító (’WINDOW_ID’): ’H06_08’

             - Esemény (’ACTIVITY’): ’Create’

             - AD felhasználó (’AD_USER’): bejelentkezett felhasználó

AD azonosítója

             - GVK felhasználó (’GVK_USER’): GVK felhasználói profil

azonosítója

             - Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON

formában a mentés részletei

             - Bejegyzés azonosító (’MAIN_ID’): NULL

             - Bejegyzés sub azonosító (’SUB_ID’): NULL

             - Előzmény felhasználói aktivitás azonosító
(’PRE_ACTIVITY_ID’): NULL



-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 122/136|


Mentést követően a kliens az ablakot bezárja és a grid frissítése céljából
meghívja az „ **S_48 – Értesítési napló lekérdezése** ” tartalmát, bemenő
paraméterként átadva a bejegyzés egyedi azonosítóját (’bejegyzesId’).

          - 599 vagy 400 – **Sikertelen mentés esetén** a kliens az alábbi

popup üzenetet jeleníti meg a kapott RequiestId-val:

Sikertelen a mentés, ha az értesítési csoport valamelyik adatának

mentése nem volt sikeres az adatbázisba.

Ebben az esetben a < **Mentés**             - nyomógomb újra kezelhető.

    - nyomógomb kezelése:

A < **Mégsem**      - nyomógomb kezelésekor a kliens nem menti el a beírt adatot. Az
A kliens az alábbi pop-up üzenetet jeleníti meg:

**Ablak bezárása**

Az ablak bezárása a böngészőfülön lévő **<X>** nyomógombra kattintással lehetséges.

Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_08’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 123/136|

### **2.9.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **







|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelm ezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|---|
|Hívó|Hívó|-|szöveges megjelenítő|AN200||||
|Hívás ideje|Hívás ideje|-|dátum||YYYY.MM.DD. HH24:MI|||
|Hívás sikeres?|Hívás sikeres?|-|toggle bar|||kikapcsolt||
|Megjegyzés|Megjegyzés|-|textbox|AN100||üres||





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Mentés|-|megnyomható||
||Mégsem|-|megnyomható||


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 124/136|


**2.9.5.** **Hívott szolgáltatások**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
||-|S_72 – Hívás eredményének mentése|
||-|S_48 – Értesítési napló lekérdezése|
||-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.9.6.** **Rendszerüzenetek**






|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|<Mentés> nyomógomb kezelésekor kötelező, de üres a Megjegyzés mező|„Nincs minden kötelező mező kitöltve.”|Hiba|
|Az új rekord mentése sikeres|„A híváseredmény mentése sikeres volt.”|Információ|
|Az új rekord mentése sikertelen|„A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX”|Hibaüzenet|
|<Mégsem> nyomógomb kezelésekor|„Biztosan elveti a módosításait?”|Figyelmeztető|


**2.9.7.** **Kódtáblák, választási listák**

Nincs.

**2.9.8.** **Rendszerparaméterek**

Nincs.




-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 125/136|

##### 2.10. H06_09 – HUBA – Egyéb szervezetek [#91979]

**2.10.1.** **Ablak/lap feladatai**

Az ablak az értesítésfogadóhoz beállítható egyéb szervezetek karbantartására
(rögzítésére, módosítására, törlésére) szolgál.

**2.10.2.** **Ablak/lap megjelenése**

**2.10.3.** **Ablak/lap működése**

Az ablak a „ **H06_01** **– HUBA – Értesítési beállítások** ” felületen az „ **Értesítésfogadók**

**beállításai** ” lapfülön található (Egyéb szervezetek) nyomógomb

kezelését követően nyílik meg. A (Egyéb szervezetek) nyomógomb


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 126/136|


csak azon GVK profil azonosítójú felhasználó számára aktív, megnyomható, akihez az
**OP_H06_09_EgyebSzervezetekMegjelenitMent** operandus hozzá van rendelve.

**Az ablak felépítése**

Az ablak a képernyő közepén jelenik meg a H06_01A felett, vertikálisan dinamikusan
(ld. egyéb szervezet név megadása).

Az ablak tartalmazza:

    - Az ablak azonosítóját, valamint megnevezését egy fehér hátterű sávban:

**H06_09 – HUBA – Egyéb szervezetek**

    - Kapcsoló:

A kétállású kapcsoló ki-bekapcsolható. Bekapcsolt állapotban a kapcsoló
háttérszíne sötétebb szürke, kikapcsolt állapotban világosszürke.

A kapcsoló alapértelmezetten kikapcsolt állapotú. Bekapcsolt állapotban a griden megjelennek a törölt értesítési csoportok is.

    - Lista:

`o` Táblázatban jelenik meg az összes kért információ.

`o` Fejléc:

Amennyiben az oszlopcím nem fér ki, az **Oszlopcím…** jelenik meg. Tooltipben olvasható a teljes oszlopcím.

*Sorbarendezés* : Az oszlopcím jobb oldalán található (Sorbarendezés)
ikonra kattintva rendezhető a táblázat megjelenített tartalma. Az
alapértelmezett rendezés az értesítési csoport neve szerint történik ABC

sorrendben.

Az oszlopcím mellett egy felfelé (növekvő) vagy lefelé (csökkenő) mutató
nyíl jelzi, hogy mi szerint van rendezve. Egyszerre egy oszlop szerint

rendezhető a táblázat.

*Oszlopszűrés* : Az oszlopcím bal oldalán található (Oszlopszűrés) ikonra
kattintva az alábbi pop-up ablak segítségével a megjelenített találati lista
adott oszlopa szerinti további szűrésre van lehetőség:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 127/136|


Az alábbi szűrési feltételek alkalmazhatók: Tartalmaz (ez az
alapértelmezett) / Egyezik / Kisebb / Kisebb, egyenlő / Nagyobb / Nagyobb,
egyenlő / Üres / Nem üres. Egymást követően több oszlopon is beállítható
oszlopszűrés.

`o` Adatok:

Ablakbetöltéskor a grid-ben megjelennek az „ **S_59 – Egyéb szervezetek**
**lekérdezése** ” szolgáltatástól visszakapott adatok az ott definiált feltételek
alapján.

`o` Alsó vízszintes gördítősáv (horizontális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt oszlopa,
akkor az alsó vízszintes gördítősáv segítségével lehet megtekinteni a
táblázat többi oszlopát.

`o` Oldalsó függőleges gördítősáv (vertikális scrollbar):

Ha nem fér ki az oldalra a táblázat összes megjeleníteni kívánt sora,
akkor az oldalsó (jobb oldalon) függőleges gördítősáv segítségével lehet
megtekinteni a táblázat többi sorát.

    - Nyomógombok:

`o` nyomógomb: Az < **Új**      - nyomógomb alapértelmezetten
kezelhető (megnyomható) abban az esetben, ha a grid-en nincs kijelölve
sor. A grid-en kijelölt bejegyzés esetén a nyomógomb disabled állapotú.

`o` nyomógomb: A < **Szerkesztés**      - nyomógomb
alapértelmezetten nem kezelhető (nem megnyomható). Abban az


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 128/136|


esetben válik kezelhetővé (megnyomhatóvá), ha a grid-en van kijelölve

egy sor.

`o` nyomógomb: A < **Törlés**      - nyomógomb alapértelmezetten
nem kezelhető (nem megnyomható). Abban az esetben válik
kezelhetővé (megnyomhatóvá), ha a grid-en van kijelölve egy sor.

    - Egyéb szervezet neve:

Az Egyéb szervezet neve és a szövegesen megadható szerkesztő mező
alapértelmezetten nem jelenik meg. A mezőnév és a szerkesztő mező az < **Új**      vagy < **Szerkesztés**      - nyomógomb kezelésekor jelenik meg az ablakban.

    - Nyomógombok:

`o` nyomógomb: A < **Mentés**      - nyomógomb
alapértelmezetten nem kezelhető (nem megnyomható). Az < **Új**         - vagy
< **Szerkesztés**         - nyomógomb kezelésekor jelenik meg az ablakban, ekkor

válik kezelhetővé.

`o` nyomógomb: A < **Mégsem**      - nyomógomb
alapértelmezetten nem kezelhető (nem megnyomható). Az < **Új**         - vagy
< **Szerkesztés**         - nyomógomb kezelésekor jelenik meg az ablakban, ekkor

válik kezelhetővé.

    - nyomógomb az ablak jobb felső sarkában az ablak bezárásához.

**Ablakbetöltés**

Az ablak betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens meghívja
az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő
paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_09’

    - Esemény (’ACTIVITY’): ’WindowOpen’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak megnyitásakor a ’Töröltek is’ kapcsoló kikapcsolt állapotú.

Az ablak betöltésekor (első betöltés és későbbi újbóli betöltéskor is) a kliens bemenő
paraméter nélkül meghívja az „ **S_59 – Egyéb szervezetek lekérdezése** ” szolgáltatást.

A kliens a szolgáltatástól visszakapott értékeket megjeleníti a grid-en:

    - Egyéb szervezet egyedi azonosítója: A kliensen nem jelenik meg.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 129/136|



    - Egyéb szervezet megnevezése: A kliensen az ’Egyéb szervezet neve’ mezőben

jelenik meg.

    - Aktív? (I/N): A kliensen a ’Törölve’ mezőben jelenik meg.

**Grid és kapcsoló működése**

A kapcsoló kezelésekor a kapcsoló bekapcsolt állapotra vált. A grid-en
megjelennek az ablakbetöltéskor meghívott S_59 szolgáltatástól visszakapott inaktív
egyéb szervezetek is. A kapcsoló újbóli kezelésekor a kapcsoló kikapcsolt állapotra vált
és a grid-ből eltűnnek az inaktív egyéb szervezetek.

**Nyomógombok kezelése**

    - nyomógomb kezelése:

Az < **Új**      - nyomógomb kezelésekor a nyomógomb alatt megjelenik az alábbi

szekció:

Az ’Egyéb szervezet neve’ kötelezően kitöltendő mező.

A < **Mentés**      - nyomógomb kezelésekor a kliens vizsgálja a mező kitöltöttségét:

`o` Nem üres mező esetén a kliens az új egyéb szervezet elmentése céljából

az alábbi bemenő paraméterekkel meghívja az „ **S_60 – Egyéb szervezet**
**adatainak mentése** ” szolgáltatást:

          - Egyéb szervezet azonosítója: NULL

          - Egyéb szervezet megnevezése

          - Aktív? (I/N): ’I’

A kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

          - Ablakazonosító (’WINDOW_ID’): ’H06_09’

          - Esemény (’ACTIVITY’): ’Create’

          - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD

azonosítója

          - GVK felhasználó (’GVK_USER’): GVK felhasználói profil
azonosítója

          - Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON

formában a mentés részletei

          - Bejegyzés azonosító (’MAIN_ID’): NULL

          - Bejegyzés sub azonosító (’SUB_ID’): NULL

          - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’):

NULL

Mentést követően a kliens a grid frissítése céljából meghívja az „ **S_59 –**
**Egyéb szervezet lekérdezése** ” tartalmát. Az ’Egyéb szervezet neve’


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 130/136|


mező, a < **Mentés**        - és < **Mégsem**        - nyomógombok visszaváltanak
disabled státuszúra. [#99440 eleje] A kliens az alábbi pop-up üzenetet jeleníti

meg:

#99440 vége

`o` Üres mező esetén a kliens az alábbi pop-up üzenetet jeleníti meg az

ablak felett:

A < **Mégsem**      - nyomógomb kezelésekor a kliens nem menti el a beírt értéket. Az
’Egyéb szervezet neve’ mező, a < **Mentés**      - és < **Mégsem**      - nyomógombok

visszaváltanak disabled státuszúra.

    - nyomógomb kezelése:

A < **Szerkesztés**      - nyomógomb kezelésekor a nyomógomb alatt megjelenik az

alábbi szekció:

Az ’Egyéb szervezet neve’ mezőben megjelenik a grid-en kijelölt sorban
szereplő név értéke. Kötelezően kitöltendő mező, módosítást követően sem

lehet üres.

A < **Mentés**      - nyomógomb kezelésekor a kliens vizsgálja a mező kitöltöttségét:

`o` Amennyiben módosításkor nem üres a mező, a kliens az egyéb szervezet

nevének módosítása céljából az alábbi bemenő paraméterekkel
meghívja az „ **S_60 – Egyéb szervezet adatainak mentése** ” szolgáltatást:

          - Egyéb szervezet azonosítója

          - Egyéb szervezet megnevezése


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 131/136|



          - Aktív? (I/N): ’I’

`o` Amennyiben módosításkor üres marad a mező, a kliens az alábbi pop
up üzenetet jeleníti meg az ablak felett:

A < **Mégsem**      - nyomógomb kezelésekor a kliens nem menti el a módosítást. Az
’Egyéb szervezet neve’ mező, a < **Mentés**      - és < **Mégsem**      - nyomógombok

visszaváltanak disabled státuszúra.

#92775 **Mentés eredménye** (’status’):

`o` 200 – **Sikeres mentés esetén** a kliens az alábbi pop-up üzenetet jeleníti meg:

#99440 eleje

#99440 vége

         - A kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”

szolgáltatást az alábbi bemenő paraméterekkel:

          - Ablakazonosító (’WINDOW_ID’): ’H06_09’

          - Esemény (’ACTIVITY’): ’Modify’

          - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD

azonosítója

          - GVK felhasználó (’GVK_USER’): GVK felhasználói profil
azonosítója

          - Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON

formában a mentés részletei

          - Bejegyzés azonosító (’MAIN_ID’): NULL

          - Bejegyzés sub azonosító (’SUB_ID’): NULL

          - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’):

NULL

`o` Mentést követően a kliens a grid frissítése céljából meghívja az „ **S_59**

**– Egyéb szervezetek lekérdezése** ” tartalmát. Az ’Egyéb szervezet


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 132/136|


neve’ mező, a < **Mentés**            - és < **Mégsem**            - nyomógombok

visszaváltanak disabled státuszúra.

`o` 599 vagy 400 – **Sikertelen mentés esetén** a kliens az alábbi popup üzenetet

jeleníti meg a kapott RequiestId-val:

Sikertelen a mentés, ha az egyéb szervezetek valamelyik adatának mentése

nem volt sikeres az adatbázisba.

Ebben az esetben a < **Mentés és bezárás**      - nyomógomb újra kezelhető. [#92775 vége]

    - nyomógomb kezelése:

A < **Törlés**      - nyomógomb kezelésekor a kliens a grid-en kijelölt értesítési csoport
inaktívra módosítása céljából az alábbi bemenő paraméterekkel meghívja az
„ **S_60 – Egyéb szervezet adatainak mentése** ” szolgáltatást:

`o` Értesítési csoport azonosítója
`o` Értesítési csoport megnevezése
`o` Aktív? (I/N): ’N’

A kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást az
alábbi bemenő paraméterekkel:

`o` Ablakazonosító (’WINDOW_ID’): ’H06_09’
`o` Esemény (’ACTIVITY’): ’Modify’
`o` AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója
`o` GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója
`o` Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON formában a

mentés részletei

`o` Bejegyzés azonosító (’MAIN_ID’): NULL
`o` Bejegyzés sub azonosító (’SUB_ID’): NULL
`o` Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Törlést követően a kliens a grid frissítése céljából meghívja az „ **S_59 – Egyéb**
**szervezetek lekérdezése** ” tartalmát. A törölt egyéb szervezet már nem jelenik
meg a grid-en. [99440 eleje] A kliens az alábbi pop-up üzenetet jeleníti meg:


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 133/136|


#99440 vége

**Ablak bezárása**

Az ablak bezárása a böngészőfülön lévő **<X>** nyomógombra kattintással lehetséges.

Az ablak bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): ’H06_09’

    - Esemény (’ACTIVITY’): ’WindowClose’

    - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

    - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

    - Esemény kiegészítő információk (’ACTIVITY_EXT’): ’View’

    - Bejegyzés azonosító (’MAIN_ID’): NULL

    - Bejegyzés sub azonosító (’SUB_ID’): NULL

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
’WindowOpen’ eseménykor kapott ACTIVITY_ID.


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 134/136|

### **2.10.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **









|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|---|
|Toolbar - Kapcsolók||||||||
||Törölt értesítési csoportok|-|two-state- button|||kikapcsolt||
|Grid||||||||
||(szűrés: Tartalmaz)|Oszlopszűrés||||||
||(szűrés: combobox)||combobox|||||
||(rendezés)|Sorbarendezés||||||
||Horizontális scrollbar|-|scrollbar|||-||
||Vertikális scrollbar|-|scrollbar|||-||
|Egyéb szervezet neve||||||||
|Egyéb szervezet neve:|Egyéb szervezet neve:|-|label|||nem jelenik meg||
|-|(Egyéb szervezet neve)|-|szöveges mező|AN50||nem jelenik meg|HUBA.EGYEB_SZERVEZ ET|

### **Grid oszlopai az alapértelmezett sorrendben **





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Hossz|Maszk/ Típus|Alapértelmezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|
|Egyéb szervezet neve|Egyéb szervezet neve|Egyéb szervezet neve|AN50||-|HUBA.EGYEB_SZERVEZET|
|Törölt|Törölt|Törölt|boolean|I/N|-|HUBA.EGYEB_SZERVEZET|


-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 135/136|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Új felvitel|-|megnyomható||
||Szerkesztés|-|nem nyomható meg||
||Törlés|-|nem nyomható meg||
||Mentés|-|nem nyomható meg||
||Mégsem|-|nem nyomható meg||


**2.10.5.** **Hívott szolgáltatások**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés|-|S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés|-|S_59 – Egyéb szervezetek lekérdezése|
|||S_27 – Felhasználói aktivitás naplózása|
||-|S_60 – Egyéb szervezet adatainak mentése|
||-|S_60 – Egyéb szervezet adatainak mentése|
|Ablakbezárás|-|S_27 – Felhasználói aktivitás naplózása|


**2.10.6.** **Rendszerüzenetek**





|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|<Új> nyomógomb kezelését követően üres egyéb szervezet névvel <Mentés> nyomógomb kezelésekor|„Nincs minden kötelező mező kitöltve.”|Hiba|
|<Szerkesztés> nyomógomb kezelését követően üres egyéb szervezet névvel <Mentés> nyomógomb kezelésekor|„Nincs minden kötelező mező kitöltve.”|Hiba|
|#92775 Az új rekord mentése sikeres|„A híváseredmény mentése sikeres volt.”|Információ|
|#92775 Az új rekord mentése sikertelen|„A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX”|Hibaüzenet|


**2.10.7.** **Kódtáblák, választási listák**

Nincs.

**2.10.8.** **Rendszerparaméterek**

Nincs.




-----

|GVK_UC_H06 Részletterv|Col2|Azonosító: RRT_UC_H06|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.32|Oldal: 136/136|


-----



08.md :::
|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 1/23|

# – GVK_UC_H08  HUB A bej egyzés részletek RÉSZLETES RENDSZERTERV
## 2024. november 27.
### V7.1


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 2/23|

#### **Dokumentum történet **

Kidolgozó változtatások követése





|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|7.0|2024.05.31|Létrehozás|Vörös Gábor|Elkészült|
|7.0|2024.06.07|#88899 - HUBA - UC_H08_01 Bejegyzés részletek képernyőtervezés|Vörös Gábor|Elkészült|
|7.0|2024.06.14|#89596 - HUBA - UC_H08_01 Bejegyzés részletek beviteli mezők|Vörös Gábor|Elkészült|
|7.0|2024.06.14|#89597 - HUBA - UC_H08_01 Bejegyzés részletek leírás|Vörös Gábor|Elkészült|
|7.0|2024.06.25|#91149 - HUBA - UC_H08_01 Bejegyzés részletek - H01_01-ről átkerült funkciók|Vörös Gábor|Elkészült|
|7.0|2024.09.12|#93801 - GVK - HUBA - Pre_activity_ID töltése|Vörös Gábor|Elkészült|
|||#95867 - GVK - HUBA - H08 kérjük megcserélni az ablakban a Leírás és a szöveg beviteli mezőt|Vörös Gábor|Elkészült|
|7.1|2024.11.27|#95136 - GVH - HUBA H08_01 helyesírás ellenőrzés megvalósítása a szövegbeviteli dobozban|Berkesi Ádám|Elkészült|
|7.1|2024.11.28|#96127 - HUBA - H09 - Kifogáskezelés|Kovács Eszter|Folyamatban|
|7.1|2025.01.14|#96564 - HUBA - Konkurenskezelés trace condition megoldása|Vörös Gábor|Elkészült|
|7.0|2025.02.06.|#92775 - DB mentés sikertelenségéről felhasználó tájékoztatása|Kovács Eszter|Ellenőrizhető|


MÁV SZK Ellenőrzések követése



|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.06.14|Ellenőrzés|Vörös Gábor|Ellenőrizve|
||||||
||||||
||||||


MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
|||MÁV igényeknek megfelel|Herczog Ákos||
||||||
||||||
||||||


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 3/23|

#### **1. Általános ismertetés **
##### **1.1. A használati eset modulkapcsolatai **

**Szolgáltatások leírásának elérhetősége:**

[GVK_webalkalmazás_szolgáltatások.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1301)

#96127


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 4/23|

##### **1.2. A használati eset célja, feladatai **

A használati eset alapvető célja, hogy a HUBA bejegyzés részleteinek rögzítését és
megtekintését megoldja.

Feladata, hogy lehetőséget biztosítson

    - HUBA bejegyzés minősítésére

    - HUBA bejegyzés felelőseinek megadására

    - #96127 HUBA bejegyzéshez vasútvállalatok hozzárendelése

    - HUBA bejegyzés kezdetének és végének meghatározására

    - HUBA bejegyzés állapotváltozásainak kezelésére (Új-Minősített-Befejezett
Elvetett)

    - HUBA bejegyzés részletes leírásának rögzítésére kép beszúrási lehetőséggel


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 5/23|

#### **2. A használati eset ablakai **
##### **2.1. Ablakok közötti kapcsolat, navigálás **


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 6/23|

##### **2.2. H08_01 - HUBA – Bejegyzés részletek **

**2.2.1.** **Ablak/lap feladatai**

Az UC_H08 HUBA Bejegyzés részletek használati eset keretében az alábbi funkcionális követelmények

megvalósítása történik:

  - HUBA minősítéskor ez a képernyő nyílik meg (HUBA jellege mező itt adható meg)

  - Esemény tárgya itt adható meg

  - Esemény kezdetének időpontja itt adható meg

  - Esemény felelőse itt adható meg (a felhasználó a szakágakból választhat)

  - #96127 Eseményben érintett Vasútvállalatok adhatóek meg

  - Esemény leírása itt adható meg, de nem lehet törölni, és módosítani, csak a végéhez lehet hozzáadni
további szöveget

`o` Megjelenítés két részben:

          - Ki, mikor és mit írt bele (görgethető, de nem módosítható)

          - Text editor, ahol a felhasználó hozzáírhat leíráshoz

          - Fénykép beszűrási lehetőség biztosítása


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 7/23|


**2.2.2.** **Ablak/lap megjelenése**

A H08_01 – HUBA – bejegyzés részletek képernyő kétféle módban nyílik meg:

  - Szerkesztés [#95867 #96127 ] :

  - Megtekintés:


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 8/23|


**2.2.3.** **Ablak/lap működése**

**Az ablak felépítése**

  - Az ablak kitölti a teljes képernyőt.

  - Fejléc

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet használatakor
a fejléc háttérszíne középszürke (7F7F7F).

Üzemi (PROD)

Felhasználói teszt (QA)

Képernyőfotó a megvalósítás után.

Belső teszt (TEST)

Képernyőfotó a megvalósítás után.

Fejlesztői (DEV)

Képernyőfotó a megvalósítás után.

`o` Középen az ablak azonosítóját és megnevezését: „ **H08 – HUBA –**

**Bejegyzés részletek** ”

`o` Jobb szélen:

            - Rendszer neve és logója, valamint a rendszer neve alatt a

frontend verziószáma jelenik meg.

            - A logó előtt a GVK környezet neve:

               - üzemi (PROD): Nem jelenik meg a kliensen.

               - felhasználói teszt (QA): „ **QA** ”

               - teszt (TEST): „ **TEST** ”

               - fejlesztői (DEV): „ **DEV** ”

            - GVK profil név:
A GVK-ba történt bejelentkezéskor érvényes GVK profil név
megjelenítésére szolgál.

  - Fejléc alatt az alábbi két adat jelenik meg:

`o` HUBA Azonosító

`o` HUBA Betűkód

A tartalmi rész két nagyobb részből áll:


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 9/23|



  - Adatbeviteli mezők (tárgy, kezdet, jelleg, felelős, [#96127] vasútvállalat)

  - Részletes leírás (megjelenítés és szerkesztés)

**Az ablak működési leírása (lapfül esetén külön almenüben)**

A képernyő két különböző módban nyitható meg:

  - Szerkesztés

Meglévő bejegyzés szerkesztése esetén betöltéskor feltöltődnek a mezők a korábban
mentett tartalommal, illetve a konkurenskezelés is aktív.

  - Megtekintés

Megtekintés esetén betöltéskor feltöltődnek a mezők a korábban mentett
tartalommal, minden mező inaktív, és nincs konkurenskezelés sem.

**Ablak betöltés** **[#96564]**

Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, az alábbi sorrendben
hajtódik végre az ablak betöltése. A kliens meghívja az „ **S_27 – Felhasználói aktivitás**
**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H08_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Modify”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

A kliens az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól kétféle módon kaphat

vissza értéket:

Amennyiben az **„EDITABILITY”** mezőben ’0’ (azaz nulla) érték érkezik, és **„ACTIVITY_ID”** érték
is érkezik a válaszban, a kliens folytatja konkurenskezelés indításával a folyamatot, és a

felahasználó szerkesztheti a kívánt adatelemet.

Amennyiben az **„EDITABILITY”** mezőben ’0’ (azaz nulla) érték érkezik, és az **„ACTIVITY_ID”**
mező nem tartalmaz értelmezhető adatot (azaz az értéke NULL), abban az esetben valamilyen
adatbázis oldali hiba történt, és az alábbi hibaüzenet kerül megjelenítésre, majd az OK-ra
kattintva a képernyő bezárul:


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 10/23|


Amennyiben az eljárástól válaszként az **„EDITABILITY”** mezőben egy ’0’-tól (azaz nullától)
eltérő numerikus érték érkezik, abban az esetben egy másik felhasználó már szerkeszti a kívánt
adatelemet, ezért a kliens hibaüzenetet küld az alábbiak szerint:

Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot (amivel a teljes képernyő is bezárul),
vagy megnyitja a kívánt képernyőt megtekintési nézetben, és a képernyő betöltésének
végrehajtása ott folytatódik.

Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, és a felhasználói aktivitás
logolásnál kapitt vissza érvényes **„ACTIVITY_ID”** -t, azzal elindítja a Konkurenskezelés
életjelküldés funkcióját, a **„K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)”** függvény 20mpént (rendszerparaméterben meghatározott) történő meghívásával.
Az életjel küldés funkció minden esetben ellenőrizni fogja a munkamenet érvényességét, és

eszerint választ küld a kliensnek az alábbiak szerint:

  - „OK” – a függvény frissítette a munkamenetet, a szerkesztés folytatható

  - „CEASED_ACTIVITY” – valamilyen esemény folytán a munkamenet megszakadt, de a

munkamenet még nem került a háttérben lezárásra. Ilyenkor a felhasználó dönthet,
hogy folytatja-e a munkát. Ez az eset akkor fordulhat elő, ha az életjel küldés legutóbb
1 percnél korábban futott le, de még nem érte el a 10 percet (rendszerparaméterben
meghatározott időzítések).

A kliens az alábbi üzenetet jeleníti meg:

`o` amennyiben a felhasználó ilyenkor azt választja, hogy folytatja a munkamenetet

(Igen-re kattint), ezt megteheti, és a rendszer úgy kezeli, mintha a munkamenet
folyamatos lett volna. Ebben az esetben a kliens meghívja a **„K_15_03 – Életjel**
**küldés ellenőrzés nélkül (SET_DATA_FORCE_LIFESIGN)”** eljárást az „ **S_27 –**
**Felhasználói aktivitás naplózása** ” szolgáltatástól WindowOpen eseménykor
visszakapot „ **ACTIVITY_ID** ”-val, amely ellenőrzés nélkül végrehajtja az életjel


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 11/23|


küldés funkciót, így a továbbiakban folytatható a munkamenet a normál
kerékvágásban.

`o` a felhasználó dönthet úgy is, hogy a munkamenetet lezárja (Nem-re kattint),

ami egy <Mégsem> gomb megnyomásával egyenértékű, azaz a kliens mentés
nélkül bezárja a képernyőt. Ebben az esetben a <Mégsem> gomb megnyomása
esetén leírt folyamatok hajtódnak végre.

  - „CLOSED_ACTIVITY” – valamilyen esemény folytán a munkamenet megszakadt, és a

munkamenet a háttérben már lezárásra került, a szerkesztés NEM folytatható. Ebben
az esetben a kliensnek mentés nélkül be kell zárnia a képernyőt. Ilyen akkor fordulhat
elő, ha hosszabb kihagyás (rendszerparaméterben meghatározandó –
alapértelmezetten 10 perc) után küldött a kliens újra életjelet.

A kliens az alábbi üzenetet jeleníti meg:

Az <OK> gombra kattintás után a <Mégsem> gomb megnyomása esetén leírt
folyamatok hajtódnak végre.

  - „ERROR:MISSING_ACTIVITY” – valamilyen hiba folytán a munkamenet nem található,

akkor az eljárás ezt az üzenetet küldi vissza, majd bezárja a képernyőt.

Az <OK> gombra kattintás után a <Mégsem> gomb megnyomása esetén leírt
folyamatok hajtódnak végre.

Amennyiben a felhasználó megtekintésre nyitotta meg a képernyőt, a kliens meghívja az „ **S_27**
**– Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H08_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „View”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 12/23|


Ezután szerkesztés és megtekintés esetén is a kliens minden kereső paraméterre vonatkozóan
meghívja az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ” szolgáltatást,
bemenő paraméterként átadva neki az adatelem azonosítóját (AutosuggestId).

Az S_08 hívások és az átadott értékek:

  - HUBA jellege

  - Szakágak

  - #96127 Vasútvállalat

A kliens az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ” szolgáltatás
hívások során visszakapott listaszerű adatokkal feltölti az autocomplete (kiválasztási)
funkcióval rendelkező szöveges beviteli mezők értékkészletét. A listákban az S_08 szolgáltatás
által visszaadott ’text’ paraméter értékei jelennek meg.

Szerkesztés és megtekintés esetén is a kliens ezután meghívja az **„S_50 – HUBA – Bejegyzés**
**részletek adatainak betöltése (GET_HUBA_RESZLETEK)”** eljárást a HUBA bejegyzés egyedi
azonosítóját átadva bemenő paraméterként, amely JSON-ban adja vissza a megjelenítendő

adatokat.

**Ablak működése**

Az **OP_H08_01_BRSzerkeszt – HUBA bejegyzés részletek szerkesztése** operandus megléte
esetén a felhasználó új felvitelre és szerkesztésre is megnyithatja a **H08_01 – HUBA –**
**Bejegyzés részletek** képernyőt. Ezt már a **H02_01 – HUBA – Bejegyzés** képernyőn ellenőrzi a
rendszer, és csak akkor jelenik meg a szerkesztés ikon, ha a fenti operandus engedélyezett a

felhasználónak.

**OP_H08_01_BRMegtekint – HUBA bejegyzés részletek megtekintése** operandus esetén csak
megtekintésre nyithatja meg a képernyőt. Ezt szintén már a **H02_01 – HUBA – Bejegyzés**
képernyőn ellenőrzi a rendszer, és csak akkor jelenik meg a megtekintés ikon, ha a fenti
operandus engedélyezett a felhasználónak.

Megtekintés módban a felhasználó semmilyen mezőt nem szerkeszthet, és nem jelenik meg a
HUBA leírás text editora sem, helyette a leírás megjelenítés kitölti a teljes képernyőt.

Új felvitel mód megjelenésben nem tér el a szerkesztés módtól.

Mezők leírása:

  - HUBA tárgya

Szabad szöveges mező, amely kitöltése az alábbiak szerint változik:

`o` **OP_H08_01_BRTargySzerkeszt – HUBA bejegyzés részletek tárgy szerkesztése**

operandus megléte esetén a mező aktív, és a kitöltés kötelező

Üres állapotában piros kerettel és label színnel jelenik meg, amely kitöltve

zöldre vált.

`o` **OP_H08_01_BRTargySzerkeszt – HUBA bejegyzés részletek tárgy szerkesztése**

operandus hiánya esetén a mező inaktív (értelemszerűen nem kötelező)


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 13/23|



 - HUBA kezdete

Dátum és időpont (óra/perc) választó mező, amelynek kitöltése kötelező.

Üres állapotában piros kerettel és label színnel jelenik meg, amely kitöltve zöldre vált.

 - HUBA vége

Dátum és időpont (óra/perc) választó mező, amelynek kitöltése nem kötelező.

Kezdetben minden felhasználó, aki rendelkezik az **OP_H08_01_BRSzerkeszt – HUBA**
**bejegyzés részletek szerkesztése** operandussal, kezelheti a mezőt, viszont ha a HUBA
jellege egyszer kitöltésre kerül (minősített bejegyzés), csak azoknak a felhasználóknak
válik kezelhetővé a mező tartalma, akik rendelkeznek az
**OP_H08_01_BRVegeSzerkeszt – HUBA bejegyzés részletek HUBA vége szerkesztése**
operandussal.

A HUBA vége mező állapotváltást vezérel, ha kitöltésre kerül, és a HUBA jellege is ki
van töltve, a bejegyzés állapota „Befejezett”-re változik.

 - HUBA jellege

A felhasználó itt választhatja ki, hogy hiba, zavar vagy egyéb az esemény jellege. HUBA
minősítéskor is megadhatja, vagy akár új felvitelkor is. A mező kitöltése nem kötelező.

A HUBA jellege csak azok számára kezelhető, akik rendelkeznek az
**OP_H08_01_BRJellegeSzerkeszt – HUBA bejegyzés részletek HUBA jellege**
**szerkesztése** operandussal.

A HUBA jellege mező állapotváltást vezérel, amíg üres, addig a bejegyzés állapota „Új”,
amint kiválasztásra kerül a bejegyzés állapota „Minősített”-re változik.

 - HUBA felelős

Chipszes lenyíló lista, amelyben a szakágak jelennek meg, és a felhasználó azokból
választhat akár többet is. Nincs limit a választható szakágak esetén.

 - #92180 Feladatkosárba tesz (switch)

Switch választó, amely bekapcsolása esetén a aktuális HUBA bejegyzés megjelenik a
**H01_01 – HUBA - Bejegyzések** képernyő **Feladatkosár** kétállású kapcsolójára kattintva.

 - Elvetés (switch)

Switch választó, amely bekapcsolása esetén megjelenik az Elvetés indoka mező.

Az Elvetés switch csak azok számára kezelhető, akik rendelkeznek az
**OP_H08_01_BRElvetesSzerkeszt – HUBA bejegyzés részletek Elvetés szerkesztése**
operandussal.

Az Elvetés switch állapotváltást vezérel, ha bekapcsolásra kerül, és az Elvetés indokat
is ki van töltve, a bejegyzés állapota „Elvetett”-re változik.

Amennyiben a képernyő betöltésekor az Elvetés switch bekapcsolat állapotú, annak
kikapcsolása nem lehetséges. Elvetett bejegyzést nem lehet visszaminősíteni.

 - Elvetés indoka


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 14/23|


Szabad szöveges mező, amely csak az Elvetés switch bekapcsolt állapotában látható,

és ebben az esetben a kitöltése is kötelező.

Az Elvetés indoka csak azok számára kezelhető, akik rendelkeznek az
**OP_H08_01_BRElvetesSzerkeszt – HUBA bejegyzés részletek Elvetés szerkesztése**
operandussal.

 - HUBA leírása [#95867]

Két részből álló mező, mivel a már egyszer beírt tartalom nem módosítható, csak a
végéhez lehet további leírást vagy képet hozzáfűzni.

`o` HUBA leírás szerkesztése: a felhasználó itt töltheti ki a HUBA leírást, amelybe

képeket is beszúrhat. Ehhez a TinyMCE text editort használja a rendszer.

       - #95136 A TinyMCE editort úgy konfiguráltuk, hogy támogatja a helyesírásellenőrzést is, de ehhez az adott gépen be kell kapcsolni a böngészőben
ezt a beállítást. A GVK-ban a Google Chrome a támogatott böngésző,
ebben a „Beállítások” => „Nyelvek” => „Helyesírás ellenőrzés” menüben
az adott nyelvet kiválasztva lehet személyre szabni a kívánt nyelv

ellenőrzést.

#95136_vége

Mentéskor időponttal és névvel kiegészítve hozzáfűzi a korábbi leírás végéhez

az itt beírt tartalmat.

`o` HUBA leírás megjelenítés: itt jelennek meg a már korábban felvett leírások

névvel és időponttal kiegészítve. Új felvitelnél értelemszerűen üresen jelenik

meg

A megjelenítés kronológiai sorrendben történik (azaz a legrégebbivel
kezdődik), viszont mindig a tartalom végére ugorva jelenik meg úgy, hogy a


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 15/23|


scrollbar a tartalom végére ugrik képernyő betöltéskor. Biztosítva, hogy a
felhasználó az utolsó beírást lássa a képernyőn.

  - Vasútvállalat [#96127]

addig lehet, amíg adott Bejegyzés nem lezárt. (Az **OP_H08_01_BRSzerkeszt –**
**HUBA bejegyzés részletek szerkesztése** operandus megléte esetén lehet
módosítani csak)

Törölni addig lehet belőle, amíg adott Vasútválalat adott Bejegyzéshez nem
rögzített Kifogást. ( **S_78 – Vasútvállalat törölhetőségének lekérdezése**
**(HUBA.Get_Torolheto_VV** ).

Szerkesztéskor a HUBA leírás tartalma nem változtatható (csak hozzáfűzni lehet). A további

mezők szabadon szerkeszthetők.

**Bejegyzés állapota**

Az alábbi állapot átmenet diagram mutatja azt, hogy a bejegyzés hogy válthat állapotokat:

Erre a felületen is figyelni kell, ezért állapottól függően más lehet a beviteli mezők
megjelenítése, szerkeszthetősége vagy egyéb paraméterei.

Bejegyzés állapotának meghatározásai:

  - HUBA jellege nincs kitöltve és az Elvetés mező „N” (False) értékű: **„Új”**



-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 16/23|



  - HUBA jellege ki van töltve, HUBA vége nincs kitöltve és az Elvetés mező „N” (False)

értékű: **„Minősített”**

  - HUBA jellege és HUBA vége is ki van töltve és az Elvetés mező „N” (False) értékű:

**„Befejezett”**

  - Elvetés mező értéke „I” (True): **„Elvetett”**

  - Huba lezárása ki van töltve: **„Lezárt”**

A felület működése az alábbiak szerint változik az egyes állapotok esetében:

  - Új állapotú bejegyzés esetén

`o` HUBA tárgya: megfelelő operandus esetén tölthető, kötelező

`o` HUBA kezdete: tölthető, kötelező

`o` HUBA vége: tölthető

`o` HUBA jellege: megfelelő operandus esetén tölthető

`o` HUBA felelős: tölthető, módosítható

`o` Elvetés: megfelelő operandus esetén állítható

`o` Elvetés indoka: Elvetés True állapotában kötelező, megfelelő operandus

szükséges hozzá

`o` HUBA leírása: tölthető, korábbi beírások nem módosíthatók (és nem is

törölhetők)

`o` #96127 Vasútvállalat : tölthető és módosítható, ha lehet (S_78-as szolgáltatás)

Továbbiakban csak a változások kerülnek listázásra.

  - Minősített bejegyzés esetén

`o` HUBA vége: csak megfelelő operandus megléte esetén tölthető

`o` HUBA jellege: megfelelő operandus esetén tölthető, nem törölhető!!!

`o` #96127 Vasútvállalat : tölthető és módosítható, ha lehet (S_78-as szolgáltatás)

  - Befejezett bejegyzés esetén

`o` HUBA vége: megfelelő operandus esetén tölthető, törölhető is (ez esetben

Minősített lesz a bejegyzés állapota).

`o` HUBA jellege: megfelelő operandus esetén tölthető, nem törölhető!!!

#96127 Vasútvállalat: megfelelő operandus esetén módosítható ( **S_78 –**
**Vasútvállalat törölhetőségének lekérdezése (HUBA.Get_Torolheto_VV** ))

  - Elvetett bejegyzés esetén

**Csak megtekintési mód érhető el!!!**

  - Lezárt bejegyzés esetén

**Csak megtekintési mód érhető el!!!**


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 17/23|


**Nyomógombok**

#96127 Vasútvállalat chipses törlő nyomógombra kattintva lefut az alábbi ellenőrzés

(„ **S_78** **– Vasútvállalat törölhetőségének lekérdezése (HUBA.Get_Torolheto_VV)”).** (Törlés

lehetőség csak addig lehetséges, amíg adott Bejegyzés nem lezárt.) Amennyiben olyan

Vasútvállalatot szeretnétek törölni, aminél az S_78-as szolgáltatás false értéket ad vissza a

kliensnek, akkor az alábbi felugró pop up ablak jelenik meg, és a törlés nem sikeres. (True

érték esetén a törlés sikeres a kliensen)

#96127 vége

A **Mentés** gombra kattintva (csak új felvitel és szerkesztés módban érhető el) a H08 – HUBA –
Bejegyzés részletek képernyőn az alábbi folyamatok futnak le a lenti sorrendben:

#92775 eleje Az ablak meghívja az **„S_51 – HUBA – Bejegyzés részletek adatainak mentése**
**(SET_HUBA_RESZLETEK)”** eljárást, . Az eljárás a HUBA bejegyzés egyedi azonosítójának
bemenő paraméterként átadásából tudja majd eldönteni, hogy szerkesztés vagy új felvitel
történt. Utóbbi esetben nem lesz egyedi azonosító.

A visszakapott SQL kód alapján jelenít meg pop-up ablakban.

  - A mentés sikeres, ha a státusz kód 200-as.

`o` A képernyőn az alábbi folyamatok futnak le a lenti sorrendben:

`o` Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, a kliens az

**„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól (WindowOpen
eseménykor) visszakapot **„ACTIVITY_ID** ”-val, soron kívül elindítja a


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 18/23|


Konkurenskezelés életjelküldés funkcióját, a **„K_15_02 – Életjel küldés**
**(SET_DATA_LIFESIGN)”** függvény meghívásával.

`o` Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, a kliens

lezárja a munkamenetet a **„K_15_04** **–** **Munkamenet** **lezárás**
**(SET_DATA_CLOSE)”** eljárás meghívásával, amihez bemenő paraméterként az
**„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól (WindowOpen
eseménykor) visszakapot **„ACTIVITY_ID** ”-t küldi be.

`o` A mentést követően a kliens meghívja az „ **S_27 – Felhasználói aktivitás**

**naplózása** ” szolgáltatást az alábbi bemenő paraméterekkel:

        - Ablakazonosító (’WINDOW_ID’): „H08_01”

        - Esemény (’ACTIVITY’): „Modify”

        - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

        - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

        - Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON formában a

mentés részletei

        - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

        - Bejegyzés sub azonosító (’SUB_ID’): NULL

        - #93801 Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A
WindowOpen eseménykor kapott **ACTIVITY_ID.**

  - Ha a mentés nem sikeres 599-es vagy 400-as státusz kódot kap a kliens. Mindkét

esetben az alábbi hibaüzenetet kell megjeleníteni, a kapott RequiestId-val. [#92775] [vége]

A **Mégsem** gombra kattintva a kliens ellenőrzi, hogy történt-e bármilyen adatmódosítás a
képernyőn (csak új felvitel és szerkesztés módban), és ha igen, az alábbi üzenetet küldi:


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 19/23|


Ha a felhasználó az **Igen** opciót választja, a képernyő mentés nélkül bezárul, a **Nem** opció
esetén pedig a felhasználó folytathatja a munkát a **H08_01 – HUBA – Bejegyzés részletek**
képernyőn.

Amennyiben a képernyő bezárásra kerül, és a felhasználó szerkesztés módban nyitotta meg a
képernyőt, a kliens meghívja a **„K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)”** eljárást,
amihez bemenő paraméterként az **„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól
(WindowOpen eseménykor) visszakapot **„ACTIVITY_ID** ”-t küldi be. Ezzel zárja a

munkamenetet.

**Ablak bezárása**

A képernyő bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H08_01”

  - Esemény (’ACTIVITY’): WindowClose

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „Modify” vagy „View” a megnyitás

módjától függően

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - #93801 Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A WindowOpen
eseménykor kapott **ACTIVITY_ID.**


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 20/23|

### **2.2.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **













|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|H08 – HUBA – Bejegyzés részletek||||||||
|HUBA tárgya|HUBA tárgya|-|Szabad szöveges beviteli mező|200|-|-|BEJEGYZES|
|HUBA kezdete|HUBA kezdete|-|Dátum és időpont beviteli mező|12|ÉÉÉÉ/HH/NN ÓÓ:PP|-|BEJEGYZES|
|HUBA vége|HUBA vége|-|Dátum és időpont beviteli mező|12|ÉÉÉÉ/HH/NN ÓÓ:PP|-|BEJEGYZES|
|HUBA jellege|HUBA jellege|-|Szöveges beviteli mező kiválasztás funkcióval|-|-|-|BEJEGYZES|
|HUBA felelős|HUBA felelős|-|Szöveges beviteli mező kiválasztás funkcióval (chipses)|-|-|-|BEJEGYZES_FELELOS|
|Feladatkosárba tesz|Feladatkosárba tesz|-|Switch kapcsoló|-|-|-|BEJEGYZES_FELADAT KOSAR|
|Elvetés|Elvetés|-|Switch kapcsoló|-|-|-|BEJEGYZES|
|Elvetés indoka|Elvetés indoka|-|Szabad szöveges beviteli mező|1000|-|-|BEJEGYZES|
|#96127 Vasútvállalat|Vasútvállalat|-|Szöveges beviteli mező kiválasztás funkcióval (chipses)|-|-|-|BEJEGYZES_VASUTV ALLALAT|
|HUBA leírása||||||||
|HUBA leírása|Leírás megjelenítése|-|Megjelenítő mező scrollozási lehetőséggel||||BEJEGYZES_LEIRAS|
|-|Leírás szerkesztése (korábbi tartalom kivételével)|-|TinyMCE text editor kép beszúrási lehetőséggel|||||


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 21/23|


**Nyomógombok**





|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
|---|---|---|---|---|
|Ment és Bezár|Mentés és bezárás||nem nyomható meg||
|Mégse|Mégsem||megnyomható||


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 22/23|


**2.2.6.** **Hívott szolgáltatások**











|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés||S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés (konkurenskezeléssel)||K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)|
|Ablakbetöltés||S_08 - Lekérdezési paraméterek értékkészletének lekérdezése|
|Ablakbetöltés||S_50 – HUBA – Bejegyzés részletek adatainak betöltése (GET_HUBA_RESZLETEK)|
|#96127 Vasútvállalat chipses törlés||S_78 – Vasútvállalat törölhetőségének lekérdezése (HUBA.Get_Torolheto_VV)|
|Konkurenskezelés (lejárt munkamenet visszaszerzésekor)||K_15_03 – Életjel küldés ellenőrzés nélkül (SET_DATA_FORCE_LIFESIGN)|
|Mentés (konkurenskezeléssel)||K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)|
|Mentés||S_51 – HUBA – Bejegyzés részletek adatainak mentése (SET_HUBA_RESZLETEK)|
|Mentés (konkurenskezeléssel)||K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)|
|Mentés||S_27 – Felhasználói aktivitás naplózása|
|Mégsem (konkurenskezeléssel)||K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)|
|Ablak bezárása||S_27 – Felhasználói aktivitás naplózása|
|Bejegyzés automatikus lezárása||K_16_01 – Bejegyzés automatikus lezárása (bejegyzesAutoClose)|


**2.2.7.** **Rendszerüzenetek**

Nincs. vagy








|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|ha a munkamenet megszakadt, de még a lezárási időn belül van.|Aktuális munkamenet lejárt. Kívánja folytatni?|Eldöntendő (I/N)|
|ha a munkamenet megszakadt, és le is záródott.|Aktuális munkamenete lezárult, nem folytatható. Kattintson az OK-ra a képernyő bezárásához.|Figyelmeztető|
|ha a munkamanet kezelésekor hiba történt|Hiba történt, aktuális munkamenete nem található. Kattintson az OK-ra a képernyő bezárásához.|Figyelmeztető|


-----

|GVK_UC_H08 – HUBA bejegyzés részletek|Col2|Azonosító: RRT_GVK_UC_H08|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 23/23|


|Mégsem gomb megnyomásakor, ha a képernyőn történt módosítás|Biztosan elveti a módosításait?|Eldöntendő (I/N)|
|---|---|---|
|#96127 Vasútvállalat chipses <törlés> nyomógomb|„A kiválasztott vasútvállalat nem törölhető, mert már rögzített kifogást a bejegyzéshez!”|Figyelmeztetés|
|#92775 Az új rekord mentése sikertelen|A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX|Hibaüzenet|


**2.2.8.** **Kódtáblák, választási listák**

Nincs.

**2.2.9.** **Rendszerparaméterek**

Nincs. vagy





Helye: /src/BackEnd/GvkBackend/WebApi/appsettings.json

|Rendszerparaméter neve|Rendszerparaméter jelentése|Default érték|Beállított érték|
|---|---|---|---|
|||||
|||||
|||||


-----



09.md :::
|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 1/25|

# – GVK_UC_H09  HUB A Kifogáskezelés RÉSZLETES RENDSZERTERV
## 2024. november 28.
### V1.0


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 2/25|

#### **Dokumentum történet **

Kidolgozó változtatások követése

|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|7.0|2024.12.03.|#96127 - HUBA - H09 - Kifogáskezelés|Kovács Eszter|Folyamatban|
||||||
||||||



MÁV SZK Ellenőrzések követése

|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2024.11.28|MÁV Véglegesítésre átadható|Kovács Eszter||
||||||
||||||
||||||



MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
||||||
||||||
||||||
||||||


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 3/25|

#### **1. Általános ismertetés **

**1.1.** **A használati eset modulkapcsolatai**

**Szolgáltatások leírásának elérhetősége:**

[GVK_webalkalmazás_szolgáltatások.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1301)

**1.2.** **A használati eset célja, feladatai**

A használati eset alapvető célja, hogy a Bejegyzéshez a Vasútvállalat kifogást rögzíthessen,
amelyre a MÁV reagál. (elutasít / elfogad)


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 4/25|

#### **2. A használati eset ablakai ** **2.1. Ablakok közötti kapcsolat, navigálás **


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 5/25|

#### **2.2. UC_H09_01 -HUBA – Kifogások kezelése **

**2.2.1.** **Ablak feladatai**

A „ **H09_01** - **HUBA – Kifogások kezelése** ” ablakon keresztül tudják adott Bejegyzés vonatkozásában a H08_01-as ablakon kiválasztott
Vasútvállalatok kifogást elindítani a MÁV Zrt irányába. Illetve, ezen a felületen jelez vissza a MÁV Zrt is adott kifogás tekintetében a

döntésről. (elutasítja, vagy elfogadja adott kifogást)

**2.2.2.** **Ablak megjelenése**

A „ **H09_01**   - **HUBA – Kifogások kezelése** ” ablak új navigációs sávon nyílik meg, és négy féle módban nyitható meg:

     - Új kifogás rögzítése - operandus : **OP_H09_01_KifogasSzerkeszt**

Ilyenkor nincs konkurenskezelés.

Üres mezőkből feltöltésével:


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 6/25|



- meglévő szerkesztése - operandus: **OP_H09_01_KifogasSzerkeszt**

Meglévő mezők szerkesztése, konkurenskezelés aktív.

VV-s felhasználó, csak a saját Vasútvállalatához tartozó Kifogást szerkesztheti, és láthatja!


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 7/25|



- Megtekintés – operandus: **OP_H09_01_** **KifogasMegtekint**

VV-s felhasználó, csak a saját Vasútvállalatához tartozó Kifogást szerkesztheti, és láthatja! A Kifogások listában se láthassa

másét!


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 8/25|



- Bíráló – operandus: **OP_H09_01_KifogasBiralo**

Konkurenskezelés aktív.


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 9/25|


Amennyiben a Kifogás állapota ’Kifogásolt’, abban az esetben adott Kifogás sora a Kifogás listadobozban legyen eltérő színű háttere.
(EBEB87, 100%-os színátmenettel, alfa)

**2.2.3.** **Ablak működése**

A „ **H09_01 - HUBA – Kifogások kezelése** ” ablak az „ **H02_01 - HUBA – Bejegyzés kezelés** ” ablakról nyitható meg, a „ *Kifogások*

*szerkesztése* ” vagy „ *Kifogások megtekintése* ” nyomógomb kezelését követően nyílik meg.

A rendszer az „ **H09_01 - HUBA – Kifogások kezelése** ” ablakot egy bejegyzés vonatkozásában maximum egyszer nyitja meg új navigációs

Az **OP_H09_01_KifogasSzerkeszt** vagy **OP_H09_01_KifogasBiralo** operandus megléte esetén a felhasználó szerkesztésre megnyithatja

a „ **H09_01** **- HUBA – Kifogások kezelés** ” képernyőt. Ezt már a **„H02_01**  - **HUBA - Bejegyzés kezelése”** ablakon ellenőrzi a rendszer, és

csak akkor nyomható meg a <Kifogások szerkesztés> ikon, ha a fenti operandus engedélyezett a felhasználónak.

Az **OP_H09_01_** **KifogasMegtekint** operandus esetén csak megtekintésre nyithatja meg a képernyőt. Ezt szintén már a **„H02_0** **1**  - **HUBA**

**- Bejegyzés kezelése”** ablakon ellenőrzi a rendszer, és csak akkor nyomható meg a megtekintés ikon, ha a fenti operandus
engedélyezett a felhasználónak. Megtekintés módban a felhasználó semmilyen mezőt nem szerkeszthet.

Amennyiben nem MÁV-os Vasútvállalattal rendelkezik a felhasználó, úgy csak a saját vasútvállalatához tartozó Kifogásokat
láthassa/kezelhesse. (MÁV-os vállalattal az összesset)

Az „ **A01 - GVK - Térkép** ”, „ **H01_01 – HUBA - Bejegyzések** ” vagy „ **H02_01 – HUBA – Bejegyzés kezelése** ” ablak bezárása esetén
automatikusan bezáródik a „ **H09_01** **- HUBA – Kifogások kezelése** ” ablak is.

**2.2.3.1.** **Az ablak felépítése**

     - Az ablak kitölti a teljes képernyőt.

     - Fejléc

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet használatakor a fejléc háttérszíne középszürke
(7F7F7F).

#82283 Üzemi (PROD)


**Commented [EK1]:** Konkurens kezelés a H09_01-en belül lesz
Kifogásonként értelmezhető!


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 10/25|


Képernyőfotó a megvalósítás után.

#82283 Felhasználói teszt (QA)

Képernyőfotó a megvalósítás után.

#82283 Belső teszt (TEST)

Képernyőfotó a megvalósítás után.

#82283 Fejlesztői (DEV)

Képernyőfotó a megvalósítás után.

`o` Középen az ablak azonosítóját és megnevezését: „ **H09_01** **- HUBA – Kifogások kezelése** ”

`o` Jobb szélen:

       - Rendszer neve és logója, valamint a rendszer neve alatt a frontend verziószáma jelenik meg.

       - A logó előtt a GVK környezet neve:

          - üzemi (PROD): Nem jelenik meg a kliensen.

          - #66395 felhasználói teszt (QA): „ **QA** ”

          - teszt (TEST): „ **TEST** ”

          - fejlesztői (DEV): „ **DEV** ”

       - #82283 GVK profil név:
A GVK-ba történt bejelentkezéskor érvényes GVK profil név megjelenítésére szolgál. [#82283 vége ]

    - Fejléc alatt az alábbi adat jelenik meg:

`o` HUBA Azonosító ( BEJEGYZES.HUBA_AZONOSITO)

  - *Bejegyzés azonosító:* A fejléc alatt jelenik meg a bejegyzés HUBA azonosítója, háttérszíne megegyezik a „ **H02_01 – HUBA –**

**Bejegyzés kezelése** ” ablakban az Kifogások feliratának háttérszínével.

**2.2.3.2.** **Ablak betöltés**

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő
paraméterekkel:

    - Ablakazonosító (’WINDOW_ID’): „H09_01”

    - Esemény (’ACTIVITY’): „WindowOpen”

    - ADfelhasználó(’ADUSER’):bejelentkezettfelhasználóADazonosítója


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 11/25|



    - Bejegyzés sub azonosító (’SUB_ID’):

    - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

Az ablak megnyitásakor a kiválasztott bejegyzés kifogásait tartalmazó listadoboz, valamint az kifogások kezelésére szolgáló < **Új** nyomógomb jelenik meg az alábbi módon.

A kliens ezután meghívja az **„S_75 – Bejegyzés kifogások lista lekérdezése (HUBA.Get_Kifogások_Lista)”** eljárást a Bejegyzés
egyedi azonosítóját átadva bemenő paraméterként. A kliens a szolgáltatástól visszakapott adatokkal feltölti a Kifogások listadobozt

  - ’Minősített’: Új kifogás rögzíthető, azaz az < **Új**  - nyomógomb kezelhető. (Allapot_id=’2’)

  - A többi állapotban nem rögzíthető új kifogás, azaz az < **Új**  - nyomógomb nem kezelhető.

Ezután a kliens minden kereső paraméterre vonatkozóan meghívja az „ **S_08 - Lekérdezési paraméterek értékkészletének**
**lekérdezése** ” szolgáltatást, bemenő paraméterként átadva neki az adatelem azonosítóját (AutosuggestId).

Az S_08 hívások és az átadott értékek:

  - #99460 Kifogás állapot (’KifogasAllapot’)

A kliens az „ **S_08 - Lekérdezési paraméterek értékkészletének lekérdezése** ” szolgáltatás hívások során visszakapott listaszerű
adatokkal feltölti az autocomplete (kiválasztási) funkcióval rendelkező szöveges beviteli mezők értékkészletét. A listákban az S_08
szolgáltatás által visszaadott ’text’ paraméter értékei jelennek meg.

Amennyiben nem MÁV-os Vasútvállalattal rendelkezik a felhasználó, úgy csak a saját vasútvállalatához tartozó Kifogásokat
láthassa/kezelhesse. (MÁV-os vállalattal az összesset)


**Commented [EK2]:** bejegyzesAllapotId vagy

bejegyzesAllapotNev nézel, beszéljük meg


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 12/25|


Az S_75 szolgáltatástól visszakapott adatok az alábbiak szerint jelennek meg a Kifogások listadobozban:

     - Kifogás egyedi azonosítója(’kifogasId’): A kliensen nem jelenik meg.

     - Kifogás sorszám (’sorszam’): A kliensen a listadoboz ’Ssz.’ mezőjében jelenik meg.

     - Kifogás vasútvállalata (’vasutVallalat’): A kliensen a listadoboz ’Vasútvállalat’ mezőjében jelenik meg.

     - Kifogás állapot (’kifogAllapot’): A kliensen a listadoboz ’Kifogás állapot’ mezőjében jelenik meg.

A listadobozban egy kifogás sorának kijelölésekor a kliens meghívja az „ **S_76 – Bejegyzés kifogás adatainak**
**lekérdezése** ” szolgáltatást bemenő paraméterként átadva az kifogás egyedi azonosítóját (’kifogasId’). Az kifogás
kijelölésekor aktiválódik az kifogás adatait tartalmazó jobb oldali blokk, feltöltődnek a mezők a szolgáltatástól
visszakapott adatokkal. Attól függ, hogy **OP_H09_01_KifogasSzerkeszt** vagy **OP_H09_01_KifogasBiralo** operandussal
rendelkezik-e a felhasználó, attól függ, hogy mely mezők az aktívak, módosíthatóak, szerkeszthetőek. Konkurenskezelés

aktív.

**2233** **Konkurenskezelés**


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 13/25|


elindítja a Konkurenskezelés életjelküldés funkcióját, a **„K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)”** függvény
20mp-ént (rendszerparaméterben meghatározott) történő meghívásával.
Az életjel küldés funkció minden esetben ellenőrizni fogja a munkamenet érvényességét, és eszerint választ küld a

kliensnek az alábbiak szerint:

- „OK” – a függvény frissítette a munkamenetet, a szerkesztés folytatható

- „CEASED_ACTIVITY” – valamilyen esemény folytán a munkamenet megszakadt, de a munkamenet még nem került a

háttérben lezárásra. Ilyenkor a felhasználó dönthet, hogy folytatja-e a munkát. Ez az eset akkor fordulhat elő, ha az
életjel küldés legutóbb 1 percnél korábban futott le, de még nem érte el a 10 percet (rendszerparaméterben
meghatározott időzítések).

A kliens az alábbi üzenetet jeleníti meg:

`o` amennyiben a felhasználó ilyenkor azt választja, hogy folytatja a munkamenetet (Igen-re kattint), ezt

megteheti, és a rendszer úgy kezeli, mintha a munkamenet folyamatos lett volna. Ebben az esetben a
kliens meghívja a **„K_15_03 – Életjel küldés ellenőrzés nélkül (SET_DATA_FORCE_LIFESIGN)”** eljárást
az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól WindowOpen eseménykor visszakapot
„ **ACTIVITY_ID** ”-val, amely ellenőrzés nélkül végrehajtja az életjel küldés funkciót, így a továbbiakban
folytatható a munkamenet a normál kerékvágásban.

`o` a felhasználó dönthet úgy is, hogy a munkamenetet lezárja (Nem-re kattint), ami egy <Mégsem> gomb

megnyomásával egyenértékű, azaz a kliens mentés nélkül bezárja a képernyőt. Ebben az esetben a
<Mégsem> gomb megnyomása esetén leírt folyamatok hajtódnak végre.

- „CLOSED_ACTIVITY” – valamilyen esemény folytán a munkamenet megszakadt, és a munkamenet a háttérben már

lezárásra került, a szerkesztés NEM folytatható. Ebben az esetben a kliensnek mentés nélkül be kell zárnia a
képernyőt. Ilyen akkor fordulhat elő, ha hosszabb kihagyás (rendszerparaméterben meghatározandó –
alapértelmezetten 10 perc) után küldött a kliens újra életjelet.

A kliens az alábbi üzenetet jeleníti meg:

Az <OK> gombra kattintás után a <Mégsem> gomb megnyomása esetén leírt folyamatok hajtódnak végre.

- ERROR:MISSINGACTIVITY” valamilyenhibafolytánamunkamenetnemtalálhatóakkorazeljáráseztazüzenetet


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 14/25|


Az <OK> gombra kattintás után a <Mégsem> gomb megnyomása esetén leírt folyamatok hajtódnak végre.

**2.2.3.4.** **Az ablak működési leírása**

A képernyő három különböző módban nyitható meg:


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 15/25|



  - Szerkesztés – meglévő kifogás adatainak szerkesztése - **OP_H09_01_KifogasSzerkeszt** vagy **OP_H09_01_KifogasBiralo**

A meglévő Bejegyzés kifogásának szerkesztése esetén betöltéskor feltöltődnek a mezők a korábban mentett
tartalommal, illetve a konkurenskezelés is aktív.

  - Megtekintés

„ **H02_01**        - **HUBA - Bejegyzés kezelése** ” ablakról indíthatja a „ *Kifogások megtekintése* ” nyomógombról. Megtekintés
esetén betöltéskor feltöltődnek a mezők a korábban mentett tartalommal, minden mező inaktív, és nincs

konkurenskezelés sem.

**2.2.3.5.** **Az ablak felépítése**
### Az ablak megnyitásakor alapértelmezetten a kliens meghívja az „ S_75 – Bejegyzés kifogások lista lekérdezése

**(HUBA.Get_Kifogások_Lista)”** szolgáltatást, amelynek bemenő paraméterként a bejegyzés azonosítóját adja át. A kliens a

szolgáltatástól visszakapott adatokat megjeleníti.

Amennyiben nem MÁV-os Vasútvállalattal rendelkezik a felhasználó, úgy csak a saját vasútvállalatához tartozó Kifogásokat
láthassa/kezelhesse. (MÁV-os vállalattal az összesset)

**1.** **Kifogások listája és kezelése**

     - *Listadoboz*

A lapfülön a bal oldali blokk tetején jelenik meg a bejegyzés kifogásait tartalmazó listadoboz.

`o` Címe: Kifogások

`o` Fejléce:

`o` Tartalma:


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 16/25|



            - Vasútvállalat: Mely vasútvállalathoz tartozik adott Kifogás

            - Kifogás állapota: Kifogás állapota

`o` Azonosító még nem áll rendelkezésre:

Minden VV-s felhasználó csak a saját vasútvállalat által rögzített kifogást láthatja! (MÁV-os mindent
láthat!)

  - *Nyomógombok*

A lapfülön a bal oldali blokk alján a listadoboz alatt jelenik meg a bejegyzés egy kifogásának kezelésére szolgáló
nyomógombok.

`o` Új nyomógomb: Célja új kifogás rögzítése üres mezők feltöltésével. Az < **Új**    - nyomógomb
alapértelmezetten kezelhető (aktív), ha a bejegyzés, amihez a kifogást rögzítik ’Minősített’ állapotú de még

azonosítójú felhasználó rendelkezik az **OP_H09_01_KifogasSzerkeszt** operandussal.

Ha a bejegyzés nem ’Minősített’ vagy nem ’Befejezett’, és a Kifogások listadobozban ki van jelölve értesítés
vagy a GVK profil azonosítójú felhasználó nem rendelkezik az operandussal, a nyomógomb disabled állapotú,
nem megnyomható.

Amennyiben VV-s felhasználó jelentkezett be, akkor csak a fenti feltételeken felül akkor legyen aktív a
nyomógomb, ha még adott VV nem rögzített Kifogástadott bejegyzéshez. (azaz adott VV-hez nem tartozik
Kifogás a Bejegyzéshez tarozó Kifogás listában )

Az (Új) nyomógomb kezelésekor a listadobozban megjelenik új sorban az ’Új kifogás’ felirat,
az új listaelem kijelölődik és ezzel párhuzamosan aktiválódik az kifogás adatait tartalmazó jobb oldali blokk,
pár mezője üressen. A jobb oldali blokkban a leírt szabályok szerint az alábbi mezők aktívak (Indoklás szövege,
végleges), nincs konkurenskezelés.

**2.** **Egy kifogás kezelése**


**Commented [EK3]:** azaz minősített állapotú, vagy befejezett


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 17/25|



- *Beviteli mezők:*

Kifogást rögzítő felhasználó

Az ablakon a jobb oldali blokk bal oldalán elsőként megjelenő beviteli mező, amelyben a rögzítést végző felhasználó
neve szerepel, a rendszer tölti fel automaikusan azzal a felhasználó adatával, aki az <új> nyomógombra kattintott,
és létrehozza a kifogást. Értéke nem módosítható egyik felhasználó által sem.

Késés főkód


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 18/25|


Indoklás szövege

Az ablakon a jobb oldali blokk bal oldalán a ’Késés főkód’ mező alatt megjelenő többsoros szöveges beviteli mező
a kifogás indokálásának szövegének beviteléhez.

Végleges

Az ablakon a jobb oldali blokk bal oldalán az indoklás szövege alatt megjelenő checkbox, mely alapértelmezetten
kikapcsolt állapotú. Ha bekapcsolt állapotba kerül, akkor a Kifogás állaota Kifogásolt állapotú lesz.

Kifogást elbíráló felhasználó

Az ablakon a jobb oldali blokk jobb oldalán elsőként megjelenő beviteli mező, amelyben a kifogást elbíráló
felhasználó neve szerepel, a rendszer tölti fel automatikusan azzal a felhasználó adatával, aki a kifogás állapotát
állítja elfogadva vagy elutasítva állapotra. Értéke nem módosítható egyik felhasználó által sem.

Válaszadás határideje

Az ablakon a jobb oldali blokk jobb oldalán másodikként megjelenő dátum beviteli mező, amelyben a Kifogáshoz
tartozó MÁV döntésénak válaszadás határideje szerepel. Értéke nem módosítható egyik felhasználó által sem, a
rendszer tölti fel: Végleges chekbox beipálásának dátuma + rendszerparaméterben megadott idő

Kifogás állapota

Az ablakon a jobb oldali blokk jobb oldalán harmadikként megjelenő lenyíló listás beviteli mező kiválasztás
funkcióval. Alapértelmezett értéke a ’Kifogásolható’. ’Kifogásolt’ értéket akkor kapja, ha a ’Végleges’ checkbox


**Commented [EK4]:** Kezdetben legyen a rendszerparaméter
48óra.


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 19/25|


Vizsgálat szövege

Az ablakon a jobb oldali blokk jobb oldalán a ’Kifogás állapota’ mező alatt megjelenő többsoros szöveges beviteli
mező a vizsgálat szövegének beviteléhez. Amennyiben a Kifogás állapot ’Elutasítva’ akkor kötelező írni bele.

Az egyes mezőket ki szerkesztheti, azt az alábbi táblázat tartalmazza: (X jelöli azt, hogy szerkesztheti)


**Commented [EK5]:** 2025.02.06-án beleírva. GVK-ban ismert és
alkalmazott módszerrel.













|Col1|Kifogást rögzítő felhasználó|Késés főkód|Indoklás szövege|Végleges|Kifogást elbíráló felhasználó|Válaszadás határideje|Kifogás állapota|Vizsgálat szövege|
|---|---|---|---|---|---|---|---|---|
|OP_H09_01_KifogasSzerkeszt|-|-|X|X|-|-|-|-|
|OP_H09_01_KifogasBiralo|-|-|-|-|-|-|X (’Elfogadott’ vagy ’Elutasított’ értéket állíthatja csak be)|X|
|OP_H09_01_ KifogasMegtekint|-|-|-|-|-|-|-|-|



   - *Nyomógombok:*

**Mentés**



A **Mentés** gombra kattintva csak azon GVK profil azonosítójú felhasználó számára

elérhető, akihez az **OP_H09_01_KifogasSzerkeszt** vagy **OP_H09_01_KifogasBiralo** operandus hozzá van

rendelve.

Azablakmeghívjaaz **„S77–Bejegyzéskifogásadatainakmentése”** eljárást,visszakapottSQLkódalapján


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 20/25|


`o` A képernyőn az alábbi folyamatok futnak le a lenti sorrendben:

`o` Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, a kliens az **„S_27 – Felhasználói**

**aktivitás naplózása** ” szolgáltatástól (WindowOpen eseménykor) visszakapot **„ACTIVITY_ID** ”-val,
soron kívül elindítja a Konkurenskezelés életjelküldés funkcióját, a **„K_15_02 – Életjel küldés**
**(SET_DATA_LIFESIGN)”** függvény meghívásával.

`o` Amennyiben a felhasználó módosításra nyitotta meg a képernyőt, a kliens lezárja a

munkamenetet a **„K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)”** eljárás meghívásával,
amihez bemenő paraméterként az **„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól
(WindowOpen eseménykor) visszakapot **„ACTIVITY_ID** ”-t küldi be.

`o` A mentést követően a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást

az alábbi bemenő paraméterekkel:

         - Ablakazonosító (’WINDOW_ID’): „H09_01”

         - Esemény (’ACTIVITY’): „Create” vagy „Modify”

         - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

         - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

         - Esemény kiegészítő információk (’ACTIVITY_EXT’): JSON formában a mentés részletei

         - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

         - Bejegyzés sub azonosító (’SUB_ID’): HUBA Kifogás egyedi azonosítója (kifogás_id)

         - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A WindowOpen

eseménykor kapott **ACTIVITY_ID.**

  - Ha a mentés nem sikeres 599-es vagy 400-as státusz kódot kap a kliens. Mindkét esetben az alábbi

hibaüzenetet kell megjeleníteni, a kapott RequiestId-val. [#92775] [vége]


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 21/25|


**Mégsem**

A **Mégsem** gombra kattintva a kliens ellenőrzi, hogy történt-e bármilyen
adatmódosítás a képernyőn (csak új felvitel és szerkesztés módban), és ha igen, az alábbi üzenetet küldi:

Ha a felhasználó az **Igen** opciót választja, a képernyő mentés nélkül bezárul, a **Nem** opció esetén pedig a
felhasználó folytathatja a munkát a „ **H09_01** **- HUBA – Kifogások kezelése** ” ablakon.

Amennyiben a képernyő bezárásra kerül, és a felhasználó szerkesztés módban nyitotta meg a képernyőt, a
kliens meghívja a **„K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)”** eljárást, amihez bemenő
paraméterként az **„S_27 – Felhasználói aktivitás naplózása** ” szolgáltatástól (WindowOpen eseménykor)
visszakapot **„ACTIVITY_ID** ”-t küldi be. Ezzel zárja a munkamenetet.

A képernyő bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ” szolgáltatást az alábbi bemenő
paraméterekkel:

**2.2.4.** **Az ablak szerkezeti leírása**

**Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb**

**Felirat** **Megnevezés** **Súgó(Tooltip)** **Kontroltípusa** **Hossz** **Maszk** **Alapértelmezett** **Törzstábla/kódtábla**


**Commented [EK6]:** 2025.04.08-án egészítettem ki.


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 22/25|



















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
||GVK profil megnevezés|GVK felhasználó||||||
||HUBA azonosító|-||||||
|Kifogások||||||||
|Kifogások|Kifogások|-|label|||||
|Azonosító|Azonosító|-|Listbox|||||
|Szint|Szint|-||||||
|Állapot|Állapot|-||||||
|||||||||
|Kifogás adatai||||||||
|Kifogást rögzítő felhasználó|Kifogást rögzítő felhasználó|-|||||BEJEGYZES_KIFOGAS|
|Késés főkód|Késés főkód|-|||||BEJEGYZES|
|Indoklás szövege|Indoklás szövege|-|Szöveges beviteli mező||||BEJEGYZES_KIFOGAS|
|Végleges|Végleges|-|chekbox||||BEJEGYZES_KIFOGAS|
|Kifogást elbíráló felhasználó|Kifogást elbíráló felhasználó|-|||||BEJEGYZES_KIFOGAS|
|Válaszadás határideje|Válaszadás határideje|-|Dátum beviteli mező|8|ÉÉÉÉ/HH/NN||BEJEGYZES_KIFOGAS|
|Kifogás állapota|Kifogás állapota|-|Szöveges beviteli mező kiválasztás funkcióval||||BEJEGYZES_KIFOGAS|
|Vizsgálat szövege|Vizsgálat szövege|-|Szöveges beviteli mező||||BEJEGYZES_KIFOGAS|


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 23/25|





|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
||Új|-|megnyomható|plus|
||Mentés|-|megnyomható|plus|
||Mégsem|-|megnyomható|close|


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 24/25|


**2.2.6.** **Hívott szolgáltatások**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés||S_27 – Felhasználói aktivitás naplózása|
|Ablakbetöltés (konkurenskezeléssel)||K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)|
|Ablakbetöltés||S_08 - Lekérdezési paraméterek értékkészletének lekérdezése|
|Ablakbetöltés||S_75 - Bejegyzés kifogások lista lekérdezése (HUBA.Get_Kifogások_Lista)|
|Ablakbetöltés, Új nyomógomb||S_50 – Bejegyzés részletek adatainak betöltése (HUBA.HUBA_PKG.Get_Huba_Reszletek)|
|Kifogások listában egy kifogás kijelölése||S_76 – Bejegyzés kifogás adatainak lekérdezése (HUBA.Get_Kifogas_Adat)|
|Konkurenskezelés (lejárt munkamenet visszaszerzésekor)||K_15_03 – Életjel küldés ellenőrzés nélkül (SET_DATA_FORCE_LIFESIGN)|
|Mentés (konkurenskezeléssel)||K_15_02 – Életjel küldés (SET_DATA_LIFESIGN)|
|Mentés||S_77 – Bejegyzés kifogás adatainak mentése (HUBA.Set_Kifogas_Adat)|
|Mentés (konkurenskezeléssel)||K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)|
|Mentés||S_27 – Felhasználói aktivitás naplózása|
|Mégsem (konkurenskezeléssel)||K_15_04 – Munkamenet lezárás (SET_DATA_CLOSE)|
|Ablak bezárása||S_27 – Felhasználói aktivitás naplózása|


**2.2.7.** **Rendszerüzenetek**

Nincs. vagy










|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
|Ha a munkamenet megszakadt, de még a lezárási időn belül van.|Aktuális munkamenet lejárt. Kívánja folytatni?|Eldöntendő (I/N)|
|Ha a munkamenet megszakadt, és le is záródott.|Aktuális munkamenete lezárult, nem folytatható. Kattintson az OK-ra a képernyő bezárásához.|Figyelmeztető|
|Ha a munkamanet kezelésekor hiba történt|Hiba történt, aktuális munkamenete nem található. Kattintson az OK-ra a képernyő bezárásához.|Figyelmeztető|
|Mégsem gomb megnyomásakor, ha a képernyőn történt módosítás|Biztosan elveti a módosításait?|Eldöntendő (I/N)|
|Az új rekord mentése sikertelen|A mentés során hiba történt. Kérem próbálja újra később. RequiestId: XXX|Hibaüzenet|


-----

|GVK_UC_H09|Col2|Azonosító: RRT_GVK|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 25/25|


**2.2.8.** **Kódtáblák, választási listák**

Nincs.

**2.2.9.** **Rendszerparaméterek**

Nincs. vagy

Helye: /src/BackEnd/GvkBackend/WebApi/appsettings.json

|Rendszerparaméter neve|Rendszerparaméter jelentése|Default érték|Beállított érték|
|---|---|---|---|
|||||
|||||
|||||


-----



