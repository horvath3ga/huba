|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 1/43|

# – GVK_UC_H02  HUBA bejegyzés kezelése RÉSZLETES RENDSZERTERV
## 2025 . februá r május 30 12.
### V1.0


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 2/43|

#### **Dokumentum történet **

Kidolgozó változtatások követése










|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|Col6|Col7|
|---|---|---|---|---|---|---|
||||Név|Állapot|||
|7.0|2024.05.23|Létrehozás|Vörös Gábor|Elkészült|||
|7.0|2024.05.23|#88903 - HUBA - UC_H02_01 HUBA bejegyzés keret|Vörös Gábor|Elkészült|||
|7.0|2024.06.13|#88906 - H02_04 - HUBA - Bejegyzés részletek csempe|Vörös Gábor|Elkészült|||
|7.0|2024.07.01|#88905 - H02-03 - HUBA - Belső megjegyzések|Vörös Gábor|Elkészült|||
|7.0|2024.07.02|#88904 - H02_02 - HUBA - Bejegyzés történet csempe|Vörös Gábor|Elkészült|||
|7.0|2024.08.21|#88908 - H02_06 - HUBA - Kód és hely csempe|Vörös Gábor|Elkészült|||
|7.0|2024.08.23|#88912 - H02_08 - HUBA - Bejelentő csempe|Vörös Gábor|Elkészült|||
|7.0|2024.09.12|#93801 - GVK - HUBA - Pre_activity_ID töltése|Vörös Gábor|ElkészültEllenőriz hető|||
|7.0|2024.09.18|#89383 GVK - HUBA betűkód kivezetése|Berkesi Ádám|ElkészültEllenőriz hető|||
|7.0|2024.09.29|#94153 - HUBA - Verziókezelés megvalósítása|Vörös Gábor|Elkészült|||
|7.0|2024.09.30|#94430 - H02_01 - Üres csempe esetén hibás megjelenés|Vörös Gábor|Ellenőrizhető|||
|7.1|2024.11.28|#96127 - HUBA – H09_Kifogáskezelés|Kovács Eszter|Folyamatban|||
|7.2|2025.01.24|#98733 - HUBA - H02_01 - HUBA történet kiegészítése az értesítés üzeneteivel|Vörös Gábor|Ellenőrizhető|||
|7.2|2025.02.12|99446: H02_03 túl hosszú név esetén levágás, és „…”|Berkesi Ádám|Ellenőrizhető Fo|Fo|rmatted Table|
||||||||
|7.2|2025.02.20|#99938 - HUBA - H02_01 UI javítás (háttérszín)|Vörös Gábor|Ellenőrizhető|||


MÁV SZK Ellenőrzések követése




|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0||Ellenőrzés|||
||||||
||||||
||||||


MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
|||MÁV igényeknek megfelel|Herczog Ákos||
||||||
||||||
||||||


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 3/43|

#### **1. Általános ismertetés **
##### **1.1. A használati eset modulkapcsolatai **

**Szolgáltatások leírásának elérhetősége:**

[GVK_webalkalmazás_szolgáltatások.docx](https://ituzletag.mav-szk.hu/projekt/gvk/_layouts/15/DocIdRedir.aspx?ID=U26HEUY2JR42-2121121297-1301)

(EA kommunikációs ábra)


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 4/43|

##### **1.2. A használati eset célja, feladatai **

Az alkalmazás alapvető célja xxx.

Feladata, hogy lehetőséget biztosítson

    - xxx


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 5/43|

#### **2. A használati eset ablakai **
##### **2.1. Ablakok közötti kapcsolat, navigálás **

(EA ablakátmenet)


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 6/43|

##### **2.2. H02 - HUBA – Bejegyzés kezelése **

**2.2.1.** **Ablak/lap feladatai**

A képernyő fő feladata az adott HUBA bejegyzés összes fontos adatának megjelenítése egy oldalon, illetve az
összes lehetséges beállítási lehetőség elérhetőségének biztosítása.

  - Nem feltétel a 100%-os információ megjelenítés, de az összes fontosabb adat jelen lesz a dashboardon.

  - Mentés gomb a dashboardon nem szükséges, mivel itt nem lehet adatokat módosítani, azokat a további
képernyők menedzselik, és mentik az adatbázisba.

  - A kötelező mezők megjelennek majd a képernyőn piros színnel kiemelve, amíg nem tartalmaznak

adatot.

  - Megjeleníti az adott HUBA bejegyzéssel kapcsolatos összes log bejegyzést

  - Belső megjegyzés funkció megvalósítása is ezen a képernyőn történikBelső megjegyzések:

**2.2.2.** **Ablak/lap megjelenése**

#96127

**2.2.3.** **Ablak/lap működése**

**Az ablak felépítése**

  - Az ablak kitölti a teljes képernyőt.

  - Fejléc

Fejlesztői (DEV), Belső teszt (TEST) és Felhasználói teszt (QA) környezet használatakor
a fejléc háttérszíne középszürke (7F7F7F).

Üzemi (PROD)


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 7/43|


Felhasználói teszt (QA)

Képernyőfotó a megvalósítás után.

Belső teszt (TEST)

Képernyőfotó a megvalósítás után.

Fejlesztői (DEV)

Képernyőfotó a megvalósítás után.

`o` Középen az ablak azonosítóját és megnevezését: „ **H02 – HUBA –**

**Bejegyzés kezelése** ”

`o` Jobb szélen:

            - Rendszer neve és logója, valamint a rendszer neve alatt a

frontend verziószáma jelenik meg.

            - A logó előtt a GVK környezet neve:

               - üzemi (PROD): Nem jelenik meg a kliensen.

               - felhasználói teszt (QA): „ **QA** ”

               - teszt (TEST): „ **TEST** ”

               - fejlesztői (DEV): „ **DEV** ”

            - GVK profil név:
A GVK-ba történt bejelentkezéskor érvényes GVK profil név
megjelenítésére szolgál.

  - Fejléc alatt az alábbi adat jelenik meg:

`o` HUBA Azonosító (képzése a létrehozás dátuma, illetve „ ~~/~~ -” jellel

elválasztva a HUBA ~~verziószá~~ ~~m~~ ~~s~~ orszám (ami egy napon belül ~~ül~~ i
sorszám))

A dashboard megnyitásához az **OP_H02_01_BK – HUBA bejegyzés kezelése** operandus
megléte szükséges.

A tartalmi rész (dashboard) ún. csempékből áll, melyek minden esetben egy-egy témakört
(képernyőt) dolgoznak fel. A működési leírásban ennek megfelelően csempénként lesz

részletezve a működés.


**Formatted:** Strikethrough

**Formatted:** Centred


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 8/43|


A dashboard megjelenésénél figyelembe kell venni a HUBA bejegyzés állapotát az alábbiak

szerint:

Szerkesztő és megtekintési nézetek i s el érhetők az aktuális operandusok által
meghatározott módon, és a csempé k h á ttérs zí n e RGB: #E1F0FF

~~•~~ #99938 ~~M~~ inősített és ~~B~~, ~~Be~~ fejezett állapotban ~~állapotban~~

  
Szerkesztő és megtekintési néze tek i s el érh etők az aktuális operandusok által
meghatározott módon, és a csempé k h á ttérs zí n e az állapot színkódjára változik.

#99938 ~~Minden~~ ~~funkció~~ ~~elérhető~~

  - Elvetett, és Lezárt állapotban

Csak a megtekintési nézetek érhetők el, és a csempék háttérszíne ~~halványpirosra~~
~~(RGB:~~ ~~#FFD7E1~~ ~~)a~~ z állapot színkódjára változik. Az alábbi képernyőkép demonstrálja ~~ezt~~
~~az~~ ~~a~~ lezárt állapotot:

#96127

A dashboard figyeli a verziószám változást, és jelzi a felhasználónak, ha módosítás történt az
adatokban. Jelen elvárás szerint a HUBA bejegyzés verziószám kezelése kerül megoldásra, és
HUBA bejegyzés szinten vizsgálja a verzió változását.


**Formatted:** Superscript

**Formatted:** Indent: Left: 1,27 cm, No bullets or numbering

**Formatted:** Indent: Left: 1,27 cm, No bullets or numbering

**Formatted:** Indent: Left: 0,63 cm, Bulleted + Level: 1 +
Aligned at: 1,85 cm + Indent at: 2,48 cm


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 9/43|


Amennyiben az előző frissítéshez képest változik a HUBA bejegyzés verziószáma, azt az alábbi
vizuális jelzéssel jelzi a felhasználónak:

A verziószámot is megjelenítő sáv háttérszíne pirosra (RGB: #FF6464), a betűszín sötétebb
szürkére (RGB: #2D2D2D) változik, továbbá a verziószám mellett megjelenik egy felkiáltójel

( ) ikon.

A felhasználó a felkiáltójelre kattintva szűntetheti meg a verziófrissítés jelzését.

Fontos, hogy ha a verziófrissítés kiemelése aktív, azt a kliens a következő automatikus
frissítéskor nem írhatja felül, azaz addig kell látszódnia, amíg a felhasználó nem nyugtázza a
felkiáltójel ikonra kattintva.


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 10/43|


**Az ablak működési leírása (lapfül esetén külön almenüben)**

**Ablak betöltés**

Az ablak betöltésekor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H02_01”

  - Esemény (’ACTIVITY’): „WindowOpen”

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „View”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): NULL

**Képernyő tartalm** **án** **ak frissítése**

A képernyő ütem e zetten 20 mp - enként frissül, erre a fejlécben futó progress circle
figyelmeztet, és m u tatja a következő frissítés időpontját 20mp - ről visszaszámlálás módján.

Megjelenése az al áb bi:

Amikor a számláló 0- hoz ér, a kliens az alábbi műveleteket hajtja végre:

bejegyzés egyedi azonosítóját ( **BEJE** **GYZES** **_I** **D** ), m ajd a verziószámot összehasonlítja a
legutóbbi frissítésből kapottal.

**Belső megjegyzés betöltése (GET_HUBA_CHAT)** eljárást, és bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját

        - Frissíti a Bejegyzés részletek csempét a verziószám lekérdezésekor

kapott adatokkal.

        - Frissíti a Belső megyjegyzés csempét, ehhez a kliens meghívja az **S_54** **–**

**Belső megjegyzés betöltése (GET_HUBA_CHAT)** eljárást, és bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** )

        - Frissíti a Bejelentő csempét, ehhez a kliens meghívja az **S_49** **–**

**Bejelentés adatok lekérdezése (getBejelentesAdat)** eljárást, és
bemenő paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** )


**Formatted:** Font: Not Bold, Superscript

**Formatted:** Font: Not Bold

**Formatted:** Font: Bold, Font colour: Text 1

**Formatted:** Default Paragraph Font, Font: Bold, Font colour:
Text 1

**Formatted:** Font: Bold

**Formatted:** Underline

**Formatted:** Font: Bold

**Formatted:** Font: Bold

**Formatted:** Underline


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 11/43|



        - Frissíti a Kód és hely csempét, ehhez a kliens meghívja az **S_53** **–** **Kód és**

**hely adatainak lekérdezése (getHubaKodEsHely)** eljárást, és bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** )

        - Frissíti a HUBA történet csempét, ehhez a kliens meghívja az **S_56** **–**

**HUBA történet betöltése (GET_HUBA_ACTIVITY)** eljárást, és bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** )

        - #96127 Frissíti a Kifogások csempét, ehhez a kliens meghívja az **S_75** **–**
**Bejegyzés kifogások lista lekérezése** **(H** **UBA.Get_Kifogasok_Lista** **)**
eljárást, és bemenő paraméterként átadja a HUBA bejegyzés egyedi
azonosítóját ( **BEJEGYZES_ID** ) [#96127 VÉGE]

        
megnyitott szerkesztő képernyőt (H03_01, H04_01, H06_05, H08_01) bezárnak. Ehhez az
ablakok közötti k om munikációt kell felhasználni, és a **sendMessage** - el jelezni a dashboard

#94153 vége

**Ablak bezárása**

A képernyő bezárásakor a kliens meghívja az „ **S_27 – Felhasználói aktivitás naplózása** ”
szolgáltatást az alábbi bemenő paraméterekkel:

  - Ablakazonosító (’WINDOW_ID’): „H02_01”

  - Esemény (’ACTIVITY’): WindowClose

  - AD felhasználó (’AD_USER’): bejelentkezett felhasználó AD azonosítója

  - GVK felhasználó (’GVK_USER’): GVK felhasználói profil azonosítója

  - Esemény kiegészítő információk (’ACTIVITY_EXT’): „View”

  - Bejegyzés azonosító (’MAIN_ID’): HUBA bejegyzés azonosítója

  - Bejegyzés sub azonosító (’SUB_ID’): NULL

  - #93801 Előzmény felhasználói aktivitás azonosító (’PRE_ACTIVITY_ID’): A WindowOpen
eseménykor kapott **ACTIVITY_ID.**



**Formatted:** Not Superscript/ Subscript

**Formatted:** Font: Bold

**Formatted:** Not Superscript/ Subscript

**Formatted:** Font: Not Bold, Font colour: Text 1


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 12/43|


**2.2.3.1.** **H02_01 – HUBA történet**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H02_01_BKTortenet – HUBA bejegyzés HUBA történet megtekintése** operandust,
és amennyiben a felhasználónak engedélyezve van, meghívja a **S_56 – HUBA történet**
**betöltése (GET_HUBA_ACTIVITY)** eljárást, amitől visszakapja a megjelenítéshez
szükséges információkat.

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Belső megjegyzés csempe az alábbiak szerint jelenik meg:

~~**megtekintése**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~ ~~felhasználónak~~ ~~engedélyezve~~ ~~van~~, ~~a~~
~~bejegyzés~~ ~~verziószámát~~ ~~összehasonlítja~~ ~~a~~ ~~legutóbbi~~ ~~frissítéssel~~, ~~és~~ ~~vált~~ o ~~z~~ ás ese ~~t~~ én
~~meghívja~~ ~~a~~ ~~**S**~~ **_** ~~**56**~~ ~~**–**~~ ~~**HUBA**~~ ~~**történet**~~ ~~**betöltése**~~ ~~**(GET**~~ **_** ~~**HUBA**~~ **_** ~~**ACTIVITY)**~~ ~~eljárást~~, ~~amitől~~
~~visszakapja~~ ~~a~~ ~~megjelenítéshez~~ ~~szükséges~~ ~~információkat~~ .

**Ablak működése:**

A HUBA történet csempén csökkenő sorrendben (azaz a legfrissebb lesz elöl) jelennek
meg a naplózott események az adott HUBA bejegyzéshez kapcsolódóan.

A kliens a **S_56 – HUBA történet betöltése (GET_HUBA_ACTIVITY)** eljárástól megkapja
az összes megjelenítéshez szükséges információt JSON formátumban:

    - HUBA bejegyzés egyedi sub azonosítója (’subId’)

    - Ablak azonosítója (’windowId’)




-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 13/43|



    - Esemény megnevezése (’activity’)

    - Esemény kiegészítő információi (’activityExt’)

    - Esemény sablonja (’activityTemplate’)

    - Esemény kiegészítés sablonja (’activityExtTemplate’)

    - Esemény időpontja UTC (’timeUTC’)

    - Esemény időpontja (’logged’)

    - Felhasználó GVK profil azonosítója (’gvkUserId’)

    - Felhasználó GVK profil neve (’gvkUserName’)

A kapott események és sablonok alapján állítja össze a kliens a megjelenítendő
információkat naplóeseményenként az alábbiak szerint:

    - Bejegyzés létrehozás (Create)

Létrehozás esetén nincsenek további paraméterek, csak a létrehozás ténye,
ezért a HUBA történetben a sablonban meghatározott szöveget kell
megjeleníteni (pl.: „Bejegyzés rögzítésének időpontja!”)

Értesítés esetén szintén egy előre meghatározott szöveg kerül megjelenítésre
az értesítés sorszámának megjelölésével.

`o` Az alábbi helyekről érkezhet ilyen log:

          - H04_01 – HUBA – Kód és hely (bejegyzés létrehozás)

          - H06_06A – HUBA – Értesítés kezelése (értesítés létrehozás)

`o` Megjelenítés:

**<hubaActivity.logged> - <hubaActivity.gvkUserName>**

<hubaActivity.activityTemplate>

Az alábbi minta alapján:

    - Bejegyzés módosítás (Modify) [#88904]

Módosítás esetén ~~a~~ ~~kiegészítő~~ ~~információkban~~ ~~JSON~~ ~~formátumban~~ ~~megkapja~~ ~~a~~
~~kliens~~ ~~az~~ ~~összes~~ ~~mező~~ ~~eredeti~~ ~~és~~ ~~mó~~ d ~~osított~~ ~~tartalmát~~ ~~is~~, ~~amelyből~~ ~~differenciát~~
~~képez~~, ~~azaz~~ ~~csak~~ ~~azokkal~~ ~~a~~ ~~mezőkkel~~ ~~foglalkozik~~, ~~amelyeknek~~ ~~tartalma~~ ~~a~~
~~módosítás~~ ~~során~~ ~~megváltozott~~ . ~~F~~ ~~f~~ o rrások szerint eltérő sablonokkat kaphat a
kliens (pl.: képernyő neve változik, értesítések esetén a subId is megjelenik,
stb.).

`o` Az alábbi helyekről érkezhet ilyen log:

          - H03_01 – HUBA – Bejelentő

          - H04_01 – HUBA – Kód és hely


**Formatted:** Superscript


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 14/43|



          - H05_01 – HUBA – Korlátozás

          - H08_01 – HUBA – Bejegyzés részletek

`o` Megjelenítés:

**<hubaActivity.logged> - <hubaActivity.gvkUserName>**

<hubaActivity.activityTemplate>

~~<hubaActivity~~ . ~~activityExtTemplate>*~~

~~***~~ ~~*Fenti*~~ ~~*sort*~~ ~~*annyiszor*~~ ~~*ismétli*~~ ~~*a*~~ ~~*kliens*~~ *,* ~~*ahány*~~ ~~*adat*~~ ~~*tartalma*~~ ~~*megváltozott*~~

Az alábbi minta alapján:

    - Bejegyzés állapotának változása (StateChange)

Az állapotjelző mező változása a felületen nem direktben történik, hanem az
adatbázis oldalon több mező kiértékelése után, ezért erre külön naplóbejegyzés
kerül mentésre a HUBA történetbe. Értesítések esetén a háttérben futó

adatbázis és egyéb folyamatok módosíthatják az értesítés állapotát.

`o` Az alábbi helyekről érkezhet ilyen log:

          - H08_01 – HUBA – Bejegyzés részletek (bejegyzés
állapotváltozása)

          - K16_01 – K_16_01 – HUBA bejegyzés automatikus lezárása

(HUBA_AUTOCLOSE) (bejegyzés állapotváltozása)

          - H06_06A – HUBA – Értesítések kezelése (értesítés
állapotváltozása)

`o` Megjelenítés:

**<hubaActivity.logged> - <hubaActivity.gvkUserName>**

<hubaActivity.activityTemplate>

Az alábbi minta alapján:


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 15/43|



    - Adatbázis oldali egyéb tevékenységek

Értesítések esetén az e-mail (EMAIL_SEND) és SMS (SMS_SEND) elküldésének
megtörténte esetén kerül be log bejegyzés, amely az értesítés sorszámának
megjelölésével az alábbiak szerint jelenik meg.

`o` Az alábbi helyekről érkezhet ilyen log:

          - H06_06A – HUBA – Értesítések kezelése (értesítés
állapotváltozása)

`o` Megjelenítés:

**<hubaActivity.logged> - <hubaActivity.gvkUserName>**

<hubaActivity.activityTemplate>

Az alábbi minta alapján:


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 16/43|


**2.2.3.2.** **H02_02 – Belső megjegyzés**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H02_01_BKMegjegyzes – HUBA bejegyzés Belső megjegyzés megtekintése**
operandust, és amennyiben a felhasználónak engedélyezve van, meghívja a **S_54 –**
**Belső megjegyzés adatainak betöltése (GET_HUBA_CHAT)** eljárást, aminek bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 17/43|


Amennyiben még nem rögzítettek egyetlen belső megjegyzést sem az ado tt
bejegyzéshez, a csempe az alábbiak szerint jelenik meg:

#94430 vége


**Formatted:** Superscript


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 18/43|


Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Belső megjegyzés csempe az alábbiak szerint jelenik meg:

Ebben az esetben nincs adatlekérés, és a beviteli mező, valamint a Küldés nyomógomb
inaktívvá válnak, továbbá a tartalom helyett az alábbi szöveg jelenik meg:

„Nincs jogosultsága a Belső megjegyzé ~~es~~ e k megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával!”

|#94153|Ablak/Lapfül frissítése|
|---|---|
|||



~~**Ablak/Lapfül**~~ ~~**frissítése**~~

~~A~~ „ ~~H02~~ ~~–~~ ~~HUBA~~ ~~–~~ ~~Bejegyzés~~ ~~kezelése”~~ ~~képernyő~~ ~~20mp-enként~~ ~~frissíti~~ ~~tar~~ tal ~~m~~ á ~~t~~, i ~~l~~ y ~~e~~ nk ~~o~~ r
~~a~~ ~~kliens~~ ~~ellenőrzi~~ ~~az~~ ~~**OP**~~ **_** ~~**H02**~~ **_** ~~**01**~~ **_** ~~**BKMegjegyzes**~~ ~~**–**~~ ~~**HUBA**~~ ~~**bejegyzés**~~ ~~**Belső**~~ ~~**megjegyzés**~~
~~**megtekintése**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~ ~~felhasználónak~~ ~~engedélyezve~~ ~~van~~,
~~meghívja~~ ~~a~~ ~~**S**~~ **_** ~~**54**~~ ~~**–**~~ ~~**Belső**~~ ~~**megjegyzés**~~ ~~**adatainak**~~ ~~**betöltése**~~ ~~**(GET**~~ **_** ~~**HUBA**~~ **_** ~~**CHAT)**~~ ~~eljárást~~,
~~aminek~~ ~~bemenő~~ ~~paraméterként~~ ~~átadja~~ ~~a~~ ~~HUBA~~ ~~bejegyzés~~ ~~egye~~ d ~~i~~ az ~~onosítóját~~
~~(~~ ~~**BEJEGYZES**~~ **_** ~~**ID**~~ ~~)~~ .

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

**<Megjegyzés_időpontja> - <Megjegyzés létrehozója>**



**Formatted:** Strikethrough


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 19/43|


<Megjegyzés tartalma>


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 20/43|


**Ablak működése:**

A csempe alsó részén található egy beviteli mező, és egy „Küldés” gomb. A felhasználó
beírja a megjegyzését a beviteli mezőbe, majd megnyomja a küldés gombot.

A kliens a Küldés gomb kezelésére meghívja a **S_55 – Belső megjegyzés mentése**
**(SET_HUBA_CHAT)** eljárást, aminek bemenő paraméterként átadja a HUBA bejegyzés
egyedi azonosítóját ( **BEJEGYZES_ID** ), a Felhasználó GVK profil azonosítóját, valamint a
megjegyzés tartalmát.

Az eljárás mentése után a Belső megjegyzések csempe tartalmát soron kívül frissíti,
amihez meghívja a **S_54 – Belső megjegyzés betöltése (GET_HUBA_CHAT)** eljárást,
aminek bemenő paraméterként átadja a HUBA bejegyzés egyedi azonosítóját
( **BEJEGYZES_ID** ).


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 21/43|


**2.2.3.3.** **H02_03 –** ~~**Bejelentés**~~ ~~**B**~~ **ejelentő**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H03_01_BejelentesMegtekint** operandust, és amennyiben a felhasználónak
engedélyezve van, meghívja az **S_49** **–** **Bejelentés** **adatok** **lekérdezése**
**(getBejelentesAdat)** eljárást, aminek bemenő paraméterként átadja a HUBA bejegyzés
egyedi azonosítóját ( **BEJEGYZES_ID** ).

#94430 kezdete

Amennyiben még nem rögzítettek bejelentőt a bejegyzéshez, a Bejel entő csem pe az
alábbiak szerint jelenik meg:

**adat** ” felirat jelenik meg.

#94430 vége

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Bejelentő csempe az alábbiak szerint jelenik meg:

Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a fejlécből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:

„Nincs jogosultsága a Kód és hely megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával!”

|#94153|Ablak/Lapfül frissítése|
|---|---|
|||



~~**Ablak/Lapfül**~~ ~~**frissítése**~~


**Formatted:** Strikethrough


**Formatted:** Font: Bold



-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 22/43|


~~A~~ „ ~~H02~~ ~~–~~ ~~HUBA~~ ~~–~~ ~~Bejegyzés~~ ~~kezelése”~~ ~~képernyő~~ ~~20mp-enként~~ ~~frissíti~~ ~~tar~~ tal ~~m~~ á ~~t~~, i ~~l~~ y ~~e~~ nk ~~o~~ r
~~a~~ ~~kliens~~ ~~ellenőrzi~~ ~~az~~ ~~**OP**~~ **_** ~~**H03**~~ **_** ~~**01**~~ **_** ~~**BejelentesMegtekint**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~
~~felhasználónak~~ ~~engedélyezve~~ ~~van~~, ~~a~~ ~~bejegyzés~~ ~~verziószámát~~ ~~összehasonlítja~~ ~~a~~ ~~legutóbbi~~
~~frissítéssel~~, ~~és~~ ~~változás~~ ~~esetén~~ ~~meghívja~~ ~~a~~ ~~m~~ ~~eghívja~~ ~~a~~ ~~**S**~~ **_** ~~**49**~~ ~~**–**~~ ~~**Bejelentés**~~ ~~**adatok**~~
~~**lekérdezése**~~ ~~**(getBejelentesAdat)**~~ ~~eljárást~~, ~~aminek~~ ~~bemenő~~ ~~paraméterként~~ ~~átadja~~ ~~a~~
~~HUBA~~ ~~bejegyzés~~ ~~egyedi~~ ~~azonosítóját~~ ~~(~~ ~~**BEJEGYZES**~~ **_** ~~**ID**~~ ~~)~~ .

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - Bejelentő neve (’nev’): A HUBA.BEJEGYZES_BEJELENTO táblából kiolvasott NEV

értékét változatlan formában visszaadja az eljárás.

#99446 Amennyiben a mező értéke eléri a kliensen beállított értéket (túl hosszú),

akkor levégva kerül megjelenítésre, és "..."-tal kiegészíti az alkalmazás.
#99446_vége

    - Bejelentő törzsszáma (’torzsszam’): A HUBA.BEJEGYZES_BEJELENTO táblából

kiolvasott TORZSSZAM értékét változatlan formában visszaadja az eljárás.

    - Bejelentő telefonszáma (’telefonszam’): A HUBA.BEJEGYZES_BEJELENTO

táblából kiolvasott TELEFON értékét változatlan formában visszaadja az eljárás.

    - Bejelentés módja (’bejelentesModId’): A HUBA.BEJEGYZES táblából kiolvasott

BEJELENTES_MOD_ID alapján a K_BEJELENTES_MOD táblából a
BEJELENTES_MOD_ID alapján a BEJELENTES_MOD_NEV értéket visszaadja az
eljárás.

    - Bejelentés ideje (’bejelentesIdo’): A HUBA.BEJEGYZES táblából kiolvasott

BEJELENTES_IDO értékét változatlan formában visszaadja az eljárás.

    - Rögzítő neve (’letrehozoUser’): A HUBA.BEJEGYZES_BEJELENTO táblából

kiolvasott LETREHOZO_USER értékét alapján GVK_USERS táblából a
GVK_USER_ID alapján a GVK_USER_NAME értéket adja vissza az eljárás.

#99446 Amennyiben a mező értéke eléri a kliensen beállított értéket (túl hosszú),
akkor levégva kerül megjelenítésre, és "..."-tal kiegészíti az alkalmazás. [#99446_vége]

    - Rögzítő törzsszáma (’letrehozoUserTorzsszam’): A
HUBA.BEJEGYZES_BEJELENTO táblából kiolvasott LETREHOZO_USER értékét
alapján GVK_USERS táblából a GVK_USER_ID alapján az AD_USER_ID mentén
az AD_USERS táblából a TORZSSZAM értéket adja vissza az eljárás.

**Ablak működése:**

A csempe fejlécében két nyomógombos ikon található, amelyek működése az alábbiak

szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 23/43|


A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H03_01_BejelentesSzerkeszt** operandussal, ellenkező esetben nem

látható.

Kezelése esetén az alábbi folyamat zajlik le:

**H03_01 – HUBA – Bejelentés** képernyő szerkeszthetőségének ellenőrzése,
amihez a kliens meghívja a **K_15_01 – Szerkeszthetőség ellenőrzése**
**(GET_DATA_EDITABILITY)** eljárást, bemenő paraméterként átadva a képernyő
kódját **(H03_01)**, valamint a HUBA bejegyzés egyedi azonosítóját
**(BEJEGYZES_ID)** .

Az eljárástól válaszként egy numerikus érték érkezik. Amennyiben ez ’0’ (azaz
nulla), a képernyő szerkeszthető. Ettől eltérő érték a képernyőt aktuálisan
szerkesztő felhasználó GVK profil azonosítóját jelzi.

Szerkeszthetőség esetén a kliens megnyitja szerkesztésre a **H03_01 – HUBA –**
**Bejelentés** képernyő.

Ellenkező esetben hibaüzenetet küld az alábbiak szerint:

Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot, vagy megnyitja a
kívánt képernyőt megtekintési nézetben.

    - Megtekintés nyomógombos iko n (Tooltip: Megtekintés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H03_01_BejelentesMegtekint** operandussal, ellenkező esetben nem

látható.

Kezelése esetén új böngészűfülön megnyitja a kliens a **H03_01 – HUBA –**
**Bejelentés** képernyőt megtekintés módban.


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 24/43|


**2.2.3.4.** **H02_04 – Kód és hely**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H04_01_KodEsHelyMegtekint** operandust, és amennyiben a felhasználónak
engedélyezve van, meghívja az **S_53 – Kód és hely adatainak lekérdezése**
**(getHubaKodEsHely)** eljárást, aminek bemenő paraméterként átadja a HUBA
bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).

#94430 kezdete

Amennyiben még nem rögzítettek érintett helyeket a bejegyzéshez, a K ó d és hely
csempe az alábbiak szerint jelenik meg:

#94430 vége

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Kód és hely csempe az alábbiak szerint jelenik meg:

Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a fejlécből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:

„Nincs jogosultsága a Kód és hely megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával!”


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 25/43|


|#94153|Ablak/Lapfül frissítése|
|---|---|
|||


~~**Ablak/Lapfül**~~ ~~**frissítése**~~

~~A~~ „ ~~H02~~ ~~–~~ ~~HUBA~~ ~~–~~ ~~Bejegyzés~~ ~~kezelése”~~ ~~képernyő~~ ~~20mp-enként~~ ~~frissíti~~ ~~tar~~ tal ~~m~~ á ~~t~~, i ~~l~~ y ~~e~~ nk ~~o~~ r
~~a~~ ~~kliens~~ ~~ellenőrzi~~ ~~az~~ ~~**OP**~~ **_** ~~**H04**~~ **_** ~~**01**~~ **_** ~~**KodEsHelyMegtekint**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~

|Col1|Col2|
|---|---|
|frissítéssel, és változás esetén meghívja a meghívja a S_53 – Kód és hely adatainak Formatted: Strikethrough lekérdezése (getHubaKodEsHely) eljárást, aminek bemenő paraméterként átadja a Formatted: Strikethrough|Formatted: Strikethrough|
||Formatted: Strikethrough|


~~HUBA~~ ~~bejegyzés~~ ~~egyedi~~ ~~azonosítóját~~ ~~(~~ ~~**BEJEGYZES**~~ **_** ~~**ID**~~ ~~)~~ .

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - Késés főkód (’kesesFokod’) – szöveges érték, a HUBA.BEJEGYZES táblából

kiolvasott KESES_FOKOD alapján a K_KESESFOKOD táblából a K_ID alapján a
K_KOD és K_MEGNEVEZES értéket visszaadja az eljárás az alábbi formátumban:
K_KOD + „ – ” + K_MEGNEVEZES.

    - Szolgálati hely, Forgalmi szakasz és Topográfiai elem **[,]**, Hálózat, Terület, Forgalmi

csomópont, Állomásfőnökséget, Vonat és Jármű adatokat pedig a
HUBA.BEJEGYZES_HELYSZIN táblából listadobozban megjelenítve.

**Ablak működése:**

A csempe fejlécében két nyomógombos ikon található, amelyek működése az alábbiak

szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H04_01_KodEsHelySzerkeszt** operandussal, ellenkező esetben nem

látható.

Kezelése esetén az alábbi folyamat zajlik le:

**H04_01 – HUBA – Kód és hely** képernyő szerkeszthetőségének ellenőrzése,
amihez a kliens meghívja a **K_15_01 – Szerkeszthetőség ellenőrzése**
**(GET_DATA_EDITABILITY)** eljárást, bemenő paraméterként átadva a képernyő
kódját **(H04_01)**, valamint a HUBA bejegyzés egyedi azonosítóját
**(BEJEGYZES_ID)** .

Az eljárástól válaszként egy numerikus érték érkezik. Amennyiben ez ’0’ (azaz
nulla), a képernyő szerkeszthető. Ettől eltérő érték a képernyőt aktuálisan
szerkesztő felhasználó GVK profil azonosítóját jelzi.

Szerkeszthetőség esetén a kliens megnyitja szerkesztésre a **H04_01 – HUBA –**
**Kód és hely** képernyő.

Ellenkező esetben hibaüzenetet küld az alábbiak szerint:



**Formatted:** Strikethrough


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 26/43|


Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot, vagy megnyitja a
kívánt képernyőt megtekintési nézetben.

    - Megtekintés nyomógombos iko n (Tooltip: Megtekintés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H04_01_KodEsHelyMegtekint** operandussal, ellenkező esetben nem

látható.

Kezelése esetén új böngészűfülön megnyitja a kliens a **H04_01 – HUBA – Kód**
**és hely** képernyőt megtekintés módban.


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 27/43|


**2.2.3.5.** **H02_05 – Korlátozás**

#94430 kezdete

A korlátozások funkció a második szakaszban kerül megvalósításra, add i g fix en az alábbi
felirat jelenik meg:

#94430 vége


**Formatted:** C_normál


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 28/43|


**2.2.3.6.** **H02_06 – Értesítés kezelése**

**Csempe betöltés**

A „H02 – HUBA – Bejegyzés kezelése ” képernyő betöltésekor a kliens ell e nőrz i az
**OP_H06_06_ErtesitesMegtekint** operandust, és amennyiben a fel hasz nál ó nak

**(HUBA.Get_Ertesites_Lista)** eljárást, aminek bemenő paraméterként át adja a HUBA
bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).

#94430 kezdete

Amennyiben még nem rögzítettek értesítéseket a bejegyzéshez, az Ért esí tése k csem p e
az alábbiak szerint jelenik meg:

#94430 vége

Amennyiben a felhasználó nem rendelkezik a megtekintés hez sz ük séges
jogosultságokkal, úgy az Értesítések csempe az alábbiak szerint jelenik m eg:

Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a f ejléc ből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:


**Formatted:** Font: Bold


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 29/43|


„Nincs jogosultsága az Értesítések megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával! ”

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - Értesítés adatokat a HUBA.BEJEGYZES_ERTESITES táblából listadobozban

megjelenítve.

`o` Értesítés azonosítója (HUBA bejegyzésen belüli sorszám)
`o` Értesítés szintje
`o` Értesítés állapota
`o` Értesítés kiküldésének időpontja
`o` Értesítés szövege (max 3 sorig, a m ennyiben a szöveg hosszabb, levágja

a kliens és a végén „… ” szerepel)

**Ablak működése:**

A csempe fejlécében nyomógombos ikonok és ikon jelzések talál ható k, amely ek

működése az alábbiak szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)

A felhasználó számára csak a kkor érhető el, ha rendelkezik az
**OP_H06_06_ErtesitesSzerkeszt** ope ra n du ssal, ellenkező esetben nem látható.

Kezelése esetén új böngészűfülön meg nyitja a kliens a **H06_06** **–** **HUBA** **–**
**Értesítések kezelése** képernyőt szerkes zt és módban.

    - Megtekintés nyomógombos ikon (Tooltip: Megtekintés)

A felhasználó számára csak a kkor érhető el, ha rendelkezik az
**OP_H06_06_ErtesitesMegtekint** op era ndussal, ellenkező esetben nem látható.

Kezelése esetén új böngészűfülön megnyitja a kliens a **H06_06** **–** **HUBA** **–**
**Értesítések kezelése** képernyőt megt eki ntés módban.

    - Telefonos értesítés nagysága miatti jelző ikon (Tooltip: Telefonon értesítés)

Amennyiben bármely értesítésben be v a n állítva a Telefonos értesítés nagysága
miatt telefonos értesítés szüksége s op ció, abban az esetben megjelenik a
telefon ikon, ellenkező esetben nem lá tszik.

    - Értesítések száma badge ikon (Tooltip: Értesítések száma)

A bejegyzéshez tartozó értesítések szá m át mutatja, csak akkor látszódik, ha
értéke nagyobb, mint 0.

    - Értesítési napló megnyitása nyomógombos ikon (Tooltip: Értesítési napló
megnyitása)

operandussal, abban az esetben érhe t ől e l a nyomógomb, és kezelésére megnyílik a


**Formatted**

**Formatted:** Indent: Left: 2,47 cm, No bullets or numbering

**Formatted:** Indent: Left: 2,47 cm, No bullets or numbering

**Formatted:** Font: Bold

**Formatted:** Font: Bold


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 30/43|


Az operandus hiánya esetén a nyomóg ombos ikon nem látható.


**Formatted:** Indent: Left: 1,25 cm, First line: 1,22 cm


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 31/43|


~~**2.2.3.7**~~ ~~**.1.1.1.1.**~~ ~~**H**~~ ~~**02**~~ **_** ~~**07**~~ ~~**–**~~ ~~**Kifogáskezelés**~~


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 32/43|


**2.2.3.7.** **H02_07** **–** **K** **orlátozások**


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 33/43|


**2.2.3.8.** **H02_08 – Bejegyzés részletek**

**Csempe betöltés** [#96127]

A „H02 – HUBA – Bejegyzés kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H08_01_BRMegtekint – HUBA bejegyzés részletek megtekintése** operandust, és
amennyiben a felhasználónak engedélyezve van, meghívja a **S_50 – Bejegyzés**
**részletek adatainak betöltése (GET_HUBA_RESZLETEK)** eljárást, aminek bemenő
paraméterként átadja a HUBA bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).

#94430 kezdete

Amennyiben még nem rögzítettek részlet információkat a bejegyzésh ez, a B eje gy zés
részletek csempe az alábbiak szerint jelenik meg:


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 34/43|


Részleges rögzítés esetén megjelennek az adatok és a hiányzó mezők es et éb en a „ **N** **i** **nc** **s**
**adat** ” felirat jelenik meg.

#94430 vége

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges
jogosultságokkal, úgy a Bejegyzés részletek csempe az alábbiak szerint jelenik meg:

Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a fejlécből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:

„Nincs jogosultsága a Bejegyzés részletek megtekintéséhez!
Vegye fel a kapcsolatot a rendszer adminisztrátorával!”


|#94153|Ablak/Lapfül frissítése|
|---|---|
|||


**Formatted:** Strikethrough


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 35/43|


~~A~~ „ ~~H02~~ ~~–~~ ~~HUBA~~ ~~–~~ ~~Bejegyzés~~ ~~kezelése”~~ ~~képernyő~~ ~~20mp-enként~~ ~~frissíti~~ ~~tar~~ tal ~~m~~ á ~~t~~, i ~~l~~ y ~~e~~ nk ~~o~~ r
~~a~~ ~~kliens~~ ~~ellenőrzi~~ ~~az~~ ~~**OP**~~ **_** ~~**H08**~~ **_** ~~**01**~~ **_** ~~**BRMegtekint**~~ ~~**–**~~ ~~**HUBA**~~ ~~**bejegyzés**~~ ~~**részletek**~~
~~**megtekintése**~~ ~~operandust~~, ~~és~~ ~~amennyiben~~ ~~a~~ ~~felhasználónak~~ ~~engedélyezve~~ ~~van~~, ~~a~~
~~bejegyzés~~ ~~verziószámát~~ ~~összehasonlítja~~ ~~a~~ ~~legutóbbi~~ ~~frissítéssel~~, ~~és~~ ~~vált~~ o ~~z~~ ás ese ~~t~~ én
~~meghívja~~ ~~a~~ ~~m~~ ~~eghívja~~ ~~a~~ ~~**S**~~ **_** ~~**50**~~ ~~**–**~~ ~~**Bejegyzés**~~ ~~**részletek**~~ ~~**adatainak**~~ ~~**betöltése**~~
~~**(GET**~~ **_** ~~**HUBA**~~ **_** ~~**RESZLETEK)**~~ ~~eljárást~~, ~~aminek~~ ~~bemenő~~ ~~paraméterként~~ ~~átadja~~ ~~a~~ ~~HUBA~~
~~bejegyzés~~ ~~egyedi~~ ~~azonosítóját~~ ~~(~~ ~~**BEJEGYZES**~~ **_** ~~**ID**~~ ~~)~~ .

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - HUBA tárgya (’targy’) – szöveges érték, a képernyőterv alapján jelenik meg

    - HUBA kezdete (’kezdet_ido’) – dátum és idpont, a képernyőterv alapján

szöveges formában jelenik meg

    - HUBA vége (’vege_ido’) – dátum és idpont, a képernyőterv alapján szöveges

formában jelenik meg

    - HUBA állapota (’huba_allapot’) – szöveges érték, a képernyőterv alapján jelenik

meg

    - HUBA jellege, ahol a HUBA jelleg neve (’jelleg_nev’) szövegesen jelenik meg, a

saját színével (’jelleg_szin’)

    - HUBA felelősök, ahol a felelős szakágak színkódjaira (’felelos_szin’) színezett kör

alakú ikonok jelennek meg, és tooltipben látszódik a felelős szakág
megnevezése (’felelos_nev’)

    - HUBA leírások, ahol az összes leírás megjelenik kronológiai sorrendben az alábbi

formázással:

Létrehozás időpontja (’letrehozas_ido’)      - Létrehozó neve
(’letrehozo_user_name’) vastagon kiemelve, majd sortörést követően a
Tartalom (’szoveg’) normál betűkkel.

**Ablak működése:**

A csempe fejlécében ~~két~~ három nyomógombos ikon található, amelyek működése az

alábbiak szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H08_01_BRSzerkeszt** **–** **HUBA** **bejegyzés** **részletek** **szerkesztése**
operandussal, ellenkező esetben nem látható.

Kezelése esetén az alábbi folyamat zajlik le:

**H08 – HUBA – Bejegyzés részletek** képernyő szerkeszthetőségének
ellenőrzése, amihez a kliens meghívja a **K_15_01 – Szerkeszthetőség**
**ellenőrzése (GET_DATA_EDITABILITY)** eljárást, bemenő paraméterként átadva
a képernyő kódját **(H08)**, valamint a HUBA bejegyzés egyedi azonosítóját
**(BEJEGYZES_ID)** .


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 36/43|


Az eljárástól válaszként egy numerikus érték érkezik. Amennyiben ez ’0’ (azaz
nulla), a képernyő szerkeszthető. Ettől eltérő érték a képernyőt aktuálisan
szerkesztő felhasználó GVK profil azonosítóját jelzi.

Szerkeszthetőség esetén a klien megnyitja szerkesztésre a **H08 – HUBA –**
**Bejegyzés részletek** képernyő.

Ellenkező esetben hibaüzenetet küld az alábbiak szerint:

Ezután a felhasználó dönt, hogy bezárja az üzenet ablakot, vagy megnyitja a
kívánt képernyőt megtekintési nézetben.

    - Megtekintés nyomógombos iko n (Tooltip: Megtekintés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H08_01_BRMegtekint – HUBA bejegyzés részletek megtekintése**
operandussal, ellenkező esetben nem látható.

Kezelése esetén új böngészűfülön megnyitja a kliens a **H08 – HUBA – Bejegyzés**
**részletek** képernyőt megtekintés módban.

    - #96127 Vasút ikon (Tooltip: Vasútvállalat : felsorolva a H08_01-en kiválasztott
Vasúrvállalatok )

Azt jelöli, hogy a bejegyzéshez lett e kiválasztva a H08_01-es ablakon
Vasútvállalat. Csak akkor látszódik, ha lett kiválasztva, és akkor tooltip-ben fel
van sorolva a kiválasztott vasútvállalatok. [#96127 vége]

**2.2.3.9.** **H02_09 – Kifogások** [[#96127]](https://tadads1.tad.mavinformatika.hu/MAVICollection/IFP/_workitems/edit/93801)

**Csempe betöltés**

A „H09 – HUBA – Kifogások kezelése” képernyő betöltésekor a kliens ellenőrzi az
**OP_H09_01_KifogasMegtekint – HUBA kifogások megtekintése** operandust és azt,
hogy a bejelentkezett felhasználónak milyen vasútvállalata van! (MÁV-os felhasználó
minden kifogás láthat, de VV-s „csak” a saját Kifogását láthatja!)

Amennyiben a felhasználónak engedélyezve van, meghívja a **S_75** **–**
**Bejegyzeskifogások lista lekérdezése (HUBA.Get_Kifogasok_Lista)** eljárást, aminek
bemenő paraméterként átadja a HUBA bejegyzés egyedi azonosítóját ( **BEJEGYZES_ID** ).


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 37/43|


Amennyiben még nem rögzítettek Kifogást adott bejegyzéshez, a Kifogások részletek
csempe az alábbiak szerint jelenik meg: „Még nem rögzítettek kifogást ehhez a HUBA
bejegyzéshez.”.

Amennyiben a felhasználó nem rendelkezik a megtekintéshez szükséges operandussal,
úgy a Korlátozások csempe az alábbiak szerint jelenik meg: „Nincs jogosultsága a
Bejegyzés korlátozásaihoz! Vegye fel a kapcsolatot a rendszer adminisztrátorával!”




-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 38/43|


Ebben az esetben nincs adatlekérés, és a nyomógombos ikonok is eltűnnek a fejlécből,
továbbá a tartalom helyett az alábbi szöveg jelenik meg:

A kliens a visszakapott értékeket az alábbiak szerint jeleníti meg:

    - Értesítés adatokat a HUBA.BEJEGYZES_KIFOGAS táblából listadobozban

megjelenítve.

`o` Kifogás sorszáma (HUBA bejegyzésen belüli sorszám)

`o` Vasútvállalat

`o` Kifogás állapota

**Ablak működése:**

A csempe fejlécében két nyomógombos ikon található, amelyek működése az alábbiak

szerinti:

    - Szerkesztés nyomógombos ikon (Tooltip: Szerkesztés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H09_01_KifogasSzerkeszt** VAGY **OP_H09_01_KifogasBiralo** operandussal,

ellenkező esetben nem látható.

    - Megtekintés nyomógombos ikon (Tooltip: Megtekintés)

A felhasználó számára csak akkor érhető el, ha rendelkezik az
**OP_H09_01_KifogasMegtekint** operandussal, ellenkező esetben nem látható.

Kezelése esetén új ~~/~~ side nav-on megnyitja a kliens a **H09_01 – HUBA –**
**Kifogások kezelés** képernyőt megtekintés módban.


**Formatted:** Highlight


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 39/43|

### **2.2.4. Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb **




















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapért. érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Fejléc||||||||
|||||||||
|HUBA történet csempe||||||||
|-|HUBA történet|-|Scrollozható szöveges megjelenítő|-|-|-|HUBA_ACTIVITY, HUBA_ACTIVITY_TEMPLATE|
|||||||||
|Belső megjegyzés csempe||||||||
|-|Belső megjegyzések|-|Scrollozható szöveges megjelenítő|-|-|-|BEJEGYZES_MEGJEGYZES|
|-|Megjegyzés szöveg|-|Szabad szöveges beviteli mező|1000|-|-|BEJEGYZES_MEGJEGYZES|
|Küldés|Küldés|-|Nyomógomb|-|-|-|-|
|Bejelentés csempe||||||||
|Bejelentő neve|Bejelentő neve|-|szabad szöveges megjelenítő|-|Bejelentő neve (Bejelentő törzsszáma)|-|BEJEGYZES_BEJELENTO|
|Bejelentő telefonszáma|Bejelentő telefonszáma|-|szabad szöveges megjelenítő|-|-|-|BEJEGYZES_BEJELENTO|
|Bejelentés módja|Bejelentés módja|-|szabad szöveges megjelenítő|-|-|-|K_BEJELENTES_MOD|
|Bejelentés ideje|Bejelentés ideje|-|dátum és időpont megjelenítő|-|éééé.hh.nn óó:pp|-|BEJEGYZES_BEJELENTO|
|Rögzítő neve|Rögzítő neve|-|szabad szöveges megjelenítő|-|Rögzítő neve (Rögzítő törzsszámma)|-|BEJEGYZES_BEJELENTO|
|Kód és hely csempe||||||||
|Késés főkód|Késés főkód|-|szabad szöveges megjelenítő|-|Késés főkód – Késés főkód neve|-|K_KESESFOKOD|

#### Érintett helyek Érintett helyek - listadoboz 
#### Hely ikonja | Hely azonosítója – Hely é

### - BEJEGYZES_HELYSZIN


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 40/43|

















|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Kontrol típusa|Hossz|Maszk|Alapért. érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|-|Kifogások listája|-|listadoboz|-|Kifogás sorszáma | Vasútvállalat | Kifogás állapota ||-|BEJEGYZES_KIFOGAS|
|Értesítés csempe||||||||
|||||||||
|||||||||
|Bejegyzés részletek csempe||||||||
|HUBA tárgya|HUBA tárgya|-|szabad szöveges megjelenítő|-|-|-|BEJEGYZES|
|HUBA kezdetének időpontja|HUBA kezdetének időpontja|-|dátum és időpont megjelenítő|-|éééé.hh.nn óó:pp|-|BEJEGYZES|
|HUBA végének időpontja|HUBA végének időpontja|-|dátum és időpont megjelenítő|-|éééé.hh.nn óó:pp|-|BEJEGYZES|
|HUBA állapota|HUBA állapota|-|szabad szöveges megjelenítő|-|-|-|K_BEJEGYZES_ALLAPOT|
|HUBA felelős|HUBA felelős|-|grafikus megjelenítő|-|-|-|K_SZAKAG|
|HUBA jellege|HUBA jellege|-|szabad szöveges megjelenítő|-|-|-|K_JELLEG|
|HUBA rövid leírása|HUBA rövid leírása|-|Scrollozható szöveges megjelenítő|-|-|-|BEJEGYZES_LEIRAS|
|||||||||


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 41/43|


**Nyomógombok**




|Felirat|Megnevezés|Súgó (Tooltip) szöveg|Alapértelmezés [megnyomható/nem nyomható meg]|Material ikon neve|
|---|---|---|---|---|
|||Szerkesztés|||
|||Megtekintés|||
||||||


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 42/43|


**2.2.6.** **Hívott szolgáltatások**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|Ablakbetöltés||S_54 – Belső megjegyzés adatainak betöltése (GET_HUBA_CHAT)|
|Ablakbetöltés||S_56 – HUBA történet betöltése (GET_HUBA_ACTIVITY)|
|Ablakbetöltés||S_50 – Bejegyzés részletek adatainak betöltése (GET_HUBA_RESZLETEK)|
|Ablakbetöltés||S_49 – Bejelentés adatok lekérdezése (getBejelentesAdat)|
|Ablakbetöltés||S_53 – Kód és hely adatainak lekérdezése (getHubaKodEsHely)|
|#96127 Ablakbetöltés||S_75 – Bejegyzes kifogások lista lekérdezése (HUBA.Get_Kifogasok_Lista)|
|Szerkesztés nyomógomb ikonok||K_15_01 – Szerkeszthetőség ellenőrzése (GET_DATA_EDITABILITY)|
|Küldés nyomógomb||S_55 – Belső megjegyzés mentése (SET_HUBA_CHAT)|


**2.2.7.** **Rendszerüzenetek**

Nincs. vagy

|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Rendszerüzenet típusa|
|---|---|---|
||||
||||
||||
||||
||||



**2.2.8.** **Kódtáblák, választási listák**

Nincs.

**2.2.9.** **Rendszerparaméterek**

Nincs. vagy

Helye: /src/BackEnd/GvkBackend/WebApi/appsettings.json

|Rendszerparaméter neve|Rendszerparaméter jelentése|Default érték|Beállított érték|
|---|---|---|---|
|||||
|||||
|||||


-----

|GVK_UC_H02 – HUBA bejegyzés kezelése|Col2|Azonosító: RRT_GVK_UC_H02|
|---|---|---|
|Készítette/módosította: MÁV SZK|Változat: 1.0|Oldal: 43/43|


-----

